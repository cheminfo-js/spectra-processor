{"version":3,"sources":["webpack://SpectraProcessor/webpack/universalModuleDefinition","webpack://SpectraProcessor/webpack/bootstrap","webpack://SpectraProcessor/./node_modules/hash-it/es/constants.js","webpack://SpectraProcessor/./node_modules/ml-matrix/src/matrix.js","webpack://SpectraProcessor/./node_modules/ml-matrix/src/views/base.js","webpack://SpectraProcessor/./node_modules/is-any-array/src/index.js","webpack://SpectraProcessor/../src/utils.ts","webpack://SpectraProcessor/../src/index.ts","webpack://SpectraProcessor/./node_modules/ml-matrix/src/index.js","webpack://SpectraProcessor/./node_modules/ml-stat/index.js","webpack://SpectraProcessor/./node_modules/ml-matrix/src/util.js","webpack://SpectraProcessor/./node_modules/ml-matrix/src/dc/util.js","webpack://SpectraProcessor/./node_modules/hash-it/es/utils.js","webpack://SpectraProcessor/./node_modules/ml-savitzky-golay-generalized/node_modules/ml-stat/array.js","webpack://SpectraProcessor/./node_modules/ml-optimize-lorentzian/src/index.js","webpack://SpectraProcessor/./node_modules/ml-matrix/src/abstractMatrix.js","webpack://SpectraProcessor/./node_modules/ml-matrix/src/dc/lu.js","webpack://SpectraProcessor/./node_modules/ml-matrix/src/dc/svd.js","webpack://SpectraProcessor/./node_modules/ml-stat/array.js","webpack://SpectraProcessor/./node_modules/ml-curve-fitting/src/algebra.js","webpack://SpectraProcessor//Users/lpatiny/.nvm/versions/node/v11.1.0/lib/node_modules/cheminfo-tools/node_modules/buffer/index.js","webpack://SpectraProcessor/./node_modules/ml-arrayxy-uniquex/src/index.js","webpack://SpectraProcessor/./node_modules/fast-stringify/es/utils.js","webpack://SpectraProcessor/./node_modules/fast-stringify/es/index.js","webpack://SpectraProcessor/./lib/index.js","webpack://SpectraProcessor/./node_modules/ml-array-min/lib-es6/index.js","webpack://SpectraProcessor/./node_modules/ml-array-max/lib-es6/index.js","webpack://SpectraProcessor/./node_modules/ml-gsd/src/index.js","webpack://SpectraProcessor/./node_modules/ml-gsd/src/gsd.js","webpack://SpectraProcessor/./node_modules/ml-savitzky-golay-generalized/src/index.js","webpack://SpectraProcessor/./node_modules/extend/index.js","webpack://SpectraProcessor/./node_modules/ml-savitzky-golay-generalized/node_modules/ml-stat/index.js","webpack://SpectraProcessor/./node_modules/ml-savitzky-golay-generalized/node_modules/ml-stat/matrix.js","webpack://SpectraProcessor/./node_modules/ml-gsd/src/post/optimizePeaks.js","webpack://SpectraProcessor/./node_modules/ml-curve-fitting/src/index.js","webpack://SpectraProcessor/./node_modules/ml-curve-fitting/src/LM.js","webpack://SpectraProcessor/./node_modules/ml-matrix/src/symbol-species.js","webpack://SpectraProcessor/./node_modules/ml-matrix/node_modules/ml-array-utils/src/index.js","webpack://SpectraProcessor/./node_modules/ml-matrix/node_modules/ml-array-utils/src/ArrayUtils.js","webpack://SpectraProcessor/./node_modules/ml-stat/matrix.js","webpack://SpectraProcessor/./node_modules/ml-matrix/node_modules/ml-array-utils/src/getEquallySpaced.js","webpack://SpectraProcessor/./node_modules/ml-matrix/node_modules/ml-array-utils/src/snv.js","webpack://SpectraProcessor/./node_modules/ml-matrix/src/views/transpose.js","webpack://SpectraProcessor/./node_modules/ml-matrix/src/views/row.js","webpack://SpectraProcessor/./node_modules/ml-matrix/src/views/sub.js","webpack://SpectraProcessor/./node_modules/ml-matrix/src/views/selection.js","webpack://SpectraProcessor/./node_modules/ml-matrix/src/views/column.js","webpack://SpectraProcessor/./node_modules/ml-matrix/src/views/flipRow.js","webpack://SpectraProcessor/./node_modules/ml-matrix/src/views/flipColumn.js","webpack://SpectraProcessor/./node_modules/ml-matrix/src/decompositions.js","webpack://SpectraProcessor/./node_modules/ml-matrix/src/dc/evd.js","webpack://SpectraProcessor/./node_modules/ml-matrix/src/dc/qr.js","webpack://SpectraProcessor/./node_modules/ml-matrix/src/dc/cholesky.js","webpack://SpectraProcessor/./node_modules/ml-gsd/src/post/joinBroadPeaks.js","webpack://SpectraProcessor/./node_modules/ml-gsd/src/post/broadenPeaks.js","webpack://SpectraProcessor/./node_modules/ml-array-utils/src/index.js","webpack://SpectraProcessor/./node_modules/ml-array-utils/src/ArrayUtils.js","webpack://SpectraProcessor/./node_modules/ml-array-utils/src/getEquallySpaced.js","webpack://SpectraProcessor/./node_modules/ml-array-utils/src/snv.js","webpack://SpectraProcessor/./node_modules/hash-it/es/index.js","webpack://SpectraProcessor/(webpack)/buildin/global.js","webpack://SpectraProcessor//Users/lpatiny/.nvm/versions/node/v11.1.0/lib/node_modules/cheminfo-tools/node_modules/base64-js/index.js","webpack://SpectraProcessor//Users/lpatiny/.nvm/versions/node/v11.1.0/lib/node_modules/cheminfo-tools/node_modules/ieee754/index.js","webpack://SpectraProcessor//Users/lpatiny/.nvm/versions/node/v11.1.0/lib/node_modules/cheminfo-tools/node_modules/isarray/index.js","webpack://SpectraProcessor/./node_modules/jcampconverter/src/index.js","webpack://SpectraProcessor/./node_modules/xy-parser/src/index.js","webpack://SpectraProcessor/./node_modules/ml-array-sequential-fill/lib-es6/index.js","webpack://SpectraProcessor/./node_modules/ml-array-xy-equally-spaced/src/integral.js","webpack://SpectraProcessor/./node_modules/ml-array-xy-equally-spaced/src/equallySpacedSmooth.js","webpack://SpectraProcessor/./node_modules/ml-array-xy-equally-spaced/src/equallySpacedSlot.js","webpack://SpectraProcessor/./node_modules/ml-array-xy-equally-spaced/src/getZones.js","webpack://SpectraProcessor/./node_modules/ml-array-xy-equally-spaced/src/index.js","webpack://SpectraProcessor/./node_modules/ml-array-xy-filter-x/src/getZones.js","webpack://SpectraProcessor/./node_modules/ml-array-xy-filter-x/src/index.js"],"names":["_SELF_TAGS","_TOSTRING_TAGS","_TYPEDARRAY_TAGS","_UNPARSEABLE_TAGS","CIRCULAR_VALUE","HAS_BUFFER_FROM_SUPPORT","Buffer","from","HAS_UINT16ARRAY_SUPPORT","Uint16Array","HTML_ELEMENT_REGEXP","SVG_ELEMENT_REGEXP","OBJECT_CLASSES","OBJECT_CLASS_MAP","reduce","objectClasses","type","OBJECT_CLASS_TYPE_MAP","Object","keys","objectClassTypes","objectClass","toUpperCase","ITERABLE_TAGS","PRIMITIVE_TAGS","boolean","function","number","string","undefined","SELF_TAGS","ARGUMENTS","ARRAY","TOSTRING_TAGS","REGEXP","SYMBOL","TYPEDARRAY_TAGS","FLOAT32ARRAY","FLOAT64ARRAY","INT8ARRAY","INT16ARRAY","INT32ARRAY","UINT8ARRAY","UINT8CLAMPEDARRAY","UINT16ARRAY","UINT32ARRAY","UNPARSEABLE_TAGS","GENERATOR","PROMISE","WEAKMAP","WEAKSET","require","abstractMatrix","util","Matrix","Array","constructor","nRows","nColumns","i","arguments","length","isMatrix","clone","Number","isInteger","TypeError","isArray","matrix","RangeError","concat","rows","columns","set","rowIndex","columnIndex","value","get","newMatrix","Symbol","species","row","column","removeRow","index","checkRowIndex","splice","addRow","array","checkRowVector","removeColumn","checkColumnIndex","addColumn","checkColumnVector","exports","BaseView","module","toString","prototype","isAnyArray","object","call","endsWith","Decompositions","DC","outer","max","vector","to1DArray","checkIndices","rowIndices","columnIndices","rowOut","some","r","columnOut","c","checkRange","startRow","endRow","startColumn","endColumn","notAllNumbers","slice","arg","getRange","to","arr","sumByRow","sum","zeros","j","sumByColumn","sumAll","v","hypotenuse","a","b","Math","abs","sqrt","getEmpty2DArray","getFilled2DArray","charCodeAt","String","getFunctionName","fn","name","match","getCircularValue","getIntegerHashValue","hashA","hashB","charCode","getSortedEvent","_ref","bubbles","cancelBubble","cancelable","composed","currentTarget","defaultPrevented","eventPhase","isTrusted","returnValue","target","shouldSort","valueA","valueB","shouldSortPair","pairA","pairB","getPrefixedValue","tag","sort","subIndex","getSortedIterablePairs","iterable","isMap","pairs","forEach","key","push","stringify","finalPairs","size","pair","join","getSortedObject","objectKeys","newObject","getStringifiedArrayBufferFallback","buffer","fromCharCode","apply","getStringifiedArrayBufferModern","getStringifiedArrayBufferNoSupport","getStringifiedArrayBuffer","getStringifiedDocumentFragment","fragment","children","innerHTML","outerHTML","indexOf","getNormalizedValue","sortedCache","passedTag","OBJECT","DATE","getTime","ERROR","stack","EVENT","test","DOCUMENTFRAGMENT","ARRAYBUFFER","DATAVIEW","createReplacer","fastStringify","compareNumbers","values","Infinity","l","min","minMax","arithmeticMean","mean","geometricMean","mul","pow","logMean","lnsum","log","grandMean","means","samples","n","truncatedMean","percent","alreadySorted","k","floor","harmonicMean","contraHarmonicMean","r1","r2","median","half","variance","unbiased","theMean","theVariance","x","standardDeviation","standardError","quartiles","quart","q1","ceil","q2","q3","pooledStandardDeviation","pooledVariance","vari","mode","itemCount","itemArray","count","maxValue","maxIndex","covariance","vector1","vector2","mean1","mean2","cov","y","skewness","s2","s3","dev","m2","m3","g","kurtosis","s4","m4","entropy","eps","weightedMean","weights","weightedStandardDeviation","weightedVariance","z","w","center","inPlace","result","standardize","standardDev","cumulativeSum","LM","math","algebra","sumOfLorentzians","t","p","nL","factor","p2","cols","sumOfGaussians","exp","singleLorentzian","singleGaussian","factor2","optimizeSingleLorentzian","xy","peak","opts","xy2","parseData","percentage","y_data","maxY","nbPoints","weight","dot","create","LMOptions","consts","dt","dx","p_init","width","p_min","p_max","p_fit","optimize","optimizeSingleGaussian","optimizeLorentzianTrain","group","currentIndex","nextX","tI","yI","current","optimizeGaussianTrain","optimizeLorentzianSum","optimizeGaussianSum","threshold","nbSeries","transpose","sizeException","LuDecomposition","SvDecomposition","arrayUtils","MatrixTransposeView","MatrixRowView","MatrixSubView","MatrixSelectionView","MatrixColumnView","MatrixFlipRowView","MatrixFlipColumnView","superCtor","from1DArray","newRows","newColumns","newData","rowVector","columnVector","empty","fill","ones","rand","rng","random","randInt","eye","diag","data","matrix1","matrix2","checkMatrix","klass","callback","ii","jj","to2DArray","copy","isRowVector","isColumnVector","isVector","isSquare","isSymmetric","Error","repeat","rowRep","colRep","setSubMatrix","neg","mulS","getRow","getRowVector","setRow","swapRows","row1","row2","temp","getColumn","getColumnVector","setColumn","swapColumns","column1","column2","addRowVector","subRowVector","mulRowVector","divRowVector","addColumnVector","subColumnVector","mulColumnVector","divColumnVector","mulRow","mulColumn","idx","minIndex","maxRow","maxRowIndex","minRow","minRowIndex","maxColumn","maxColumnIndex","minColumn","minColumnIndex","by","prod","mmul","other","console","warn","m","Bcolj","s","strassen2x2","a11","b11","a12","b12","a21","b21","a22","b22","m1","m5","m6","m7","c00","c01","c10","c11","strassen3x3","a00","a01","a02","a10","a20","b00","b01","b02","b10","b20","m8","m9","m10","m11","m12","m13","m14","m15","m16","m17","m18","m19","m20","m21","m22","m23","c02","c12","c20","c21","c22","mmulStrassen","c1","c2","embed","mat","resultat","blockMult","halfRows","parseInt","halfCols","subMatrix","add","sub","scaleRows","scaled","scale","scaleColumns","kroneckerProduct","q","sortRows","compareFunction","sortColumns","subMatrixRow","indices","subMatrixColumn","selection","trace","transposeView","rowView","columnView","flipRowView","flipColumnView","subMatrixView","selectionView","det","d","subMatrix0","subMatrix1","subMatrix2","determinant","pseudoInverse","EPSILON","svdSolution","autoTranspose","U","leftSingularVectors","V","rightSingularVectors","diagonal","checkDimensions","otherMatrix","identity","negate","tensorProduct","inplaceOperator","inplaceOperatorScalar","inplaceOperatorMatrix","staticOperator","inplaceMethod","staticMethod","inplaceMethodWithArgs","staticMethodWithArgs","inplaceMethodWithOneArgScalar","inplaceMethodWithOneArgMatrix","inplaceMethodWithOneArg","staticMethodWithOneArg","operators","operator","inplaceOp","eval","fillTemplateFunction","op","inplaceOpS","inplaceOpM","staticOp","methods","mathMethod","method","inplaceMeth","staticMeth","methodsWithArgs","methodWithArg","args","inplaceMethWithArgs","staticMethWithArgs","tmplVar","inplaceMethod2","inplaceMethodS","inplaceMethodM","staticMethod2","template","replace","RegExp","lu","pivotVector","pivotSign","LUrowi","LUcolj","kmax","LU","isSingular","col","lowerTriangularMatrix","X","upperTriangularMatrix","pivotPermutationVector","solve","SingularValueDecomposition","options","nu","wantu","wantv","computeLeftSingularVectors","computeRightSingularVectors","swapped","aux","e","work","nct","nrt","ks","f","cs","sn","kase","sp","spm1","epm1","sk","ek","shift","pp","iter","tmp","condition","norm2","rank","tol","diagonalMatrix","Y","scols","Ls","VL","vrows","urows","VLU","solveForDiagonal","inverse","vcols","ucols","robustMeanAndStdev","stdev","averageDeviations","A","B","subtract","multiply","dotMultiply","dotDivide","div","dotPow","inv","base64","ieee754","SlowBuffer","INSPECT_MAX_BYTES","TYPED_ARRAY_SUPPORT","global","typedArraySupport","kMaxLength","Uint8Array","__proto__","foo","subarray","byteLength","createBuffer","that","encodingOrOffset","allocUnsafe","poolSize","_augment","ArrayBuffer","fromArrayBuffer","fromString","fromObject","defineProperty","configurable","assertSize","alloc","encoding","checked","allocUnsafeSlow","isEncoding","actual","write","fromArrayLike","byteOffset","obj","isBuffer","len","isnan","_isBuffer","compare","toLowerCase","list","pos","buf","isView","loweredCase","utf8ToBytes","base64ToBytes","slowToString","start","end","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","swap16","swap32","swap64","equals","inspect","str","thisStart","thisEnd","thisCopy","targetCopy","bidirectionalIndexOf","val","dir","isNaN","arrayIndexOf","lastIndexOf","indexSize","arrLength","valLength","read","readUInt16BE","foundIndex","found","includes","hexWrite","offset","remaining","strLen","parsed","substr","utf8Write","blitBuffer","asciiWrite","asciiToBytes","latin1Write","base64Write","ucs2Write","utf16leToBytes","isFinite","toJSON","_arr","fromByteArray","res","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","decodeCodePointsArray","MAX_ARGUMENTS_LENGTH","codePoints","ret","out","toHex","bytes","newBuf","sliceLen","checkOffset","ext","readUIntLE","noAssert","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","checkInt","writeUIntLE","maxBytes","writeUIntBE","writeUInt8","objectWriteUInt16","littleEndian","writeUInt16LE","writeUInt16BE","objectWriteUInt32","writeUInt32LE","writeUInt32BE","writeIntLE","limit","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","checkIEEE754","writeFloat","writeFloatLE","writeFloatBE","writeDouble","writeDoubleLE","writeDoubleBE","targetStart","code","INVALID_BASE64_RE","base64clean","stringtrim","trim","units","leadSurrogate","byteArray","hi","lo","toByteArray","src","dst","uniqueX","xs","ys","counter","first","newArray","refCount","getValue","replacer","circularReplacer","getCircularReplacer","hasReplacer","cache","locationOfThis","locationOfValue","indent","JSON","_interopDefault","ex","filterX","mlGsd","equallySpaced","Util","hash","jcampconverter","xyParser","ABSORBANCE","TRANSMITTANCE","PERCENT_TRANSMITTANCE","getKind","kind","wavelength","transmittance","peaks","getAnnotations","spectrum","fillColor","strokeColor","creationFct","annotations","map","annotation","line","strokeWidth","annotationAbsorbance","annotationTransmittance","label","text","anchor","color","position","dy","absorbance","getData","filter","getAbsorbance","getTransmittance","getPercentTransmittance","addPeak","log10","existing","getPeakKind","minTransmittance","maxTransmittance","peakPicking","targetWavelength","range","bestPeak","getClosest","findClosest","bestInRange","error","newError","setBestPeak","previousIndex","autoPeakPicking","noiseLevel","minMaxRatio","fromWavelength","toWavelength","replaceExisting","gsd","realTopDetection","maxCriteria","smoothY","sgOptions","windowSize","polynomial","pop","peakLoop","getNormalized","optionsHash","normalized","numberOfPoints","applySNV","exclusions","SNV","getYLabel","Spectrum","json","clearCache","check","setPeaks","setMode","minWavelength","maxWavelength","minAbsorbance","maxAbsorbance","Spectra","normalizationOptions","normalization","exclusion","ignore","addSpectrum","id","meta","getSpectrumIndex","addFromJcamp","jcamp","force","contains","fromJcamp","removeSpectrum","getNormalizedData","ids","datum","getChart","chart","title","styles","unselected","lineColor","lineWidth","lineStyle","selected","convert","spectra","yUnit","fromText","assign","arrayType","parseXY","transmisttance","getFilterAnnotations","input","post","optimizePeaks","joinBroadPeaks","broadenPeaks","SG","defaultOptions","broadRatio","heightFactor","boundaries","derivativeThreshold","yIn","maxDx","minDx","MAX_VALUE","getNoiseLevel","yCorrection","dY","ddY","derivative","maxDdy","lastMax","lastMin","minddY","intervalL","intervalR","broadMask","minddYLen","intervalLLen","intervalRLen","broadMaskLen","signals","signalsLen","lastK","possible","frequency","distanceJ","minDistance","gettingCloser","soft","left","right","yLeft","yRight","height","base","stddev","peakList","alpha","beta","gamma","currentPoint","extend","stat","SavitzkyGolay","h","np","ans","fullWeights","hs","constantH","wg1","wg2","d1","d2","getHs","wg","GramPoly","Grampoly","GenFact","gf","Weight","hasOwn","hasOwnProperty","toStr","gOPD","getOwnPropertyDescriptor","isPlainObject","hasOwnConstructor","hasIsPrototypeOf","setProperty","enumerable","newValue","writable","getProperty","copyIsArray","deep","arrayStat","l1","l2","dimension","N","sum1","sum2","medians","modes","skew","kurt","standardDeviations","standardErrors","sqrtN","scatter","divisor","correlation","scores","zScores","cor","resultRow","sourceRow","weightSum","weightedCovariance","s1","weightedScatter","sampleFunction","lastIndex","sampleX","sampleY","direction","sign","delta","mid","stop","fnType","groups","groupPeaks","sampling","limits","optPeaks","optPeak","upperLimit","lowerLimit","DEBUG","func","y_dat","dp","tensor_parameter","iteration","Npar","Npnt","p_old","y_old","X2","X2_old","J","length_t","length_y_dat","corr","sigma_p","sigma_y","R_sq","cvg_hist","prnt","MaxIter","epsilon_1","epsilon_2","epsilon_3","epsilon_4","lambda_0","lambda_UP_fac","lambda_DN_fac","Update_Type","dp_array","Nfit","weight_sq","lm_matx","JtWJ","JtWdy","Chi_sq","y_hat","lambda","hidx","p_try","delta_y","X2_try","JtWdy_th","rho","dX2","lm_FD_J","ps","del","y1","lm_Broyden_J","h_t","Jt","for","getEquallySpacedData","Stat","coordArrayToPoints","dimensions","pointsArr","point","coordArrayToCoordMatrix","coordinatesArray","points","coordMatrixToCoordArray","coordMatrix","coodinatesArray","resultMatrix","pointsToCoordArray","applyDotProduct","firstVector","secondVector","largestVector","smallestVector","difference","dotProductApplied","currentMin","coordMatrixToPoints","pointsToCoordMatrix","theSum","product","theProduct","reverse","xLength","algorithm","variant","output","getEquallySpacedSlot","getEquallySpacedSmooth","step","halfStep","initialOriginalStep","lastOriginalStep","previousX","MIN_VALUE","previousY","nextY","currentValue","slope","intercept","sumAtMin","sumAtMax","getSlope","x0","y0","x1","main","integral","lastStep","frontOutsideSpectra","backOutsideSpectra","currentPoints","std","EigenvalueDecomposition","QrDecomposition","CholeskyDecomposition","leftHandSide","rightHandSide","SVD","EVD","QR","CHO","assumeSymmetric","tred2","tql2","H","ort","orthes","hqr2","realEigenvalues","imaginaryEigenvalues","eigenvectorMatrix","hh","dl1","c3","el1","tst1","low","high","nn","exshift","norm","ra","sa","vr","vi","notlast","cdivres","cdiv","xr","xi","yr","yi","qr","rdiag","nrm","Rdiag","isFullRank","orthogonalMatrix","positiveDefinite","Lrowj","Lrowk","L","Opt","broadLines","maxI","candidates","indexes","fitted","overlap","nextPeak","is","curry","otherObject","all","_len","objects","_key","isEqual","any","_len2","_key2","not","Function","window","lookup","revLookup","Arr","getLens","b64","validLen","placeHoldersLen","lens","_byteLength","curByte","tripletToBase64","num","encodeChunk","uint8","extraBytes","parts","maxChunkLength","len2","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","LN2","getConverter","ntuplesSeparator","GC_MS_FIELDS","convertToFloatArray","stringArray","floatArray","parseFloat","keepRecordsRegExp","withoutXY","chromatogram","keepSpectra","noContour","nbContourLevels","noiseMultiplier","profiling","wantXY","Date","now","ntuples","ldr","dataLabel","dataValue","ldrs","endLine","infos","logs","info","action","time","split","substring","xIndex","yIndex","firstVariable","secondVariable","symbol","firstX","firstY","last","lastX","lastY","vardim","xFactor","yFactor","xUnit","datatable","deltaX","prepareSpectrum","fastParseXYData","parsePeakTable","parseXYA","dataType","twoD","maxX","minX","minY","observeFrequency","xType","indirectFrequency","shiftOffsetNum","shiftOffsetVal","varname","vartype","varform","yType","page","pageValue","pageSymbol","pageSymbolIndex","unit","isMSField","convertMSFieldToLabel","sampleDescription","newNtuples","add2D","complexChromatogram","simpleChromatogram","times","series","ms","existingGCMSFields","intensity","getMedian","convertTo3DZ","minZ","maxZ","ySize","xSize","xVector","noise","zData","contourLines","generateContourLines","povarHeight0","povarHeight1","povarHeight2","povarHeight3","isOver0","isOver1","isOver2","isOver3","nbSubSpectra","nbPovars","pAx","pAy","pBx","pBy","xN","yN","contourLevels","lineZValue","level","contourLevel","side","lines","zValue","iSubSpectra","subSpectra","subSpectraAfter","povar","segments","isXYdata","currentData","currentX","currentY","ascii","newLine","isDifference","isLastDifference","lastDifference","isDuplicate","inComment","lastValue","isNegative","inValue","skipFirstValue","decimalPosition","duplicate","ascii2","removeSymbolRegExp","isXYAdata","removeCommentRegExp","peakTableSplitRegExp","isPeaktable","JcampConverter","useWorker","postToWorker","stamps","worker","createWorker","Promise","resolve","stamp","postMessage","workerURL","URL","createObjectURL","Blob","Worker","revokeObjectURL","addEventListener","event","parse","createTree","flatten","flat","ntupleLevel","spaces","labelLine","startsWith","finished","entry","normalize","xColumn","yColumn","keepInfo","maxNumberColumns","minNumberColumns","fields","uniqueXFunction","newResult","_typeof","iterator","sequentialFill","_options","_options$from","_options$to","_options$size","_i","equallySpacedSmooth","equallySpacedSlot","getZones","toRemove","previous","total","unitsPerPoint","zones","currentFrom","totalPoints","currentNbPoints","round","arrayXY","xResult","yResult","zone","zoneResult","processZone","currentZoneIndex","newX","newY"],"mappings":"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","file":"spectra-processor.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"SpectraProcessor\"] = factory();\n\telse\n\t\troot[\"SpectraProcessor\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 20);\n","var _SELF_TAGS, _TOSTRING_TAGS, _TYPEDARRAY_TAGS, _UNPARSEABLE_TAGS;\n\n/**\n * @constant {string} CIRCULAR_VALUE\n */\nexport var CIRCULAR_VALUE = '~';\n/**\n * @constant {boolean} HAS_BUFFER_FROM_SUPPORT\n */\n\nexport var HAS_BUFFER_FROM_SUPPORT = typeof Buffer !== 'undefined' && typeof Buffer.from === 'function';\n/**\n * @constant {boolean} HAS_UINT16ARRAY_SUPPORT\n */\n\nexport var HAS_UINT16ARRAY_SUPPORT = typeof Uint16Array === 'function';\n/**\n * @constant {RegExp} HTML_ELEMENT_REGEXP\n */\n\nexport var HTML_ELEMENT_REGEXP = /\\[object (HTML(.*)Element)\\]/;\n/**\n * @constant {RegExp} SVG_ELEMENT_REGEXP\n */\n\nexport var SVG_ELEMENT_REGEXP = /\\[object (SVG(.*)Element)\\]/;\n/**\n * @constant {Array<string>} OBJECT_CLASSES\n */\n\nexport var OBJECT_CLASSES = ['Arguments', 'Array', 'ArrayBuffer', 'Boolean', 'DataView', 'Date', 'DocumentFragment', 'Error', 'Event', 'Float32Array', 'Float64Array', 'Function', 'Generator', 'GeneratorFunction', 'HTMLElement', 'Int8Array', 'Int16Array', 'Int32Array', 'Map', 'Null', 'Number', 'Object', 'Promise', 'RegExp', 'Set', 'String', 'Symbol', 'Uint8Array', 'Uint8ClampedArray', 'Uint16Array', 'Uint32Array', 'Undefined', 'WeakMap', 'WeakSet', 'Window'];\n/**\n * @constant {Object} OBJECT_CLASS_MAP\n */\n\nexport var OBJECT_CLASS_MAP = OBJECT_CLASSES.reduce(function (objectClasses, type) {\n  objectClasses[\"[object \" + type + \"]\"] = type;\n  return objectClasses;\n}, {});\n/**\n * @constant {Object} OBJECT_CLASS_TYPE_MAP\n */\n\nexport var OBJECT_CLASS_TYPE_MAP = Object.keys(OBJECT_CLASS_MAP).reduce(function (objectClassTypes, objectClass) {\n  objectClassTypes[OBJECT_CLASS_MAP[objectClass].toUpperCase()] = objectClass;\n  return objectClassTypes;\n}, {});\nexport var ITERABLE_TAGS = {\n  '[object Map]': true,\n  '[object Set]': true\n};\nexport var PRIMITIVE_TAGS = {\n  boolean: true,\n  function: true,\n  number: true,\n  string: true,\n  undefined: true\n};\nexport var SELF_TAGS = (_SELF_TAGS = {}, _SELF_TAGS[OBJECT_CLASS_TYPE_MAP.ARGUMENTS] = true, _SELF_TAGS[OBJECT_CLASS_TYPE_MAP.ARRAY] = true, _SELF_TAGS);\nexport var TOSTRING_TAGS = (_TOSTRING_TAGS = {}, _TOSTRING_TAGS[OBJECT_CLASS_TYPE_MAP.REGEXP] = true, _TOSTRING_TAGS[OBJECT_CLASS_TYPE_MAP.SYMBOL] = true, _TOSTRING_TAGS);\nexport var TYPEDARRAY_TAGS = (_TYPEDARRAY_TAGS = {}, _TYPEDARRAY_TAGS[OBJECT_CLASS_TYPE_MAP.FLOAT32ARRAY] = true, _TYPEDARRAY_TAGS[OBJECT_CLASS_TYPE_MAP.FLOAT64ARRAY] = true, _TYPEDARRAY_TAGS[OBJECT_CLASS_TYPE_MAP.INT8ARRAY] = true, _TYPEDARRAY_TAGS[OBJECT_CLASS_TYPE_MAP.INT16ARRAY] = true, _TYPEDARRAY_TAGS[OBJECT_CLASS_TYPE_MAP.INT32ARRAY] = true, _TYPEDARRAY_TAGS[OBJECT_CLASS_TYPE_MAP.UINT8ARRAY] = true, _TYPEDARRAY_TAGS[OBJECT_CLASS_TYPE_MAP.UINT8CLAMPEDARRAY] = true, _TYPEDARRAY_TAGS[OBJECT_CLASS_TYPE_MAP.UINT16ARRAY] = true, _TYPEDARRAY_TAGS[OBJECT_CLASS_TYPE_MAP.UINT32ARRAY] = true, _TYPEDARRAY_TAGS);\nexport var UNPARSEABLE_TAGS = (_UNPARSEABLE_TAGS = {}, _UNPARSEABLE_TAGS[OBJECT_CLASS_TYPE_MAP.GENERATOR] = true, _UNPARSEABLE_TAGS[OBJECT_CLASS_TYPE_MAP.PROMISE] = true, _UNPARSEABLE_TAGS[OBJECT_CLASS_TYPE_MAP.WEAKMAP] = true, _UNPARSEABLE_TAGS[OBJECT_CLASS_TYPE_MAP.WEAKSET] = true, _UNPARSEABLE_TAGS);","'use strict';\n\nrequire('./symbol-species');\nvar abstractMatrix = require('./abstractMatrix');\nvar util = require('./util');\n\nclass Matrix extends abstractMatrix(Array) {\n    constructor(nRows, nColumns) {\n        var i;\n        if (arguments.length === 1 && typeof nRows === 'number') {\n            return new Array(nRows);\n        }\n        if (Matrix.isMatrix(nRows)) {\n            return nRows.clone();\n        } else if (Number.isInteger(nRows) && nRows > 0) { // Create an empty matrix\n            super(nRows);\n            if (Number.isInteger(nColumns) && nColumns > 0) {\n                for (i = 0; i < nRows; i++) {\n                    this[i] = new Array(nColumns);\n                }\n            } else {\n                throw new TypeError('nColumns must be a positive integer');\n            }\n        } else if (Array.isArray(nRows)) { // Copy the values from the 2D array\n            const matrix = nRows;\n            nRows = matrix.length;\n            nColumns = matrix[0].length;\n            if (typeof nColumns !== 'number' || nColumns === 0) {\n                throw new TypeError('Data must be a 2D array with at least one element');\n            }\n            super(nRows);\n            for (i = 0; i < nRows; i++) {\n                if (matrix[i].length !== nColumns) {\n                    throw new RangeError('Inconsistent array dimensions');\n                }\n                this[i] = [].concat(matrix[i]);\n            }\n        } else {\n            throw new TypeError('First argument must be a positive number or an array');\n        }\n        this.rows = nRows;\n        this.columns = nColumns;\n        return this;\n    }\n\n    set(rowIndex, columnIndex, value) {\n        this[rowIndex][columnIndex] = value;\n        return this;\n    }\n\n    get(rowIndex, columnIndex) {\n        return this[rowIndex][columnIndex];\n    }\n\n    /**\n     * Creates an exact and independent copy of the matrix\n     * @return {Matrix}\n     */\n    clone() {\n        var newMatrix = new this.constructor[Symbol.species](this.rows, this.columns);\n        for (var row = 0; row < this.rows; row++) {\n            for (var column = 0; column < this.columns; column++) {\n                newMatrix.set(row, column, this.get(row, column));\n            }\n        }\n        return newMatrix;\n    }\n\n    /**\n     * Removes a row from the given index\n     * @param {number} index - Row index\n     * @return {Matrix} this\n     */\n    removeRow(index) {\n        util.checkRowIndex(this, index);\n        if (this.rows === 1) {\n            throw new RangeError('A matrix cannot have less than one row');\n        }\n        this.splice(index, 1);\n        this.rows -= 1;\n        return this;\n    }\n\n    /**\n     * Adds a row at the given index\n     * @param {number} [index = this.rows] - Row index\n     * @param {Array|Matrix} array - Array or vector\n     * @return {Matrix} this\n     */\n    addRow(index, array) {\n        if (array === undefined) {\n            array = index;\n            index = this.rows;\n        }\n        util.checkRowIndex(this, index, true);\n        array = util.checkRowVector(this, array, true);\n        this.splice(index, 0, array);\n        this.rows += 1;\n        return this;\n    }\n\n    /**\n     * Removes a column from the given index\n     * @param {number} index - Column index\n     * @return {Matrix} this\n     */\n    removeColumn(index) {\n        util.checkColumnIndex(this, index);\n        if (this.columns === 1) {\n            throw new RangeError('A matrix cannot have less than one column');\n        }\n        for (var i = 0; i < this.rows; i++) {\n            this[i].splice(index, 1);\n        }\n        this.columns -= 1;\n        return this;\n    }\n\n    /**\n     * Adds a column at the given index\n     * @param {number} [index = this.columns] - Column index\n     * @param {Array|Matrix} array - Array or vector\n     * @return {Matrix} this\n     */\n    addColumn(index, array) {\n        if (typeof array === 'undefined') {\n            array = index;\n            index = this.columns;\n        }\n        util.checkColumnIndex(this, index, true);\n        array = util.checkColumnVector(this, array);\n        for (var i = 0; i < this.rows; i++) {\n            this[i].splice(index, 0, array[i]);\n        }\n        this.columns += 1;\n        return this;\n    }\n}\n\nexports.Matrix = Matrix;\nMatrix.abstractMatrix = abstractMatrix;\n","'use strict';\n\nvar abstractMatrix = require('../abstractMatrix');\nvar Matrix = require('../matrix');\n\nclass BaseView extends abstractMatrix() {\n    constructor(matrix, rows, columns) {\n        super();\n        this.matrix = matrix;\n        this.rows = rows;\n        this.columns = columns;\n    }\n\n    static get [Symbol.species]() {\n        return Matrix.Matrix;\n    }\n}\n\nmodule.exports = BaseView;\n","'use strict';\n\nconst toString = Object.prototype.toString;\n\nfunction isAnyArray(object) {\n  return toString.call(object).endsWith('Array]');\n}\n\nmodule.exports = isAnyArray;\n","/**\n * @constant __ placeholder used when parameters are skipped\n */\nexport const __: Placeholder =\n  typeof Symbol === 'function' ? Symbol('curriable placeholder') : 0xedd1;\n\n/**\n * @function recursiveCurry\n *\n * @description\n * recursively curry over the arguments until all have been resolved\n *\n * @param fn the function to curry\n * @param arity the length of the function to curry until\n * @param args the existing arguments\n * @returns the result of the function call\n */\nexport const recursiveCurry: Function = (\n  fn: Function,\n  arity: number,\n  args: any[],\n): Function =>\n  function () {\n    const length: number = args.length;\n\n    const newArgs: IArguments = arguments;\n    const newArgsLength: number = newArgs.length;\n\n    const combined: any[] = [];\n\n    let newArgsIndex: number = 0;\n    let remaining: number = arity;\n    let value: any;\n\n    if (length) {\n      for (let index: number = 0; index < length; index++) {\n        combined[index] = value =\n          args[index] === __ && newArgsIndex < newArgsLength\n            ? newArgs[newArgsIndex++]\n            : args[index];\n\n        if (value !== __) {\n          --remaining;\n        }\n      }\n    }\n\n    if (newArgsIndex < newArgsLength) {\n      for (; newArgsIndex < newArgsLength; newArgsIndex++) {\n        combined[combined.length] = value = newArgs[newArgsIndex];\n\n        if (value !== __ && newArgsIndex < arity) {\n          --remaining;\n        }\n      }\n    }\n\n    return remaining > 0\n      ? recursiveCurry(fn, arity, combined)\n      : fn.apply(this, combined);\n  };\n","// utils\nimport { __, recursiveCurry } from './utils';\n\nexport { __ };\n\n/**\n * @function curry\n *\n * @description\n * get the method passed as a curriable method based on its parameters\n *\n * @param fn the method to make curriable\n * @param arity the arity of the curried method\n * @returns the fn passed as a curried function\n */\nexport const curry = (\n  fn: Function,\n  arity: number = fn.length,\n): CurriedFunction => {\n  const curried = recursiveCurry(fn, arity, []);\n\n  curried.arity = arity;\n  curried.fn = fn;\n\n  return curried;\n};\n\ncurry.__ = __;\n\n/**\n * @function uncurry\n *\n * @description\n * return a function that is the non-curried version of the fn passed\n *\n * @param curried the curried function to uncurry\n * @returns the original fn\n */\nexport const uncurry = (curried: CurriedFunction): Function => curried.fn;\n\ncurry.uncurry = uncurry;\n\nexport default curry;\n","'use strict';\n\nmodule.exports = require('./matrix').Matrix;\nmodule.exports.Decompositions = module.exports.DC = require('./decompositions');\n","'use strict';\n\nexports.array = require('./array');\nexports.matrix = require('./matrix');\n","'use strict';\n\nvar Matrix = require('./matrix');\n\n/**\n * @private\n * Check that a row index is not out of bounds\n * @param {Matrix} matrix\n * @param {number} index\n * @param {boolean} [outer]\n */\nexports.checkRowIndex = function checkRowIndex(matrix, index, outer) {\n    var max = outer ? matrix.rows : matrix.rows - 1;\n    if (index < 0 || index > max) {\n        throw new RangeError('Row index out of range');\n    }\n};\n\n/**\n * @private\n * Check that a column index is not out of bounds\n * @param {Matrix} matrix\n * @param {number} index\n * @param {boolean} [outer]\n */\nexports.checkColumnIndex = function checkColumnIndex(matrix, index, outer) {\n    var max = outer ? matrix.columns : matrix.columns - 1;\n    if (index < 0 || index > max) {\n        throw new RangeError('Column index out of range');\n    }\n};\n\n/**\n * @private\n * Check that the provided vector is an array with the right length\n * @param {Matrix} matrix\n * @param {Array|Matrix} vector\n * @return {Array}\n * @throws {RangeError}\n */\nexports.checkRowVector = function checkRowVector(matrix, vector) {\n    if (vector.to1DArray) {\n        vector = vector.to1DArray();\n    }\n    if (vector.length !== matrix.columns) {\n        throw new RangeError('vector size must be the same as the number of columns');\n    }\n    return vector;\n};\n\n/**\n * @private\n * Check that the provided vector is an array with the right length\n * @param {Matrix} matrix\n * @param {Array|Matrix} vector\n * @return {Array}\n * @throws {RangeError}\n */\nexports.checkColumnVector = function checkColumnVector(matrix, vector) {\n    if (vector.to1DArray) {\n        vector = vector.to1DArray();\n    }\n    if (vector.length !== matrix.rows) {\n        throw new RangeError('vector size must be the same as the number of rows');\n    }\n    return vector;\n};\n\nexports.checkIndices = function checkIndices(matrix, rowIndices, columnIndices) {\n    var rowOut = rowIndices.some(r => {\n        return r < 0 || r >= matrix.rows;\n\n    });\n\n    var columnOut = columnIndices.some(c => {\n        return c < 0 || c >= matrix.columns;\n    });\n\n    if (rowOut || columnOut) {\n        throw new RangeError('Indices are out of range');\n    }\n\n    if (typeof rowIndices !== 'object' || typeof columnIndices !== 'object') {\n        throw new TypeError('Unexpected type for row/column indices');\n    }\n    if (!Array.isArray(rowIndices)) rowIndices = Array.from(rowIndices);\n    if (!Array.isArray(columnIndices)) rowIndices = Array.from(columnIndices);\n\n    return {\n        row: rowIndices,\n        column: columnIndices\n    };\n};\n\nexports.checkRange = function checkRange(matrix, startRow, endRow, startColumn, endColumn) {\n    if (arguments.length !== 5) throw new TypeError('Invalid argument type');\n    var notAllNumbers = Array.from(arguments).slice(1).some(function (arg) {\n        return typeof arg !== 'number';\n    });\n    if (notAllNumbers) throw new TypeError('Invalid argument type');\n    if (startRow > endRow || startColumn > endColumn || startRow < 0 || startRow >= matrix.rows || endRow < 0 || endRow >= matrix.rows || startColumn < 0 || startColumn >= matrix.columns || endColumn < 0 || endColumn >= matrix.columns) {\n        throw new RangeError('Submatrix indices are out of range');\n    }\n};\n\nexports.getRange = function getRange(from, to) {\n    var arr = new Array(to - from + 1);\n    for (var i = 0; i < arr.length; i++) {\n        arr[i] = from + i;\n    }\n    return arr;\n};\n\nexports.sumByRow = function sumByRow(matrix) {\n    var sum = Matrix.Matrix.zeros(matrix.rows, 1);\n    for (var i = 0; i < matrix.rows; ++i) {\n        for (var j = 0; j < matrix.columns; ++j) {\n            sum.set(i, 0, sum.get(i, 0) + matrix.get(i, j));\n        }\n    }\n    return sum;\n};\n\nexports.sumByColumn = function sumByColumn(matrix) {\n    var sum = Matrix.Matrix.zeros(1, matrix.columns);\n    for (var i = 0; i < matrix.rows; ++i) {\n        for (var j = 0; j < matrix.columns; ++j) {\n            sum.set(0, j, sum.get(0, j) + matrix.get(i, j));\n        }\n    }\n    return sum;\n};\n\nexports.sumAll = function sumAll(matrix) {\n    var v = 0;\n    for (var i = 0; i < matrix.rows; i++) {\n        for (var j = 0; j < matrix.columns; j++) {\n            v += matrix.get(i, j);\n        }\n    }\n    return v;\n};\n","'use strict';\n\nexports.hypotenuse = function hypotenuse(a, b) {\n    var r;\n    if (Math.abs(a) > Math.abs(b)) {\n        r = b / a;\n        return Math.abs(a) * Math.sqrt(1 + r * r);\n    }\n    if (b !== 0) {\n        r = a / b;\n        return Math.abs(b) * Math.sqrt(1 + r * r);\n    }\n    return 0;\n};\n\n// For use in the decomposition algorithms. With big matrices, access time is\n// too long on elements from array subclass\n// todo check when it is fixed in v8\n// http://jsperf.com/access-and-write-array-subclass\nexports.getEmpty2DArray = function (rows, columns) {\n    var array = new Array(rows);\n    for (var i = 0; i < rows; i++) {\n        array[i] = new Array(columns);\n    }\n    return array;\n};\n\nexports.getFilled2DArray = function (rows, columns, value) {\n    var array = new Array(rows);\n    for (var i = 0; i < rows; i++) {\n        array[i] = new Array(columns);\n        for (var j = 0; j < columns; j++) {\n            array[i][j] = value;\n        }\n    }\n    return array;\n};\n","// external dependencies\nimport fastStringify from 'fast-stringify'; // constants\n\nimport { CIRCULAR_VALUE, HAS_BUFFER_FROM_SUPPORT, HAS_UINT16ARRAY_SUPPORT, HTML_ELEMENT_REGEXP, ITERABLE_TAGS, OBJECT_CLASS_MAP, OBJECT_CLASS_TYPE_MAP, PRIMITIVE_TAGS, SELF_TAGS, SVG_ELEMENT_REGEXP, TOSTRING_TAGS, TYPEDARRAY_TAGS, UNPARSEABLE_TAGS } from './constants';\nvar charCodeAt = String.prototype.charCodeAt;\nvar toString = Object.prototype.toString;\nvar keys = Object.keys;\n/**\n * @function getFunctionName\n *\n * @description\n * get the name of the function based on a series of fallback attempts\n *\n * @param {function} fn the function to test\n * @returns {string} the function name\n */\n\nexport var getFunctionName = function getFunctionName(fn) {\n  return fn.name || (fn.toString().match(/^\\s*function\\s*([^\\(]*)/i) || [])[1] || 'anonymous';\n};\n/**\n * @function getCircularValue\n *\n * @description\n * get the value used when circular references are found\n *\n * @returns {string} the value for stringification\n */\n\nexport var getCircularValue = function getCircularValue() {\n  return CIRCULAR_VALUE;\n};\n/**\n * @function getIntegerHashValue\n *\n * @description\n * based on string passed, get the integer hash value\n * through bitwise operation (based on spinoff of dbj2\n * with enhancements for reduced collisions)\n *\n * @param {string} string the string to get the hash value for\n * @returns {number} the hash value\n */\n\nexport var getIntegerHashValue = function getIntegerHashValue(string) {\n  var index = string.length,\n      hashA = 5381,\n      hashB = 52711,\n      charCode;\n\n  while (index--) {\n    charCode = charCodeAt.call(string, index);\n    hashA = hashA * 33 ^ charCode;\n    hashB = hashB * 33 ^ charCode;\n  }\n\n  return (hashA >>> 0) * 4096 + (hashB >>> 0);\n};\n/**\n * @function getSortedEvent\n *\n * @description\n * get the event object sorted by its properties\n *\n * @param {boolean} bubbles does the event bubble up through the DOM\n * @param {function} alias to stopPropagation\n * @param {boolean} cancelable is the event cancelable\n * @param {boolean} composed can the event bubble across the boundary to shadow DOM\n * @param {HTMLElement} [currentTarget] registered target for the event\n * @param {boolean} defaultPrevented has preventDefault been called on the event\n * @param {string} eventPhase the phase of the event flow being processed\n * @param {boolean} isTrusted was the event initiated by the browser\n * @param {HTMLElement} [target] the target with which the event was dispatched\n * @param {number} timeStamp the time at which the event was created\n * @param {string} type the name of the event\n * @returns {Object} the event object with all properties sorted\n */\n\nexport var getSortedEvent = function getSortedEvent(_ref) {\n  var bubbles = _ref.bubbles,\n      cancelBubble = _ref.cancelBubble,\n      cancelable = _ref.cancelable,\n      composed = _ref.composed,\n      currentTarget = _ref.currentTarget,\n      defaultPrevented = _ref.defaultPrevented,\n      eventPhase = _ref.eventPhase,\n      isTrusted = _ref.isTrusted,\n      returnValue = _ref.returnValue,\n      target = _ref.target,\n      type = _ref.type;\n  return {\n    bubbles: bubbles,\n    cancelBubble: cancelBubble,\n    cancelable: cancelable,\n    composed: composed,\n    currentTarget: currentTarget,\n    defaultPrevented: defaultPrevented,\n    eventPhase: eventPhase,\n    isTrusted: isTrusted,\n    returnValue: returnValue,\n    target: target,\n    type: type\n  };\n};\n/**\n * @function shouldSort\n *\n * @description\n * get the sort result based on the two values to compare\n *\n * @param {string} valueA the first value to compare\n * @param {string} valueB the second value to compare\n * @returns {boolean} should the value be sorted\n */\n\nexport var shouldSort = function shouldSort(valueA, valueB) {\n  return valueA > valueB;\n};\n/**\n * @function shouldSortPair\n *\n * @description\n * get the sort result based on the two pairs to compare\n *\n * @param {Object} pairA the first pair to compare\n * @param {Object} pairB the second pair to compare\n * @returns {boolean} should the value be sorted\n */\n\nexport var shouldSortPair = function shouldSortPair(pairA, pairB) {\n  return shouldSort(pairA[0], pairB[0]);\n};\n/**\n * @function getPrefixedValue\n *\n * @description\n * get the value prefixed by the tag\n *\n * @param {string} tag the object tag\n * @param {any} value the value to stringify\n * @returns {string} the prefixed stringified value\n */\n\nexport var getPrefixedValue = function getPrefixedValue(tag, value) {\n  return tag + \"|\" + value;\n};\n/**\n * @function sort\n *\n * @description\n * sort the array based on the fn passed\n *\n * @param {Array<any>} array the array to sort\n * @param {function} fn the sorting function\n * @returns {Array<any>} the sorted array\n */\n\nexport var sort = function sort(array, fn) {\n  var subIndex, value;\n\n  for (var index = 0; index < array.length; index++) {\n    value = array[index];\n\n    for (subIndex = index - 1; ~subIndex && fn(array[subIndex], value); subIndex--) {\n      array[subIndex + 1] = array[subIndex];\n    }\n\n    array[subIndex + 1] = value;\n  }\n\n  return array;\n};\n/**\n * @function getIterablePairs\n *\n * @description\n * get the pairs in the iterable for stringification\n *\n * @param {Map|Set} iterable the iterable to get the pairs for\n * @returns {Array<{key: string, value: any}>} the pairs\n */\n\nexport var getSortedIterablePairs = function getSortedIterablePairs(iterable) {\n  var isMap = typeof iterable.get === 'function';\n  var pairs = [];\n  iterable.forEach(function (value, key) {\n    // eslint-disable-next-line no-use-before-define\n    pairs.push(isMap ? [stringify(key), stringify(value)] : [stringify(value)]);\n  });\n  sort(pairs, shouldSortPair);\n  var finalPairs = new Array(iterable.size);\n  var pair;\n\n  for (var index = 0; index < iterable.size; index++) {\n    pair = pairs[index];\n    finalPairs[index] = isMap ? \"[\" + pair[0] + \",\" + pair[1] + \"]\" : pair[0];\n  }\n\n  return getPrefixedValue(getFunctionName(iterable.constructor), \"[\" + finalPairs.join(',') + \"]\");\n};\n/**\n * @function getSortedObject\n *\n * @description\n * get the object with the keys sorted\n *\n * @param {Object} object the object to sort\n * @returns {Object} the sorted object\n */\n\nexport var getSortedObject = function getSortedObject(object) {\n  var objectKeys = sort(keys(object), shouldSort);\n  var newObject = {};\n  var key;\n\n  for (var index = 0; index < objectKeys.length; index++) {\n    key = objectKeys[index];\n    newObject[key] = object[key];\n  }\n\n  return newObject;\n};\n/**\n * @function getStringifiedArrayBufferFallback\n *\n * @description\n * get the string value of the buffer passed based on a Buffer\n *\n * @param {ArrayBuffer} buffer the array buffer to convert\n * @returns {string} the stringified buffer\n */\n\nexport var getStringifiedArrayBufferFallback = function getStringifiedArrayBufferFallback(buffer) {\n  return String.fromCharCode.apply(null, new Uint16Array(buffer));\n};\n/**\n * @function getStringifiedArrayBufferModern\n *\n * @description\n * get the string value of the buffer passed based on a Uint16Array\n *\n * @param {ArrayBuffer} buffer the array buffer to convert\n * @returns {string} the stringified buffer\n */\n\nexport var getStringifiedArrayBufferModern = function getStringifiedArrayBufferModern(buffer) {\n  return Buffer.from(buffer).toString('utf8');\n};\n/**\n * @function getStringifiedArrayBufferNoSupport\n *\n * @description\n * return a placeholder when no arraybuffer support exists\n *\n * @returns {string} the placeholder\n */\n\nexport var getStringifiedArrayBufferNoSupport = function getStringifiedArrayBufferNoSupport() {\n  return '';\n};\n/**\n * @function getStringifiedArrayBuffer\n *\n * @description\n * get the string value of the buffer passed\n *\n * @param {ArrayBuffer} buffer the array buffer to convert\n * @returns {string} the stringified buffer\n */\n\nexport var getStringifiedArrayBuffer = function () {\n  if (HAS_BUFFER_FROM_SUPPORT) {\n    return getStringifiedArrayBufferModern;\n  }\n\n  if (HAS_UINT16ARRAY_SUPPORT) {\n    return getStringifiedArrayBufferFallback;\n  }\n\n  return getStringifiedArrayBufferNoSupport;\n}();\n/**\n * @function getStringifiedDocumentFragment\n *\n * @description\n * build a string based on all the fragment's children\n *\n * @param {DocumentFragment} fragment the fragment to stringify\n * @returns {string} the stringified fragment\n */\n\nexport var getStringifiedDocumentFragment = function getStringifiedDocumentFragment(fragment) {\n  var children = fragment.children;\n  var innerHTML = '';\n\n  for (var index = 0; index < children.length; index++) {\n    innerHTML += children[index].outerHTML;\n  }\n\n  return innerHTML;\n};\n/**\n * @function indexOf\n *\n * @description\n * get the index of the value in the array (faster than native indexOf)\n *\n * @param {Array<any>} array the array to get the index of the value at\n * @param {any} value the value to match\n * @returns {number} the index of the value in array\n */\n\nexport var indexOf = function indexOf(array, value) {\n  for (var index = 0; index < array.length; index++) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n\n  return -1;\n};\n/**\n * @function getNormalizedValue\n *\n * @description\n * get the value normalized for stringification\n *\n * @param {any} value the value to normalize\n * @param {WeakMap|Object} sortedCache the cache of sorted objects\n * @param {string} [passedTag] the previously-calculated tag\n * @returns {any} the normalized value\n */\n\nexport var getNormalizedValue = function getNormalizedValue(value, sortedCache, passedTag) {\n  if (passedTag === void 0) {\n    var type = typeof value;\n\n    if (type === 'string') {\n      return value;\n    }\n\n    if (PRIMITIVE_TAGS[type]) {\n      return getPrefixedValue(type, value);\n    }\n\n    if (value === null) {\n      return getPrefixedValue('null', value);\n    }\n  }\n\n  var tag = passedTag || toString.call(value);\n\n  if (SELF_TAGS[tag]) {\n    return value;\n  }\n\n  if (tag === OBJECT_CLASS_TYPE_MAP.OBJECT) {\n    if (~indexOf(sortedCache, value)) {\n      return CIRCULAR_VALUE;\n    }\n\n    sortedCache.push(value);\n    return getSortedObject(value, sortedCache);\n  }\n\n  if (TOSTRING_TAGS[tag]) {\n    return getPrefixedValue(OBJECT_CLASS_MAP[tag], value.toString());\n  }\n\n  if (ITERABLE_TAGS[tag]) {\n    if (~indexOf(sortedCache, value)) {\n      return CIRCULAR_VALUE;\n    }\n\n    sortedCache.push(value);\n    return getSortedIterablePairs(value);\n  }\n\n  if (tag === OBJECT_CLASS_TYPE_MAP.DATE) {\n    return getPrefixedValue(OBJECT_CLASS_MAP[tag], value.getTime());\n  }\n\n  if (tag === OBJECT_CLASS_TYPE_MAP.ERROR) {\n    return getPrefixedValue(OBJECT_CLASS_MAP[tag], value.stack);\n  }\n\n  if (tag === OBJECT_CLASS_TYPE_MAP.EVENT) {\n    return getSortedEvent(value);\n  }\n\n  if (UNPARSEABLE_TAGS[tag]) {\n    return getPrefixedValue(OBJECT_CLASS_MAP[tag], 'NOT_ENUMERABLE');\n  }\n\n  if (HTML_ELEMENT_REGEXP.test(tag) || SVG_ELEMENT_REGEXP.test(tag)) {\n    return getPrefixedValue(tag.slice(8, -1), value.outerHTML);\n  }\n\n  if (tag === OBJECT_CLASS_TYPE_MAP.DOCUMENTFRAGMENT) {\n    return getPrefixedValue(OBJECT_CLASS_MAP[tag], getStringifiedDocumentFragment(value));\n  }\n\n  if (TYPEDARRAY_TAGS[tag]) {\n    return getPrefixedValue(OBJECT_CLASS_MAP[tag], value.join(','));\n  }\n\n  if (tag === OBJECT_CLASS_TYPE_MAP.ARRAYBUFFER) {\n    return getPrefixedValue(OBJECT_CLASS_MAP[tag], getStringifiedArrayBuffer(value));\n  }\n\n  if (tag === OBJECT_CLASS_TYPE_MAP.DATAVIEW) {\n    return getPrefixedValue(OBJECT_CLASS_MAP[tag], getStringifiedArrayBuffer(value.buffer));\n  }\n\n  return value;\n};\n/**\n * @function replacer\n *\n * @description\n * create the replacer function used for stringification\n *\n * @param {WeakSet|Object} sortedCache the cache to use for sorting objects\n * @returns {function(key: string, value: any)} function getting the normalized value\n */\n\nexport var createReplacer = function createReplacer(sortedCache) {\n  return function (key, value) {\n    return getNormalizedValue(value, sortedCache);\n  };\n};\n/**\n * @function stringify\n *\n * @description\n * stringify the value based on the options passed\n *\n * @param {any} value the value to stringify\n * @returns {string} the stringified value\n */\n\nexport function stringify(value) {\n  if (!value || typeof value !== 'object') {\n    return getNormalizedValue(value);\n  }\n\n  var tag = toString.call(value);\n  return tag === OBJECT_CLASS_TYPE_MAP.DATE || tag === OBJECT_CLASS_TYPE_MAP.REGEXP ? getNormalizedValue(value, void 0, tag) : fastStringify(value, createReplacer([]), null, getCircularValue);\n}","'use strict';\n\nfunction compareNumbers(a, b) {\n    return a - b;\n}\n\n/**\n * Computes the sum of the given values\n * @param {Array} values\n * @returns {number}\n */\nexports.sum = function sum(values) {\n    var sum = 0;\n    for (var i = 0; i < values.length; i++) {\n        sum += values[i];\n    }\n    return sum;\n};\n\n/**\n * Computes the maximum of the given values\n * @param {Array} values\n * @returns {number}\n */\nexports.max = function max(values) {\n    var max = -Infinity;\n    var l = values.length;\n    for (var i = 0; i < l; i++) {\n        if (values[i] > max) max = values[i];\n    }\n    return max;\n};\n\n/**\n * Computes the minimum of the given values\n * @param {Array} values\n * @returns {number}\n */\nexports.min = function min(values) {\n    var min = Infinity;\n    var l = values.length;\n    for (var i = 0; i < l; i++) {\n        if (values[i] < min) min = values[i];\n    }\n    return min;\n};\n\n/**\n * Computes the min and max of the given values\n * @param {Array} values\n * @returns {{min: number, max: number}}\n */\nexports.minMax = function minMax(values) {\n    var min = Infinity;\n    var max = -Infinity;\n    var l = values.length;\n    for (var i = 0; i < l; i++) {\n        if (values[i] < min) min = values[i];\n        if (values[i] > max) max = values[i];\n    }\n    return {\n        min: min,\n        max: max\n    };\n};\n\n/**\n * Computes the arithmetic mean of the given values\n * @param {Array} values\n * @returns {number}\n */\nexports.arithmeticMean = function arithmeticMean(values) {\n    var sum = 0;\n    var l = values.length;\n    for (var i = 0; i < l; i++) {\n        sum += values[i];\n    }\n    return sum / l;\n};\n\n/**\n * {@link arithmeticMean}\n */\nexports.mean = exports.arithmeticMean;\n\n/**\n * Computes the geometric mean of the given values\n * @param {Array} values\n * @returns {number}\n */\nexports.geometricMean = function geometricMean(values) {\n    var mul = 1;\n    var l = values.length;\n    for (var i = 0; i < l; i++) {\n        mul *= values[i];\n    }\n    return Math.pow(mul, 1 / l);\n};\n\n/**\n * Computes the mean of the log of the given values\n * If the return value is exponentiated, it gives the same result as the\n * geometric mean.\n * @param {Array} values\n * @returns {number}\n */\nexports.logMean = function logMean(values) {\n    var lnsum = 0;\n    var l = values.length;\n    for (var i = 0; i < l; i++) {\n        lnsum += Math.log(values[i]);\n    }\n    return lnsum / l;\n};\n\n/**\n * Computes the weighted grand mean for a list of means and sample sizes\n * @param {Array} means - Mean values for each set of samples\n * @param {Array} samples - Number of original values for each set of samples\n * @returns {number}\n */\nexports.grandMean = function grandMean(means, samples) {\n    var sum = 0;\n    var n = 0;\n    var l = means.length;\n    for (var i = 0; i < l; i++) {\n        sum += samples[i] * means[i];\n        n += samples[i];\n    }\n    return sum / n;\n};\n\n/**\n * Computes the truncated mean of the given values using a given percentage\n * @param {Array} values\n * @param {number} percent - The percentage of values to keep (range: [0,1])\n * @param {boolean} [alreadySorted=false]\n * @returns {number}\n */\nexports.truncatedMean = function truncatedMean(values, percent, alreadySorted) {\n    if (alreadySorted === undefined) alreadySorted = false;\n    if (!alreadySorted) {\n        values = values.slice().sort(compareNumbers);\n    }\n    var l = values.length;\n    var k = Math.floor(l * percent);\n    var sum = 0;\n    for (var i = k; i < (l - k); i++) {\n        sum += values[i];\n    }\n    return sum / (l - 2 * k);\n};\n\n/**\n * Computes the harmonic mean of the given values\n * @param {Array} values\n * @returns {number}\n */\nexports.harmonicMean = function harmonicMean(values) {\n    var sum = 0;\n    var l = values.length;\n    for (var i = 0; i < l; i++) {\n        if (values[i] === 0) {\n            throw new RangeError('value at index ' + i + 'is zero');\n        }\n        sum += 1 / values[i];\n    }\n    return l / sum;\n};\n\n/**\n * Computes the contraharmonic mean of the given values\n * @param {Array} values\n * @returns {number}\n */\nexports.contraHarmonicMean = function contraHarmonicMean(values) {\n    var r1 = 0;\n    var r2 = 0;\n    var l = values.length;\n    for (var i = 0; i < l; i++) {\n        r1 += values[i] * values[i];\n        r2 += values[i];\n    }\n    if (r2 < 0) {\n        throw new RangeError('sum of values is negative');\n    }\n    return r1 / r2;\n};\n\n/**\n * Computes the median of the given values\n * @param {Array} values\n * @param {boolean} [alreadySorted=false]\n * @returns {number}\n */\nexports.median = function median(values, alreadySorted) {\n    if (alreadySorted === undefined) alreadySorted = false;\n    if (!alreadySorted) {\n        values = values.slice().sort(compareNumbers);\n    }\n    var l = values.length;\n    var half = Math.floor(l / 2);\n    if (l % 2 === 0) {\n        return (values[half - 1] + values[half]) * 0.5;\n    } else {\n        return values[half];\n    }\n};\n\n/**\n * Computes the variance of the given values\n * @param {Array} values\n * @param {boolean} [unbiased=true] - if true, divide by (n-1); if false, divide by n.\n * @returns {number}\n */\nexports.variance = function variance(values, unbiased) {\n    if (unbiased === undefined) unbiased = true;\n    var theMean = exports.mean(values);\n    var theVariance = 0;\n    var l = values.length;\n\n    for (var i = 0; i < l; i++) {\n        var x = values[i] - theMean;\n        theVariance += x * x;\n    }\n\n    if (unbiased) {\n        return theVariance / (l - 1);\n    } else {\n        return theVariance / l;\n    }\n};\n\n/**\n * Computes the standard deviation of the given values\n * @param {Array} values\n * @param {boolean} [unbiased=true] - if true, divide by (n-1); if false, divide by n.\n * @returns {number}\n */\nexports.standardDeviation = function standardDeviation(values, unbiased) {\n    return Math.sqrt(exports.variance(values, unbiased));\n};\n\nexports.standardError = function standardError(values) {\n    return exports.standardDeviation(values) / Math.sqrt(values.length);\n};\n\nexports.quartiles = function quartiles(values, alreadySorted) {\n    if (typeof(alreadySorted) === 'undefined') alreadySorted = false;\n    if (!alreadySorted) {\n        values = values.slice();\n        values.sort(compareNumbers);\n    }\n\n    var quart = values.length / 4;\n    var q1 = values[Math.ceil(quart) - 1];\n    var q2 = exports.median(values, true);\n    var q3 = values[Math.ceil(quart * 3) - 1];\n\n    return {q1: q1, q2: q2, q3: q3};\n};\n\nexports.pooledStandardDeviation = function pooledStandardDeviation(samples, unbiased) {\n    return Math.sqrt(exports.pooledVariance(samples, unbiased));\n};\n\nexports.pooledVariance = function pooledVariance(samples, unbiased) {\n    if (typeof(unbiased) === 'undefined') unbiased = true;\n    var sum = 0;\n    var length = 0, l = samples.length;\n    for (var i = 0; i < l; i++) {\n        var values = samples[i];\n        var vari = exports.variance(values);\n\n        sum += (values.length - 1) * vari;\n\n        if (unbiased)\n            length += values.length - 1;\n        else\n            length += values.length;\n    }\n    return sum / length;\n};\n\nexports.mode = function mode(values) {\n    var l = values.length,\n        itemCount = new Array(l),\n        i;\n    for (i = 0; i < l; i++) {\n        itemCount[i] = 0;\n    }\n    var itemArray = new Array(l);\n    var count = 0;\n\n    for (i = 0; i < l; i++) {\n        var index = itemArray.indexOf(values[i]);\n        if (index >= 0)\n            itemCount[index]++;\n        else {\n            itemArray[count] = values[i];\n            itemCount[count] = 1;\n            count++;\n        }\n    }\n\n    var maxValue = 0, maxIndex = 0;\n    for (i = 0; i < count; i++) {\n        if (itemCount[i] > maxValue) {\n            maxValue = itemCount[i];\n            maxIndex = i;\n        }\n    }\n\n    return itemArray[maxIndex];\n};\n\nexports.covariance = function covariance(vector1, vector2, unbiased) {\n    if (typeof(unbiased) === 'undefined') unbiased = true;\n    var mean1 = exports.mean(vector1);\n    var mean2 = exports.mean(vector2);\n\n    if (vector1.length !== vector2.length)\n        throw \"Vectors do not have the same dimensions\";\n\n    var cov = 0, l = vector1.length;\n    for (var i = 0; i < l; i++) {\n        var x = vector1[i] - mean1;\n        var y = vector2[i] - mean2;\n        cov += x * y;\n    }\n\n    if (unbiased)\n        return cov / (l - 1);\n    else\n        return cov / l;\n};\n\nexports.skewness = function skewness(values, unbiased) {\n    if (typeof(unbiased) === 'undefined') unbiased = true;\n    var theMean = exports.mean(values);\n\n    var s2 = 0, s3 = 0, l = values.length;\n    for (var i = 0; i < l; i++) {\n        var dev = values[i] - theMean;\n        s2 += dev * dev;\n        s3 += dev * dev * dev;\n    }\n    var m2 = s2 / l;\n    var m3 = s3 / l;\n\n    var g = m3 / (Math.pow(m2, 3 / 2.0));\n    if (unbiased) {\n        var a = Math.sqrt(l * (l - 1));\n        var b = l - 2;\n        return (a / b) * g;\n    }\n    else {\n        return g;\n    }\n};\n\nexports.kurtosis = function kurtosis(values, unbiased) {\n    if (typeof(unbiased) === 'undefined') unbiased = true;\n    var theMean = exports.mean(values);\n    var n = values.length, s2 = 0, s4 = 0;\n\n    for (var i = 0; i < n; i++) {\n        var dev = values[i] - theMean;\n        s2 += dev * dev;\n        s4 += dev * dev * dev * dev;\n    }\n    var m2 = s2 / n;\n    var m4 = s4 / n;\n\n    if (unbiased) {\n        var v = s2 / (n - 1);\n        var a = (n * (n + 1)) / ((n - 1) * (n - 2) * (n - 3));\n        var b = s4 / (v * v);\n        var c = ((n - 1) * (n - 1)) / ((n - 2) * (n - 3));\n\n        return a * b - 3 * c;\n    }\n    else {\n        return m4 / (m2 * m2) - 3;\n    }\n};\n\nexports.entropy = function entropy(values, eps) {\n    if (typeof(eps) === 'undefined') eps = 0;\n    var sum = 0, l = values.length;\n    for (var i = 0; i < l; i++)\n        sum += values[i] * Math.log(values[i] + eps);\n    return -sum;\n};\n\nexports.weightedMean = function weightedMean(values, weights) {\n    var sum = 0, l = values.length;\n    for (var i = 0; i < l; i++)\n        sum += values[i] * weights[i];\n    return sum;\n};\n\nexports.weightedStandardDeviation = function weightedStandardDeviation(values, weights) {\n    return Math.sqrt(exports.weightedVariance(values, weights));\n};\n\nexports.weightedVariance = function weightedVariance(values, weights) {\n    var theMean = exports.weightedMean(values, weights);\n    var vari = 0, l = values.length;\n    var a = 0, b = 0;\n\n    for (var i = 0; i < l; i++) {\n        var z = values[i] - theMean;\n        var w = weights[i];\n\n        vari += w * (z * z);\n        b += w;\n        a += w * w;\n    }\n\n    return vari * (b / (b * b - a));\n};\n\nexports.center = function center(values, inPlace) {\n    if (typeof(inPlace) === 'undefined') inPlace = false;\n\n    var result = values;\n    if (!inPlace)\n        result = values.slice();\n\n    var theMean = exports.mean(result), l = result.length;\n    for (var i = 0; i < l; i++)\n        result[i] -= theMean;\n};\n\nexports.standardize = function standardize(values, standardDev, inPlace) {\n    if (typeof(standardDev) === 'undefined') standardDev = exports.standardDeviation(values);\n    if (typeof(inPlace) === 'undefined') inPlace = false;\n    var l = values.length;\n    var result = inPlace ? values : new Array(l);\n    for (var i = 0; i < l; i++)\n        result[i] = values[i] / standardDev;\n    return result;\n};\n\nexports.cumulativeSum = function cumulativeSum(array) {\n    var l = array.length;\n    var result = new Array(l);\n    result[0] = array[0];\n    for (var i = 1; i < l; i++)\n        result[i] = result[i - 1] + array[i];\n    return result;\n};\n","'use strict';\n\nvar LM = require('ml-curve-fitting');\nvar math = LM.Matrix.algebra;\nvar Matrix = require('ml-matrix');\n\n/**\n * This function calculates the spectrum as a sum of lorentzian functions. The Lorentzian\n * parameters are divided in 3 batches. 1st: centers; 2nd: heights; 3th: widths;\n * @param t Ordinate values\n * @param p Lorentzian parameters\n * @param c Constant parameters(Not used)\n * @returns {*}\n */\nfunction sumOfLorentzians(t,p,c){\n    var nL = p.length/3,factor,i, j,p2, cols = t.rows;\n    var result = Matrix.zeros(t.length,1);\n\n    for(i=0;i<nL;i++){\n        p2 = Math.pow(p[i+nL*2][0]/2,2);\n        factor = p[i+nL][0]*p2;\n        for(j=0;j<cols;j++){\n            result[j][0]+=factor/(Math.pow(t[j][0]-p[i][0],2)+p2);\n        }\n    }\n    return result;\n}\n\n/**\n * This function calculates the spectrum as a sum of gaussian functions. The Gaussian\n * parameters are divided in 3 batches. 1st: centers; 2nd: height; 3th: std's;\n * @param t Ordinate values\n * @param p Gaussian parameters\n * @param c Constant parameters(Not used)\n * @returns {*}\n */\nfunction sumOfGaussians(t,p,c){\n    var nL = p.length/3,factor,i, j, cols = t.rows;\n    var result = Matrix.zeros(t.length,1);\n\n    for(i=0;i<nL;i++){\n        factor = p[i+nL*2][0]*p[i+nL*2][0]/2;\n        for(j=0;j<cols;j++){\n            result[j][0]+=p[i+nL][0]*Math.exp(-(t[i][0]-p[i][0])*(t[i][0]-p[i][0])/factor);\n        }\n    }\n    return result;\n}\n/**\n * Single 4 parameter lorentzian function\n * @param t Ordinate values\n * @param p Lorentzian parameters\n * @param c Constant parameters(Not used)\n * @returns {*}\n */\nfunction singleLorentzian(t,p,c){\n    var factor = p[1][0]*Math.pow(p[2][0]/2,2);\n    var rows = t.rows;\n    var result = new Matrix(t.rows, t.columns);\n    for(var i=0;i<rows;i++){\n        result[i][0]=factor/(Math.pow(t[i][0]-p[0][0],2)+Math.pow(p[2][0]/2,2));\n    }\n    return result;\n}\n\n/**\n * Single 3 parameter gaussian function\n * @param t Ordinate values\n * @param p Gaussian parameters [mean, height, std]\n * @param c Constant parameters(Not used)\n * @returns {*}\n */\nfunction singleGaussian(t,p,c){\n    var factor2 = p[2][0]*p[2][0]/2;\n    var rows = t.rows;\n    var result = new Matrix(t.rows, t.columns);\n    for(var i=0;i<rows;i++){\n        result[i][0]=p[1][0]*Math.exp(-(t[i][0]-p[0][0])*(t[i][0]-p[0][0])/factor2);\n    }\n    return result;\n}\n\n/**\n * * Fits a set of points to a Lorentzian function. Returns the center of the peak, the width at half height, and the height of the signal.\n * @param data,[y]\n * @returns {*[]}\n */\nfunction optimizeSingleLorentzian(xy, peak, opts) {\n    opts = opts || {};\n    var xy2 = parseData(xy, opts.percentage||0);\n\n    if(xy2===null||xy2[0].rows<3){\n        return null; //Cannot run an optimization with less than 3 points\n    }\n\n    var t = xy2[0];\n    var y_data = xy2[1];\n    var maxY = xy2[2];\n    var nbPoints = t.rows, i;\n\n    var weight = [nbPoints / Math.sqrt(y_data.dot(y_data))];\n\n    var opts=Object.create(opts.LMOptions || [  3,    100, 1e-3, 1e-3, 1e-3, 1e-2, 1e-2,    11,    9,        1 ]);\n    //var opts = [  3,    100, 1e-3, 1e-3, 1e-3, 1e-2, 1e-2,    11,    9,        1 ];\n    var consts = [ ];\n    var dt = Math.abs(t[0][0]-t[1][0]);// optional vector of constants\n    var dx = new Matrix([[-dt/10000],[-1e-3],[-dt/10000]]);//-Math.abs(t[0][0]-t[1][0])/100;\n    var p_init = new Matrix([[peak.x],[1],[peak.width]]);\n    var p_min = new Matrix([[peak.x-dt],[0.75],[peak.width/4]]);\n    var p_max = new Matrix([[peak.x+dt],[1.25],[peak.width*4]]);\n\n    var p_fit = LM.optimize(singleLorentzian,p_init,t,y_data,weight,dx,p_min,p_max,consts,opts);\n\n\n    p_fit = p_fit.p;\n    return [p_fit[0],[p_fit[1][0]*maxY],p_fit[2]];\n\n}\n\n/**\n * Fits a set of points to a gaussian bell. Returns the mean of the peak, the std and the height of the signal.\n * @param data,[y]\n * @returns {*[]}\n */\nfunction optimizeSingleGaussian(xy, peak, opts) {\n    opts = opts || {};\n    var xy2 = parseData(xy, opts.percentage||0);\n\n    if(xy2===null||xy2[0].rows<3){\n        return null; //Cannot run an optimization with less than 3 points\n    }\n\n    var t = xy2[0];\n    var y_data = xy2[1];\n    var maxY = xy2[2];\n\n    var nbPoints = t.rows, i;\n\n\n\n    var weight = [nbPoints / Math.sqrt(y_data.dot(y_data))];\n\n    var opts=Object.create(opts.LMOptions || [  3,    100, 1e-3, 1e-3, 1e-3, 1e-2, 1e-2,    11,    9,        1 ]);\n    //var opts = [  3,    100, 1e-3, 1e-3, 1e-3, 1e-2, 1e-2,    11,    9,        1 ];\n    var consts = [ ];                         // optional vector of constants\n    var dt = Math.abs(t[0][0]-t[1][0]);\n    var dx = new Matrix([[-dt/10000],[-1e-3],[-dt/10000]]);//-Math.abs(t[0][0]-t[1][0])/100;\n\n    var dx = new Matrix([[-Math.abs(t[0][0]-t[1][0])/1000],[-1e-3],[-peak.width/1000]]);\n    var p_init = new Matrix([[peak.x],[1],[peak.width]]);\n    var p_min = new Matrix([[peak.x-dt],[0.75],[peak.width/4]]);\n    var p_max = new Matrix([[peak.x+dt],[1.25],[peak.width*4]]);\n    //var p_min = new Matrix([[peak.x-peak.width/4],[0.75],[peak.width/3]]);\n    //var p_max = new Matrix([[peak.x+peak.width/4],[1.25],[peak.width*3]]);\n\n    var p_fit = LM.optimize(singleGaussian,p_init,t,y_data,weight,dx,p_min,p_max,consts,opts);\n    p_fit = p_fit.p;\n    return [p_fit[0],[p_fit[1][0]*maxY],p_fit[2]];\n}\n\n/*\n peaks on group should sorted\n */\nfunction optimizeLorentzianTrain(xy, group, opts){\n    var xy2 = parseData(xy);\n    //console.log(xy2[0].rows);\n    if(xy2===null||xy2[0].rows<3){\n        return null; //Cannot run an optimization with less than 3 points\n    }\n\n    var t = xy2[0];\n    var y_data = xy2[1];\n    var maxY = xy2[2];\n    var currentIndex = 0;\n    var nbPoints = t.length;\n    var nextX;\n    var tI, yI, maxY;\n    var result=[], current;\n    for(var i=0; i<group.length;i++){\n        nextX = group[i].x-group[i].width*1.5;\n        //console.log(group[i]);\n        while(t[currentIndex++]<nextX&&currentIndex<nbPoints);\n        nextX = group[i].x+group[i].width*1.5;\n        tI = [];\n        yI = [];\n        while(t[currentIndex]<=nextX&&currentIndex<nbPoints){\n            tI.push(t[currentIndex][0]);\n            yI.push(y_data[currentIndex][0]*maxY);\n            currentIndex++;\n        }\n\n        current=optimizeSingleLorentzian([tI, yI], group[i], opts);\n        if(current){\n            result.push({\"x\":current[0][0],\"y\":current[1][0],\"width\":current[2][0],\"opt\":true});\n        }\n        else{\n            result.push({\"x\":group[i].x,\"y\":group[i].y,\"width\":group[i].width,\"opt\":false});\n        }\n    }\n\n    return result;\n\n}\n\nfunction optimizeGaussianTrain(xy, group, opts){\n    var xy2 = parseData(xy);\n    //console.log(xy2[0].rows);\n    if(xy2===null||xy2[0].rows<3){\n        return null; //Cannot run an optimization with less than 3 points\n    }\n\n    var t = xy2[0];\n    var y_data = xy2[1];\n    var maxY = xy2[2];\n    var currentIndex = 0;\n    var nbPoints = t.length;\n    var nextX;\n    var tI, yI, maxY;\n    var result=[], current;\n    for(var i=0; i<group.length;i++){\n        nextX = group[i].x-group[i].width*1.5;\n        //console.log(group[i]);\n        while(t[currentIndex++]<nextX&&currentIndex<nbPoints);\n        nextX = group[i].x+group[i].width*1.5;\n        tI = [];\n        yI = [];\n        while(t[currentIndex]<=nextX&&currentIndex<nbPoints){\n            tI.push(t[currentIndex][0]);\n            yI.push(y_data[currentIndex][0]*maxY);\n            currentIndex++;\n        }\n\n        current=optimizeSingleGaussian([tI, yI], group[i], opts);\n        if(current){\n            result.push({\"x\":current[0][0],\"y\":current[1][0],\"width\":current[2][0],\"opt\":true});\n        }\n        else{\n            result.push({\"x\":group[i].x,\"y\":group[i].y,\"width\":group[i].width,\"opt\":false});\n        }\n    }\n\n    return result;\n}\n\n\n\n/**\n *\n * @param xy A two column matrix containing the x and y data to be fitted\n * @param group A set of initial lorentzian parameters to be optimized [center, heigth, half_width_at_half_height]\n * @returns {Array} A set of final lorentzian parameters [center, heigth, hwhh*2]\n */\nfunction optimizeLorentzianSum(xy, group, opts){\n    var xy2 = parseData(xy);\n\n    if(xy2===null||xy2[0].rows<3){\n        return null; //Cannot run an optimization with less than 3 points\n    }\n\n    var t = xy2[0];\n    var y_data = xy2[1];\n    var maxY = xy2[2];\n    var nbPoints = t.rows, i;\n\n    var weight = [nbPoints / math.sqrt(y_data.dot(y_data))];\n    var opts=Object.create(opts || [  3,    100, 1e-3, 1e-3, 1e-3, 1e-2, 1e-2, 11, 9, 1 ]);\n    var consts = [ ];// optional vector of constants\n\n    var nL = group.length;\n    var p_init = new Matrix(nL*3,1);\n    var p_min =  new Matrix(nL*3,1);\n    var p_max =  new Matrix(nL*3,1);\n    var dx = new Matrix(nL*3,1);\n    var dt = Math.abs(t[0][0]-t[1][0]);\n    for( i=0;i<nL;i++){\n        p_init[i][0] = group[i].x;\n        p_init[i+nL][0] = 1;\n        p_init[i+2*nL][0] = group[i].width;\n\n        p_min[i][0] = group[i].x-dt;//-group[i].width/4;\n        p_min[i+nL][0] = 0;\n        p_min[i+2*nL][0] = group[i].width/4;\n\n        p_max[i][0] = group[i].x+dt;//+group[i].width/4;\n        p_max[i+nL][0] = 1.5;\n        p_max[i+2*nL][0] = group[i].width*4;\n\n        dx[i][0] = -dt/1000;\n        dx[i+nL][0] = -1e-3;\n        dx[i+2*nL][0] = -dt/1000;\n    }\n\n    var dx = -Math.abs(t[0][0]-t[1][0])/10000;\n    var p_fit = LM.optimize(sumOfLorentzians, p_init, t, y_data, weight, dx, p_min, p_max, consts, opts);\n    p_fit=p_fit.p;\n    //Put back the result in the correct format\n    var result = new Array(nL);\n    for( i=0;i<nL;i++){\n        result[i]=[p_fit[i],[p_fit[i+nL][0]*maxY],p_fit[i+2*nL]];\n    }\n\n    return result;\n\n}\n\n/**\n *\n * @param xy A two column matrix containing the x and y data to be fitted\n * @param group A set of initial lorentzian parameters to be optimized [center, heigth, half_width_at_half_height]\n * @returns {Array} A set of final lorentzian parameters [center, heigth, hwhh*2]\n */\nfunction optimizeGaussianSum(xy, group, opts){\n    var xy2 = parseData(xy);\n\n    if(xy2===null||xy2[0].rows<3){\n        return null; //Cannot run an optimization with less than 3 points\n    }\n\n    var t = xy2[0];\n    var y_data = xy2[1];\n    var maxY = xy2[2];\n    var nbPoints = t.rows,i;\n\n    var weight = new Matrix(nbPoints,1);//[nbPoints / math.sqrt(y_data.dot(y_data))];\n    var k = nbPoints / math.sqrt(y_data.dot(y_data));\n    for(i=0;i<nbPoints;i++){\n        weight[i][0]=k;///(y_data[i][0]);\n        //weight[i][0]=k*(2-y_data[i][0]);\n    }\n\n    var opts=Object.create(opts || [  3,    100, 1e-3, 1e-3, 1e-3, 1e-2, 1e-2,    11,    9,        2 ]);\n    //var opts=[  3,    100, 1e-5, 1e-6, 1e-6, 1e-6, 1e-6,    11,    9,        1 ];\n    var consts = [ ];// optional vector of constants\n\n    var nL = group.length;\n    var p_init = new Matrix(nL*3,1);\n    var p_min =  new Matrix(nL*3,1);\n    var p_max =  new Matrix(nL*3,1);\n    var dx = new Matrix(nL*3,1);\n    var dt = Math.abs(t[0][0]-t[1][0]);\n    for( i=0;i<nL;i++){\n        p_init[i][0] = group[i].x;\n        p_init[i+nL][0] = group[i].y/maxY;\n        p_init[i+2*nL][0] = group[i].width;\n\n        p_min[i][0] = group[i].x-dt;\n        p_min[i+nL][0] = group[i].y*0.8/maxY;\n        p_min[i+2*nL][0] = group[i].width/2;\n\n        p_max[i][0] = group[i].x+dt;\n        p_max[i+nL][0] = group[i].y*1.2/maxY;\n        p_max[i+2*nL][0] = group[i].width*2;\n\n        dx[i][0] = -dt/1000;\n        dx[i+nL][0] = -1e-3;\n        dx[i+2*nL][0] = -dt/1000;\n    }\n    //console.log(t);\n    var p_fit = LM.optimize(sumOfLorentzians,p_init,t,y_data,weight,dx,p_min,p_max,consts,opts);\n    p_fit = p_fit.p;\n    //Put back the result in the correct format\n    var result = new Array(nL);\n    for( i=0;i<nL;i++){\n        result[i]=[p_fit[i],[p_fit[i+nL][0]*maxY],p_fit[i+2*nL]];\n    }\n\n    return result;\n\n}\n/**\n *\n * Converts the given input to the required x, y column matrices. y data is normalized to max(y)=1\n * @param xy\n * @returns {*[]}\n */\nfunction parseData(xy, threshold){\n    var nbSeries = xy.length;\n    var t = null;\n    var y_data = null, x,y;\n    var maxY = 0, i,j;\n\n    if(nbSeries==2){\n        //Looks like row wise matrix [x,y]\n        var nbPoints = xy[0].length;\n        //if(nbPoints<3)\n        //    throw new Exception(nbPoints);\n        //else{\n        t = new Array(nbPoints);//new Matrix(nbPoints,1);\n        y_data = new Array(nbPoints);//new Matrix(nbPoints,1);\n        x = xy[0];\n        y = xy[1];\n        if(typeof x[0] === \"number\"){\n            for(i=0;i<nbPoints;i++){\n                t[i]=x[i];\n                y_data[i]=y[i];\n                if(y[i]>maxY)\n                    maxY = y[i];\n            }\n        }\n        else{\n            //It is a colum matrix\n            if(typeof x[0] === \"object\"){\n                for(i=0;i<nbPoints;i++){\n                    t[i]=x[i][0];\n                    y_data[i]=y[i][0];\n                    if(y[i][0]>maxY)\n                        maxY = y[i][0];\n                }\n            }\n\n        }\n\n        //}\n    }\n    else{\n        //Looks like a column wise matrix [[x],[y]]\n        var nbPoints = nbSeries;\n        //if(nbPoints<3)\n        //    throw new SizeException(nbPoints);\n        //else {\n        t = new Array(nbPoints);//new Matrix(nbPoints, 1);\n        y_data = new Array(nbPoints);//new Matrix(nbPoints, 1);\n        for (i = 0; i < nbPoints; i++) {\n            t[i] = xy[i][0];\n            y_data[i] = xy[i][1];\n            if(y_data[i]>maxY)\n                maxY = y_data[i];\n        }\n        //}\n    }\n    for (i = 0; i < nbPoints; i++) {\n        y_data[i]/=maxY;\n    }\n    if(threshold){\n        for (i = nbPoints-1; i >=0; i--) {\n            if(y_data[i]<threshold) {\n                y_data.splice(i,1);\n                t.splice(i,1);\n            }\n        }\n    }\n    if(t.length>0)\n        return [(new Matrix([t])).transpose(),(new Matrix([y_data])).transpose(),maxY];\n    return null;\n}\n\nfunction sizeException(nbPoints) {\n    return new RangeError(\"Not enough points to perform the optimization: \"+nbPoints +\"< 3\");\n}\n\nmodule.exports.optimizeSingleLorentzian = optimizeSingleLorentzian;\nmodule.exports.optimizeLorentzianSum = optimizeLorentzianSum;\nmodule.exports.optimizeSingleGaussian = optimizeSingleGaussian;\nmodule.exports.optimizeGaussianSum = optimizeGaussianSum;\nmodule.exports.singleGaussian = singleGaussian;\nmodule.exports.singleLorentzian = singleLorentzian;\nmodule.exports.optimizeGaussianTrain = optimizeGaussianTrain;\nmodule.exports.optimizeLorentzianTrain = optimizeLorentzianTrain;","'use strict';\n\nmodule.exports = abstractMatrix;\n\nvar LuDecomposition = require('./dc/lu');\nvar SvDecomposition = require('./dc/svd');\nvar arrayUtils = require('ml-array-utils');\nvar util = require('./util');\nvar MatrixTransposeView = require('./views/transpose');\nvar MatrixRowView = require('./views/row');\nvar MatrixSubView = require('./views/sub');\nvar MatrixSelectionView = require('./views/selection');\nvar MatrixColumnView = require('./views/column');\nvar MatrixFlipRowView = require('./views/flipRow');\nvar MatrixFlipColumnView = require('./views/flipColumn');\n\nfunction abstractMatrix(superCtor) {\n    if (superCtor === undefined) superCtor = Object;\n\n    /**\n     * Real matrix\n     * @class Matrix\n     * @param {number|Array|Matrix} nRows - Number of rows of the new matrix,\n     * 2D array containing the data or Matrix instance to clone\n     * @param {number} [nColumns] - Number of columns of the new matrix\n     */\n    class Matrix extends superCtor {\n        static get [Symbol.species]() {\n            return this;\n        }\n\n        /**\n         * Constructs a Matrix with the chosen dimensions from a 1D array\n         * @param {number} newRows - Number of rows\n         * @param {number} newColumns - Number of columns\n         * @param {Array} newData - A 1D array containing data for the matrix\n         * @return {Matrix} - The new matrix\n         */\n        static from1DArray(newRows, newColumns, newData) {\n            var length = newRows * newColumns;\n            if (length !== newData.length) {\n                throw new RangeError('Data length does not match given dimensions');\n            }\n            var newMatrix = new this(newRows, newColumns);\n            for (var row = 0; row < newRows; row++) {\n                for (var column = 0; column < newColumns; column++) {\n                    newMatrix.set(row, column, newData[row * newColumns + column]);\n                }\n            }\n            return newMatrix;\n        }\n\n        /**\n         * Creates a row vector, a matrix with only one row.\n         * @param {Array} newData - A 1D array containing data for the vector\n         * @return {Matrix} - The new matrix\n         */\n        static rowVector(newData) {\n            var vector = new this(1, newData.length);\n            for (var i = 0; i < newData.length; i++) {\n                vector.set(0, i, newData[i]);\n            }\n            return vector;\n        }\n\n        /**\n         * Creates a column vector, a matrix with only one column.\n         * @param {Array} newData - A 1D array containing data for the vector\n         * @return {Matrix} - The new matrix\n         */\n        static columnVector(newData) {\n            var vector = new this(newData.length, 1);\n            for (var i = 0; i < newData.length; i++) {\n                vector.set(i, 0, newData[i]);\n            }\n            return vector;\n        }\n\n        /**\n         * Creates an empty matrix with the given dimensions. Values will be undefined. Same as using new Matrix(rows, columns).\n         * @param {number} rows - Number of rows\n         * @param {number} columns - Number of columns\n         * @return {Matrix} - The new matrix\n         */\n        static empty(rows, columns) {\n            return new this(rows, columns);\n        }\n\n        /**\n         * Creates a matrix with the given dimensions. Values will be set to zero.\n         * @param {number} rows - Number of rows\n         * @param {number} columns - Number of columns\n         * @return {Matrix} - The new matrix\n         */\n        static zeros(rows, columns) {\n            return this.empty(rows, columns).fill(0);\n        }\n\n        /**\n         * Creates a matrix with the given dimensions. Values will be set to one.\n         * @param {number} rows - Number of rows\n         * @param {number} columns - Number of columns\n         * @return {Matrix} - The new matrix\n         */\n        static ones(rows, columns) {\n            return this.empty(rows, columns).fill(1);\n        }\n\n        /**\n         * Creates a matrix with the given dimensions. Values will be randomly set.\n         * @param {number} rows - Number of rows\n         * @param {number} columns - Number of columns\n         * @param {function} [rng=Math.random] - Random number generator\n         * @return {Matrix} The new matrix\n         */\n        static rand(rows, columns, rng) {\n            if (rng === undefined) rng = Math.random;\n            var matrix = this.empty(rows, columns);\n            for (var i = 0; i < rows; i++) {\n                for (var j = 0; j < columns; j++) {\n                    matrix.set(i, j, rng());\n                }\n            }\n            return matrix;\n        }\n\n        /**\n         * Creates a matrix with the given dimensions. Values will be random integers.\n         * @param {number} rows - Number of rows\n         * @param {number} columns - Number of columns\n         * @param {number} [maxValue=1000] - Maximum value\n         * @param {function} [rng=Math.random] - Random number generator\n         * @return {Matrix} The new matrix\n         */\n        static randInt(rows, columns, maxValue, rng) {\n            if (maxValue === undefined) maxValue = 1000;\n            if (rng === undefined) rng = Math.random;\n            var matrix = this.empty(rows, columns);\n            for (var i = 0; i < rows; i++) {\n                for (var j = 0; j < columns; j++) {\n                    var value = Math.floor(rng() * maxValue);\n                    matrix.set(i, j, value);\n                }\n            }\n            return matrix;\n        }\n\n        /**\n         * Creates an identity matrix with the given dimension. Values of the diagonal will be 1 and others will be 0.\n         * @param {number} rows - Number of rows\n         * @param {number} [columns=rows] - Number of columns\n         * @param {number} [value=1] - Value to fill the diagonal with\n         * @return {Matrix} - The new identity matrix\n         */\n        static eye(rows, columns, value) {\n            if (columns === undefined) columns = rows;\n            if (value === undefined) value = 1;\n            var min = Math.min(rows, columns);\n            var matrix = this.zeros(rows, columns);\n            for (var i = 0; i < min; i++) {\n                matrix.set(i, i, value);\n            }\n            return matrix;\n        }\n\n        /**\n         * Creates a diagonal matrix based on the given array.\n         * @param {Array} data - Array containing the data for the diagonal\n         * @param {number} [rows] - Number of rows (Default: data.length)\n         * @param {number} [columns] - Number of columns (Default: rows)\n         * @return {Matrix} - The new diagonal matrix\n         */\n        static diag(data, rows, columns) {\n            var l = data.length;\n            if (rows === undefined) rows = l;\n            if (columns === undefined) columns = rows;\n            var min = Math.min(l, rows, columns);\n            var matrix = this.zeros(rows, columns);\n            for (var i = 0; i < min; i++) {\n                matrix.set(i, i, data[i]);\n            }\n            return matrix;\n        }\n\n        /**\n         * Returns a matrix whose elements are the minimum between matrix1 and matrix2\n         * @param {Matrix} matrix1\n         * @param {Matrix} matrix2\n         * @return {Matrix}\n         */\n        static min(matrix1, matrix2) {\n            matrix1 = this.checkMatrix(matrix1);\n            matrix2 = this.checkMatrix(matrix2);\n            var rows = matrix1.rows;\n            var columns = matrix1.columns;\n            var result = new this(rows, columns);\n            for (var i = 0; i < rows; i++) {\n                for (var j = 0; j < columns; j++) {\n                    result.set(i, j, Math.min(matrix1.get(i, j), matrix2.get(i, j)));\n                }\n            }\n            return result;\n        }\n\n        /**\n         * Returns a matrix whose elements are the maximum between matrix1 and matrix2\n         * @param {Matrix} matrix1\n         * @param {Matrix} matrix2\n         * @return {Matrix}\n         */\n        static max(matrix1, matrix2) {\n            matrix1 = this.checkMatrix(matrix1);\n            matrix2 = this.checkMatrix(matrix2);\n            var rows = matrix1.rows;\n            var columns = matrix1.columns;\n            var result = new this(rows, columns);\n            for (var i = 0; i < rows; i++) {\n                for (var j = 0; j < columns; j++) {\n                    result.set(i, j, Math.max(matrix1.get(i, j), matrix2.get(i, j)));\n                }\n            }\n            return result;\n        }\n\n        /**\n         * Check that the provided value is a Matrix and tries to instantiate one if not\n         * @param {*} value - The value to check\n         * @return {Matrix}\n         */\n        static checkMatrix(value) {\n            return Matrix.isMatrix(value) ? value : new this(value);\n        }\n\n        /**\n         * Returns true if the argument is a Matrix, false otherwise\n         * @param {*} value - The value to check\n         * @return {boolean}\n         */\n        static isMatrix(value) {\n            return (value != null) && (value.klass === 'Matrix');\n        }\n\n        /**\n         * @prop {number} size - The number of elements in the matrix.\n         */\n        get size() {\n            return this.rows * this.columns;\n        }\n\n        /**\n         * Applies a callback for each element of the matrix. The function is called in the matrix (this) context.\n         * @param {function} callback - Function that will be called with two parameters : i (row) and j (column)\n         * @return {Matrix} this\n         */\n        apply(callback) {\n            if (typeof callback !== 'function') {\n                throw new TypeError('callback must be a function');\n            }\n            var ii = this.rows;\n            var jj = this.columns;\n            for (var i = 0; i < ii; i++) {\n                for (var j = 0; j < jj; j++) {\n                    callback.call(this, i, j);\n                }\n            }\n            return this;\n        }\n\n        /**\n         * Returns a new 1D array filled row by row with the matrix values\n         * @return {Array}\n         */\n        to1DArray() {\n            var array = new Array(this.size);\n            for (var i = 0; i < this.rows; i++) {\n                for (var j = 0; j < this.columns; j++) {\n                    array[i * this.columns + j] = this.get(i, j);\n                }\n            }\n            return array;\n        }\n\n        /**\n         * Returns a 2D array containing a copy of the data\n         * @return {Array}\n         */\n        to2DArray() {\n            var copy = new Array(this.rows);\n            for (var i = 0; i < this.rows; i++) {\n                copy[i] = new Array(this.columns);\n                for (var j = 0; j < this.columns; j++) {\n                    copy[i][j] = this.get(i, j);\n                }\n            }\n            return copy;\n        }\n\n        /**\n         * @return {boolean} true if the matrix has one row\n         */\n        isRowVector() {\n            return this.rows === 1;\n        }\n\n        /**\n         * @return {boolean} true if the matrix has one column\n         */\n        isColumnVector() {\n            return this.columns === 1;\n        }\n\n        /**\n         * @return {boolean} true if the matrix has one row or one column\n         */\n        isVector() {\n            return (this.rows === 1) || (this.columns === 1);\n        }\n\n        /**\n         * @return {boolean} true if the matrix has the same number of rows and columns\n         */\n        isSquare() {\n            return this.rows === this.columns;\n        }\n\n        /**\n         * @return {boolean} true if the matrix is square and has the same values on both sides of the diagonal\n         */\n        isSymmetric() {\n            if (this.isSquare()) {\n                for (var i = 0; i < this.rows; i++) {\n                    for (var j = 0; j <= i; j++) {\n                        if (this.get(i, j) !== this.get(j, i)) {\n                            return false;\n                        }\n                    }\n                }\n                return true;\n            }\n            return false;\n        }\n\n        /**\n         * Sets a given element of the matrix. mat.set(3,4,1) is equivalent to mat[3][4]=1\n         * @abstract\n         * @param {number} rowIndex - Index of the row\n         * @param {number} columnIndex - Index of the column\n         * @param {number} value - The new value for the element\n         * @return {Matrix} this\n         */\n        set(rowIndex, columnIndex, value) { // eslint-disable-line no-unused-vars\n            throw new Error('set method is unimplemented');\n        }\n\n        /**\n         * Returns the given element of the matrix. mat.get(3,4) is equivalent to matrix[3][4]\n         * @abstract\n         * @param {number} rowIndex - Index of the row\n         * @param {number} columnIndex - Index of the column\n         * @return {number}\n         */\n        get(rowIndex, columnIndex) { // eslint-disable-line no-unused-vars\n            throw new Error('get method is unimplemented');\n        }\n\n        /**\n         * Creates a new matrix that is a repetition of the current matrix. New matrix has rowRep times the number of\n         * rows of the matrix, and colRep times the number of columns of the matrix\n         * @param {number} rowRep - Number of times the rows should be repeated\n         * @param {number} colRep - Number of times the columns should be re\n         * @return {Matrix}\n         * @example\n         * var matrix = new Matrix([[1,2]]);\n         * matrix.repeat(2); // [[1,2],[1,2]]\n         */\n        repeat(rowRep, colRep) {\n            rowRep = rowRep || 1;\n            colRep = colRep || 1;\n            var matrix = new this.constructor[Symbol.species](this.rows * rowRep, this.columns * colRep);\n            for (var i = 0; i < rowRep; i++) {\n                for (var j = 0; j < colRep; j++) {\n                    matrix.setSubMatrix(this, this.rows * i, this.columns * j);\n                }\n            }\n            return matrix;\n        }\n\n        /**\n         * Fills the matrix with a given value. All elements will be set to this value.\n         * @param {number} value - New value\n         * @return {Matrix} this\n         */\n        fill(value) {\n            for (var i = 0; i < this.rows; i++) {\n                for (var j = 0; j < this.columns; j++) {\n                    this.set(i, j, value);\n                }\n            }\n            return this;\n        }\n\n        /**\n         * Negates the matrix. All elements will be multiplied by (-1)\n         * @return {Matrix} this\n         */\n        neg() {\n            return this.mulS(-1);\n        }\n\n        /**\n         * Returns a new array from the given row index\n         * @param {number} index - Row index\n         * @return {Array}\n         */\n        getRow(index) {\n            util.checkRowIndex(this, index);\n            var row = new Array(this.columns);\n            for (var i = 0; i < this.columns; i++) {\n                row[i] = this.get(index, i);\n            }\n            return row;\n        }\n\n        /**\n         * Returns a new row vector from the given row index\n         * @param {number} index - Row index\n         * @return {Matrix}\n         */\n        getRowVector(index) {\n            return this.constructor.rowVector(this.getRow(index));\n        }\n\n        /**\n         * Sets a row at the given index\n         * @param {number} index - Row index\n         * @param {Array|Matrix} array - Array or vector\n         * @return {Matrix} this\n         */\n        setRow(index, array) {\n            util.checkRowIndex(this, index);\n            array = util.checkRowVector(this, array);\n            for (var i = 0; i < this.columns; i++) {\n                this.set(index, i, array[i]);\n            }\n            return this;\n        }\n\n        /**\n         * Swaps two rows\n         * @param {number} row1 - First row index\n         * @param {number} row2 - Second row index\n         * @return {Matrix} this\n         */\n        swapRows(row1, row2) {\n            util.checkRowIndex(this, row1);\n            util.checkRowIndex(this, row2);\n            for (var i = 0; i < this.columns; i++) {\n                var temp = this.get(row1, i);\n                this.set(row1, i, this.get(row2, i));\n                this.set(row2, i, temp);\n            }\n            return this;\n        }\n\n        /**\n         * Returns a new array from the given column index\n         * @param {number} index - Column index\n         * @return {Array}\n         */\n        getColumn(index) {\n            util.checkColumnIndex(this, index);\n            var column = new Array(this.rows);\n            for (var i = 0; i < this.rows; i++) {\n                column[i] = this.get(i, index);\n            }\n            return column;\n        }\n\n        /**\n         * Returns a new column vector from the given column index\n         * @param {number} index - Column index\n         * @return {Matrix}\n         */\n        getColumnVector(index) {\n            return this.constructor.columnVector(this.getColumn(index));\n        }\n\n        /**\n         * Sets a column at the given index\n         * @param {number} index - Column index\n         * @param {Array|Matrix} array - Array or vector\n         * @return {Matrix} this\n         */\n        setColumn(index, array) {\n            util.checkColumnIndex(this, index);\n            array = util.checkColumnVector(this, array);\n            for (var i = 0; i < this.rows; i++) {\n                this.set(i, index, array[i]);\n            }\n            return this;\n        }\n\n        /**\n         * Swaps two columns\n         * @param {number} column1 - First column index\n         * @param {number} column2 - Second column index\n         * @return {Matrix} this\n         */\n        swapColumns(column1, column2) {\n            util.checkColumnIndex(this, column1);\n            util.checkColumnIndex(this, column2);\n            for (var i = 0; i < this.rows; i++) {\n                var temp = this.get(i, column1);\n                this.set(i, column1, this.get(i, column2));\n                this.set(i, column2, temp);\n            }\n            return this;\n        }\n\n        /**\n         * Adds the values of a vector to each row\n         * @param {Array|Matrix} vector - Array or vector\n         * @return {Matrix} this\n         */\n        addRowVector(vector) {\n            vector = util.checkRowVector(this, vector);\n            for (var i = 0; i < this.rows; i++) {\n                for (var j = 0; j < this.columns; j++) {\n                    this.set(i, j, this.get(i, j) + vector[j]);\n                }\n            }\n            return this;\n        }\n\n        /**\n         * Subtracts the values of a vector from each row\n         * @param {Array|Matrix} vector - Array or vector\n         * @return {Matrix} this\n         */\n        subRowVector(vector) {\n            vector = util.checkRowVector(this, vector);\n            for (var i = 0; i < this.rows; i++) {\n                for (var j = 0; j < this.columns; j++) {\n                    this.set(i, j, this.get(i, j) - vector[j]);\n                }\n            }\n            return this;\n        }\n\n        /**\n         * Multiplies the values of a vector with each row\n         * @param {Array|Matrix} vector - Array or vector\n         * @return {Matrix} this\n         */\n        mulRowVector(vector) {\n            vector = util.checkRowVector(this, vector);\n            for (var i = 0; i < this.rows; i++) {\n                for (var j = 0; j < this.columns; j++) {\n                    this.set(i, j, this.get(i, j) * vector[j]);\n                }\n            }\n            return this;\n        }\n\n        /**\n         * Divides the values of each row by those of a vector\n         * @param {Array|Matrix} vector - Array or vector\n         * @return {Matrix} this\n         */\n        divRowVector(vector) {\n            vector = util.checkRowVector(this, vector);\n            for (var i = 0; i < this.rows; i++) {\n                for (var j = 0; j < this.columns; j++) {\n                    this.set(i, j, this.get(i, j) / vector[j]);\n                }\n            }\n            return this;\n        }\n\n        /**\n         * Adds the values of a vector to each column\n         * @param {Array|Matrix} vector - Array or vector\n         * @return {Matrix} this\n         */\n        addColumnVector(vector) {\n            vector = util.checkColumnVector(this, vector);\n            for (var i = 0; i < this.rows; i++) {\n                for (var j = 0; j < this.columns; j++) {\n                    this.set(i, j, this.get(i, j) + vector[i]);\n                }\n            }\n            return this;\n        }\n\n        /**\n         * Subtracts the values of a vector from each column\n         * @param {Array|Matrix} vector - Array or vector\n         * @return {Matrix} this\n         */\n        subColumnVector(vector) {\n            vector = util.checkColumnVector(this, vector);\n            for (var i = 0; i < this.rows; i++) {\n                for (var j = 0; j < this.columns; j++) {\n                    this.set(i, j, this.get(i, j) - vector[i]);\n                }\n            }\n            return this;\n        }\n\n        /**\n         * Multiplies the values of a vector with each column\n         * @param {Array|Matrix} vector - Array or vector\n         * @return {Matrix} this\n         */\n        mulColumnVector(vector) {\n            vector = util.checkColumnVector(this, vector);\n            for (var i = 0; i < this.rows; i++) {\n                for (var j = 0; j < this.columns; j++) {\n                    this.set(i, j, this.get(i, j) * vector[i]);\n                }\n            }\n            return this;\n        }\n\n        /**\n         * Divides the values of each column by those of a vector\n         * @param {Array|Matrix} vector - Array or vector\n         * @return {Matrix} this\n         */\n        divColumnVector(vector) {\n            vector = util.checkColumnVector(this, vector);\n            for (var i = 0; i < this.rows; i++) {\n                for (var j = 0; j < this.columns; j++) {\n                    this.set(i, j, this.get(i, j) / vector[i]);\n                }\n            }\n            return this;\n        }\n\n        /**\n         * Multiplies the values of a row with a scalar\n         * @param {number} index - Row index\n         * @param {number} value\n         * @return {Matrix} this\n         */\n        mulRow(index, value) {\n            util.checkRowIndex(this, index);\n            for (var i = 0; i < this.columns; i++) {\n                this.set(index, i, this.get(index, i) * value);\n            }\n            return this;\n        }\n\n        /**\n         * Multiplies the values of a column with a scalar\n         * @param {number} index - Column index\n         * @param {number} value\n         * @return {Matrix} this\n         */\n        mulColumn(index, value) {\n            util.checkColumnIndex(this, index);\n            for (var i = 0; i < this.rows; i++) {\n                this.set(i, index, this.get(i, index) * value);\n            }\n            return this;\n        }\n\n        /**\n         * Returns the maximum value of the matrix\n         * @return {number}\n         */\n        max() {\n            var v = this.get(0, 0);\n            for (var i = 0; i < this.rows; i++) {\n                for (var j = 0; j < this.columns; j++) {\n                    if (this.get(i, j) > v) {\n                        v = this.get(i, j);\n                    }\n                }\n            }\n            return v;\n        }\n\n        /**\n         * Returns the index of the maximum value\n         * @return {Array}\n         */\n        maxIndex() {\n            var v = this.get(0, 0);\n            var idx = [0, 0];\n            for (var i = 0; i < this.rows; i++) {\n                for (var j = 0; j < this.columns; j++) {\n                    if (this.get(i, j) > v) {\n                        v = this.get(i, j);\n                        idx[0] = i;\n                        idx[1] = j;\n                    }\n                }\n            }\n            return idx;\n        }\n\n        /**\n         * Returns the minimum value of the matrix\n         * @return {number}\n         */\n        min() {\n            var v = this.get(0, 0);\n            for (var i = 0; i < this.rows; i++) {\n                for (var j = 0; j < this.columns; j++) {\n                    if (this.get(i, j) < v) {\n                        v = this.get(i, j);\n                    }\n                }\n            }\n            return v;\n        }\n\n        /**\n         * Returns the index of the minimum value\n         * @return {Array}\n         */\n        minIndex() {\n            var v = this.get(0, 0);\n            var idx = [0, 0];\n            for (var i = 0; i < this.rows; i++) {\n                for (var j = 0; j < this.columns; j++) {\n                    if (this.get(i, j) < v) {\n                        v = this.get(i, j);\n                        idx[0] = i;\n                        idx[1] = j;\n                    }\n                }\n            }\n            return idx;\n        }\n\n        /**\n         * Returns the maximum value of one row\n         * @param {number} row - Row index\n         * @return {number}\n         */\n        maxRow(row) {\n            util.checkRowIndex(this, row);\n            var v = this.get(row, 0);\n            for (var i = 1; i < this.columns; i++) {\n                if (this.get(row, i) > v) {\n                    v = this.get(row, i);\n                }\n            }\n            return v;\n        }\n\n        /**\n         * Returns the index of the maximum value of one row\n         * @param {number} row - Row index\n         * @return {Array}\n         */\n        maxRowIndex(row) {\n            util.checkRowIndex(this, row);\n            var v = this.get(row, 0);\n            var idx = [row, 0];\n            for (var i = 1; i < this.columns; i++) {\n                if (this.get(row, i) > v) {\n                    v = this.get(row, i);\n                    idx[1] = i;\n                }\n            }\n            return idx;\n        }\n\n        /**\n         * Returns the minimum value of one row\n         * @param {number} row - Row index\n         * @return {number}\n         */\n        minRow(row) {\n            util.checkRowIndex(this, row);\n            var v = this.get(row, 0);\n            for (var i = 1; i < this.columns; i++) {\n                if (this.get(row, i) < v) {\n                    v = this.get(row, i);\n                }\n            }\n            return v;\n        }\n\n        /**\n         * Returns the index of the maximum value of one row\n         * @param {number} row - Row index\n         * @return {Array}\n         */\n        minRowIndex(row) {\n            util.checkRowIndex(this, row);\n            var v = this.get(row, 0);\n            var idx = [row, 0];\n            for (var i = 1; i < this.columns; i++) {\n                if (this.get(row, i) < v) {\n                    v = this.get(row, i);\n                    idx[1] = i;\n                }\n            }\n            return idx;\n        }\n\n        /**\n         * Returns the maximum value of one column\n         * @param {number} column - Column index\n         * @return {number}\n         */\n        maxColumn(column) {\n            util.checkColumnIndex(this, column);\n            var v = this.get(0, column);\n            for (var i = 1; i < this.rows; i++) {\n                if (this.get(i, column) > v) {\n                    v = this.get(i, column);\n                }\n            }\n            return v;\n        }\n\n        /**\n         * Returns the index of the maximum value of one column\n         * @param {number} column - Column index\n         * @return {Array}\n         */\n        maxColumnIndex(column) {\n            util.checkColumnIndex(this, column);\n            var v = this.get(0, column);\n            var idx = [0, column];\n            for (var i = 1; i < this.rows; i++) {\n                if (this.get(i, column) > v) {\n                    v = this.get(i, column);\n                    idx[0] = i;\n                }\n            }\n            return idx;\n        }\n\n        /**\n         * Returns the minimum value of one column\n         * @param {number} column - Column index\n         * @return {number}\n         */\n        minColumn(column) {\n            util.checkColumnIndex(this, column);\n            var v = this.get(0, column);\n            for (var i = 1; i < this.rows; i++) {\n                if (this.get(i, column) < v) {\n                    v = this.get(i, column);\n                }\n            }\n            return v;\n        }\n\n        /**\n         * Returns the index of the minimum value of one column\n         * @param {number} column - Column index\n         * @return {Array}\n         */\n        minColumnIndex(column) {\n            util.checkColumnIndex(this, column);\n            var v = this.get(0, column);\n            var idx = [0, column];\n            for (var i = 1; i < this.rows; i++) {\n                if (this.get(i, column) < v) {\n                    v = this.get(i, column);\n                    idx[0] = i;\n                }\n            }\n            return idx;\n        }\n\n        /**\n         * Returns an array containing the diagonal values of the matrix\n         * @return {Array}\n         */\n        diag() {\n            var min = Math.min(this.rows, this.columns);\n            var diag = new Array(min);\n            for (var i = 0; i < min; i++) {\n                diag[i] = this.get(i, i);\n            }\n            return diag;\n        }\n\n        /**\n         * Returns the sum by the argument given, if no argument given,\n         * it returns the sum of all elements of the matrix.\n         * @param {string} by - sum by 'row' or 'column'.\n         * @return {Matrix|number}\n         */\n        sum(by) {\n            switch (by) {\n                case 'row':\n                    return util.sumByRow(this);\n                case 'column':\n                    return util.sumByColumn(this);\n                default:\n                    return util.sumAll(this);\n            }\n        }\n\n        /**\n         * Returns the mean of all elements of the matrix\n         * @return {number}\n         */\n        mean() {\n            return this.sum() / this.size;\n        }\n\n        /**\n         * Returns the product of all elements of the matrix\n         * @return {number}\n         */\n        prod() {\n            var prod = 1;\n            for (var i = 0; i < this.rows; i++) {\n                for (var j = 0; j < this.columns; j++) {\n                    prod *= this.get(i, j);\n                }\n            }\n            return prod;\n        }\n\n        /**\n         * Computes the cumulative sum of the matrix elements (in place, row by row)\n         * @return {Matrix} this\n         */\n        cumulativeSum() {\n            var sum = 0;\n            for (var i = 0; i < this.rows; i++) {\n                for (var j = 0; j < this.columns; j++) {\n                    sum += this.get(i, j);\n                    this.set(i, j, sum);\n                }\n            }\n            return this;\n        }\n\n        /**\n         * Computes the dot (scalar) product between the matrix and another\n         * @param {Matrix} vector2 vector\n         * @return {number}\n         */\n        dot(vector2) {\n            if (Matrix.isMatrix(vector2)) vector2 = vector2.to1DArray();\n            var vector1 = this.to1DArray();\n            if (vector1.length !== vector2.length) {\n                throw new RangeError('vectors do not have the same size');\n            }\n            var dot = 0;\n            for (var i = 0; i < vector1.length; i++) {\n                dot += vector1[i] * vector2[i];\n            }\n            return dot;\n        }\n\n        /**\n         * Returns the matrix product between this and other\n         * @param {Matrix} other\n         * @return {Matrix}\n         */\n        mmul(other) {\n            other = this.constructor.checkMatrix(other);\n            if (this.columns !== other.rows) {\n                // eslint-disable-next-line no-console\n                console.warn('Number of columns of left matrix are not equal to number of rows of right matrix.');\n            }\n\n            var m = this.rows;\n            var n = this.columns;\n            var p = other.columns;\n\n            var result = new this.constructor[Symbol.species](m, p);\n\n            var Bcolj = new Array(n);\n            for (var j = 0; j < p; j++) {\n                for (var k = 0; k < n; k++) {\n                    Bcolj[k] = other.get(k, j);\n                }\n\n                for (var i = 0; i < m; i++) {\n                    var s = 0;\n                    for (k = 0; k < n; k++) {\n                        s += this.get(i, k) * Bcolj[k];\n                    }\n\n                    result.set(i, j, s);\n                }\n            }\n            return result;\n        }\n\n        strassen2x2(other) {\n            var result = new this.constructor[Symbol.species](2, 2);\n            const a11 = this.get(0, 0);\n            const b11 = other.get(0, 0);\n            const a12 = this.get(0, 1);\n            const b12 = other.get(0, 1);\n            const a21 = this.get(1, 0);\n            const b21 = other.get(1, 0);\n            const a22 = this.get(1, 1);\n            const b22 = other.get(1, 1);\n\n            // Compute intermediate values.\n            const m1 = (a11 + a22) * (b11 + b22);\n            const m2 = (a21 + a22) * b11;\n            const m3 = a11 * (b12 - b22);\n            const m4 = a22 * (b21 - b11);\n            const m5 = (a11 + a12) * b22;\n            const m6 = (a21 - a11) * (b11 + b12);\n            const m7 = (a12 - a22) * (b21 + b22);\n\n            // Combine intermediate values into the output.\n            const c00 = m1 + m4 - m5 + m7;\n            const c01 = m3 + m5;\n            const c10 = m2 + m4;\n            const c11 = m1 - m2 + m3 + m6;\n\n            result.set(0, 0, c00);\n            result.set(0, 1, c01);\n            result.set(1, 0, c10);\n            result.set(1, 1, c11);\n            return result;\n        }\n\n        strassen3x3(other) {\n            var result = new this.constructor[Symbol.species](3, 3);\n\n            const a00 = this.get(0, 0);\n            const a01 = this.get(0, 1);\n            const a02 = this.get(0, 2);\n            const a10 = this.get(1, 0);\n            const a11 = this.get(1, 1);\n            const a12 = this.get(1, 2);\n            const a20 = this.get(2, 0);\n            const a21 = this.get(2, 1);\n            const a22 = this.get(2, 2);\n\n            const b00 = other.get(0, 0);\n            const b01 = other.get(0, 1);\n            const b02 = other.get(0, 2);\n            const b10 = other.get(1, 0);\n            const b11 = other.get(1, 1);\n            const b12 = other.get(1, 2);\n            const b20 = other.get(2, 0);\n            const b21 = other.get(2, 1);\n            const b22 = other.get(2, 2);\n\n            const m1 = (a00 + a01 + a02 - a10 - a11 - a21 - a22) * b11;\n            const m2 = (a00 - a10) * (-b01 + b11);\n            const m3 = a11 * (-b00 + b01 + b10 - b11 - b12 - b20 + b22);\n            const m4 = (-a00 + a10 + a11) * (b00 - b01 + b11);\n            const m5 = (a10 + a11) * (-b00 + b01);\n            const m6 = a00 * b00;\n            const m7 = (-a00 + a20 + a21) * (b00 - b02 + b12);\n            const m8 = (-a00 + a20) * (b02 - b12);\n            const m9 = (a20 + a21) * (-b00 + b02);\n            const m10 = (a00 + a01 + a02 - a11 - a12 - a20 - a21) * b12;\n            const m11 = a21 * (-b00 + b02 + b10 - b11 - b12 - b20 + b21);\n            const m12 = (-a02 + a21 + a22) * (b11 + b20 - b21);\n            const m13 = (a02 - a22) * (b11 - b21);\n            const m14 = a02 * b20;\n            const m15 = (a21 + a22) * (-b20 + b21);\n            const m16 = (-a02 + a11 + a12) * (b12 + b20 - b22);\n            const m17 = (a02 - a12) * (b12 - b22);\n            const m18 = (a11 + a12) * (-b20 + b22);\n            const m19 = a01 * b10;\n            const m20 = a12 * b21;\n            const m21 = a10 * b02;\n            const m22 = a20 * b01;\n            const m23 = a22 * b22;\n\n            const c00 = m6 + m14 + m19;\n            const c01 = m1 + m4 + m5 + m6 + m12 + m14 + m15;\n            const c02 = m6 + m7 + m9 + m10 + m14 + m16 + m18;\n            const c10 = m2 + m3 + m4 + m6 + m14 + m16 + m17;\n            const c11 = m2 + m4 + m5 + m6 + m20;\n            const c12 = m14 + m16 + m17 + m18 + m21;\n            const c20 = m6 + m7 + m8 + m11 + m12 + m13 + m14;\n            const c21 = m12 + m13 + m14 + m15 + m22;\n            const c22 = m6 + m7 + m8 + m9 + m23;\n\n            result.set(0, 0, c00);\n            result.set(0, 1, c01);\n            result.set(0, 2, c02);\n            result.set(1, 0, c10);\n            result.set(1, 1, c11);\n            result.set(1, 2, c12);\n            result.set(2, 0, c20);\n            result.set(2, 1, c21);\n            result.set(2, 2, c22);\n            return result;\n        }\n\n        /**\n         * Returns the matrix product between x and y. More efficient than mmul(other) only when we multiply squared matrix and when the size of the matrix is > 1000.\n         * @param {Matrix} y\n         * @return {Matrix}\n         */\n        mmulStrassen(y) {\n            var x = this.clone();\n            var r1 = x.rows;\n            var c1 = x.columns;\n            var r2 = y.rows;\n            var c2 = y.columns;\n            if (c1 !== r2) {\n                // eslint-disable-next-line no-console\n                console.warn(`Multiplying ${r1} x ${c1} and ${r2} x ${c2} matrix: dimensions do not match.`);\n            }\n\n            // Put a matrix into the top left of a matrix of zeros.\n            // `rows` and `cols` are the dimensions of the output matrix.\n            function embed(mat, rows, cols) {\n                var r = mat.rows;\n                var c = mat.columns;\n                if ((r === rows) && (c === cols)) {\n                    return mat;\n                } else {\n                    var resultat = Matrix.zeros(rows, cols);\n                    resultat = resultat.setSubMatrix(mat, 0, 0);\n                    return resultat;\n                }\n            }\n\n\n            // Make sure both matrices are the same size.\n            // This is exclusively for simplicity:\n            // this algorithm can be implemented with matrices of different sizes.\n\n            var r = Math.max(r1, r2);\n            var c = Math.max(c1, c2);\n            x = embed(x, r, c);\n            y = embed(y, r, c);\n\n            // Our recursive multiplication function.\n            function blockMult(a, b, rows, cols) {\n                // For small matrices, resort to naive multiplication.\n                if (rows <= 512 || cols <= 512) {\n                    return a.mmul(b); // a is equivalent to this\n                }\n\n                // Apply dynamic padding.\n                if ((rows % 2 === 1) && (cols % 2 === 1)) {\n                    a = embed(a, rows + 1, cols + 1);\n                    b = embed(b, rows + 1, cols + 1);\n                } else if (rows % 2 === 1) {\n                    a = embed(a, rows + 1, cols);\n                    b = embed(b, rows + 1, cols);\n                } else if (cols % 2 === 1) {\n                    a = embed(a, rows, cols + 1);\n                    b = embed(b, rows, cols + 1);\n                }\n\n                var halfRows = parseInt(a.rows / 2);\n                var halfCols = parseInt(a.columns / 2);\n                // Subdivide input matrices.\n                var a11 = a.subMatrix(0, halfRows - 1, 0, halfCols - 1);\n                var b11 = b.subMatrix(0, halfRows - 1, 0, halfCols - 1);\n\n                var a12 = a.subMatrix(0, halfRows - 1, halfCols, a.columns - 1);\n                var b12 = b.subMatrix(0, halfRows - 1, halfCols, b.columns - 1);\n\n                var a21 = a.subMatrix(halfRows, a.rows - 1, 0, halfCols - 1);\n                var b21 = b.subMatrix(halfRows, b.rows - 1, 0, halfCols - 1);\n\n                var a22 = a.subMatrix(halfRows, a.rows - 1, halfCols, a.columns - 1);\n                var b22 = b.subMatrix(halfRows, b.rows - 1, halfCols, b.columns - 1);\n\n                // Compute intermediate values.\n                var m1 = blockMult(Matrix.add(a11, a22), Matrix.add(b11, b22), halfRows, halfCols);\n                var m2 = blockMult(Matrix.add(a21, a22), b11, halfRows, halfCols);\n                var m3 = blockMult(a11, Matrix.sub(b12, b22), halfRows, halfCols);\n                var m4 = blockMult(a22, Matrix.sub(b21, b11), halfRows, halfCols);\n                var m5 = blockMult(Matrix.add(a11, a12), b22, halfRows, halfCols);\n                var m6 = blockMult(Matrix.sub(a21, a11), Matrix.add(b11, b12), halfRows, halfCols);\n                var m7 = blockMult(Matrix.sub(a12, a22), Matrix.add(b21, b22), halfRows, halfCols);\n\n                // Combine intermediate values into the output.\n                var c11 = Matrix.add(m1, m4);\n                c11.sub(m5);\n                c11.add(m7);\n                var c12 = Matrix.add(m3, m5);\n                var c21 = Matrix.add(m2, m4);\n                var c22 = Matrix.sub(m1, m2);\n                c22.add(m3);\n                c22.add(m6);\n\n                //Crop output to the desired size (undo dynamic padding).\n                var resultat = Matrix.zeros(2 * c11.rows, 2 * c11.columns);\n                resultat = resultat.setSubMatrix(c11, 0, 0);\n                resultat = resultat.setSubMatrix(c12, c11.rows, 0);\n                resultat = resultat.setSubMatrix(c21, 0, c11.columns);\n                resultat = resultat.setSubMatrix(c22, c11.rows, c11.columns);\n                return resultat.subMatrix(0, rows - 1, 0, cols - 1);\n            }\n            return blockMult(x, y, r, c);\n        }\n\n        /**\n         * Returns a row-by-row scaled matrix\n         * @param {number} [min=0] - Minimum scaled value\n         * @param {number} [max=1] - Maximum scaled value\n         * @return {Matrix} - The scaled matrix\n         */\n        scaleRows(min, max) {\n            min = min === undefined ? 0 : min;\n            max = max === undefined ? 1 : max;\n            if (min >= max) {\n                throw new RangeError('min should be strictly smaller than max');\n            }\n            var newMatrix = this.constructor.empty(this.rows, this.columns);\n            for (var i = 0; i < this.rows; i++) {\n                var scaled = arrayUtils.scale(this.getRow(i), {min, max});\n                newMatrix.setRow(i, scaled);\n            }\n            return newMatrix;\n        }\n\n        /**\n         * Returns a new column-by-column scaled matrix\n         * @param {number} [min=0] - Minimum scaled value\n         * @param {number} [max=1] - Maximum scaled value\n         * @return {Matrix} - The new scaled matrix\n         * @example\n         * var matrix = new Matrix([[1,2],[-1,0]]);\n         * var scaledMatrix = matrix.scaleColumns(); // [[1,1],[0,0]]\n         */\n        scaleColumns(min, max) {\n            min = min === undefined ? 0 : min;\n            max = max === undefined ? 1 : max;\n            if (min >= max) {\n                throw new RangeError('min should be strictly smaller than max');\n            }\n            var newMatrix = this.constructor.empty(this.rows, this.columns);\n            for (var i = 0; i < this.columns; i++) {\n                var scaled = arrayUtils.scale(this.getColumn(i), {\n                    min: min,\n                    max: max\n                });\n                newMatrix.setColumn(i, scaled);\n            }\n            return newMatrix;\n        }\n\n\n        /**\n         * Returns the Kronecker product (also known as tensor product) between this and other\n         * See https://en.wikipedia.org/wiki/Kronecker_product\n         * @param {Matrix} other\n         * @return {Matrix}\n         */\n        kroneckerProduct(other) {\n            other = this.constructor.checkMatrix(other);\n\n            var m = this.rows;\n            var n = this.columns;\n            var p = other.rows;\n            var q = other.columns;\n\n            var result = new this.constructor[Symbol.species](m * p, n * q);\n            for (var i = 0; i < m; i++) {\n                for (var j = 0; j < n; j++) {\n                    for (var k = 0; k < p; k++) {\n                        for (var l = 0; l < q; l++) {\n                            result[p * i + k][q * j + l] = this.get(i, j) * other.get(k, l);\n                        }\n                    }\n                }\n            }\n            return result;\n        }\n\n        /**\n         * Transposes the matrix and returns a new one containing the result\n         * @return {Matrix}\n         */\n        transpose() {\n            var result = new this.constructor[Symbol.species](this.columns, this.rows);\n            for (var i = 0; i < this.rows; i++) {\n                for (var j = 0; j < this.columns; j++) {\n                    result.set(j, i, this.get(i, j));\n                }\n            }\n            return result;\n        }\n\n        /**\n         * Sorts the rows (in place)\n         * @param {function} compareFunction - usual Array.prototype.sort comparison function\n         * @return {Matrix} this\n         */\n        sortRows(compareFunction) {\n            if (compareFunction === undefined) compareFunction = compareNumbers;\n            for (var i = 0; i < this.rows; i++) {\n                this.setRow(i, this.getRow(i).sort(compareFunction));\n            }\n            return this;\n        }\n\n        /**\n         * Sorts the columns (in place)\n         * @param {function} compareFunction - usual Array.prototype.sort comparison function\n         * @return {Matrix} this\n         */\n        sortColumns(compareFunction) {\n            if (compareFunction === undefined) compareFunction = compareNumbers;\n            for (var i = 0; i < this.columns; i++) {\n                this.setColumn(i, this.getColumn(i).sort(compareFunction));\n            }\n            return this;\n        }\n\n        /**\n         * Returns a subset of the matrix\n         * @param {number} startRow - First row index\n         * @param {number} endRow - Last row index\n         * @param {number} startColumn - First column index\n         * @param {number} endColumn - Last column index\n         * @return {Matrix}\n         */\n        subMatrix(startRow, endRow, startColumn, endColumn) {\n            util.checkRange(this, startRow, endRow, startColumn, endColumn);\n            var newMatrix = new this.constructor[Symbol.species](endRow - startRow + 1, endColumn - startColumn + 1);\n            for (var i = startRow; i <= endRow; i++) {\n                for (var j = startColumn; j <= endColumn; j++) {\n                    newMatrix[i - startRow][j - startColumn] = this.get(i, j);\n                }\n            }\n            return newMatrix;\n        }\n\n        /**\n         * Returns a subset of the matrix based on an array of row indices\n         * @param {Array} indices - Array containing the row indices\n         * @param {number} [startColumn = 0] - First column index\n         * @param {number} [endColumn = this.columns-1] - Last column index\n         * @return {Matrix}\n         */\n        subMatrixRow(indices, startColumn, endColumn) {\n            if (startColumn === undefined) startColumn = 0;\n            if (endColumn === undefined) endColumn = this.columns - 1;\n            if ((startColumn > endColumn) || (startColumn < 0) || (startColumn >= this.columns) || (endColumn < 0) || (endColumn >= this.columns)) {\n                throw new RangeError('Argument out of range');\n            }\n\n            var newMatrix = new this.constructor[Symbol.species](indices.length, endColumn - startColumn + 1);\n            for (var i = 0; i < indices.length; i++) {\n                for (var j = startColumn; j <= endColumn; j++) {\n                    if (indices[i] < 0 || indices[i] >= this.rows) {\n                        throw new RangeError('Row index out of range: ' + indices[i]);\n                    }\n                    newMatrix.set(i, j - startColumn, this.get(indices[i], j));\n                }\n            }\n            return newMatrix;\n        }\n\n        /**\n         * Returns a subset of the matrix based on an array of column indices\n         * @param {Array} indices - Array containing the column indices\n         * @param {number} [startRow = 0] - First row index\n         * @param {number} [endRow = this.rows-1] - Last row index\n         * @return {Matrix}\n         */\n        subMatrixColumn(indices, startRow, endRow) {\n            if (startRow === undefined) startRow = 0;\n            if (endRow === undefined) endRow = this.rows - 1;\n            if ((startRow > endRow) || (startRow < 0) || (startRow >= this.rows) || (endRow < 0) || (endRow >= this.rows)) {\n                throw new RangeError('Argument out of range');\n            }\n\n            var newMatrix = new this.constructor[Symbol.species](endRow - startRow + 1, indices.length);\n            for (var i = 0; i < indices.length; i++) {\n                for (var j = startRow; j <= endRow; j++) {\n                    if (indices[i] < 0 || indices[i] >= this.columns) {\n                        throw new RangeError('Column index out of range: ' + indices[i]);\n                    }\n                    newMatrix.set(j - startRow, i, this.get(j, indices[i]));\n                }\n            }\n            return newMatrix;\n        }\n\n        /**\n         * Set a part of the matrix to the given sub-matrix\n         * @param {Matrix|Array< Array >} matrix - The source matrix from which to extract values.\n         * @param {number} startRow - The index of the first row to set\n         * @param {number} startColumn - The index of the first column to set\n         * @return {Matrix}\n         */\n        setSubMatrix(matrix, startRow, startColumn) {\n            matrix = this.constructor.checkMatrix(matrix);\n            var endRow = startRow + matrix.rows - 1;\n            var endColumn = startColumn + matrix.columns - 1;\n            util.checkRange(this, startRow, endRow, startColumn, endColumn);\n            for (var i = 0; i < matrix.rows; i++) {\n                for (var j = 0; j < matrix.columns; j++) {\n                    this[startRow + i][startColumn + j] = matrix.get(i, j);\n                }\n            }\n            return this;\n        }\n\n        /**\n         * Return a new matrix based on a selection of rows and columns\n         * @param {Array<number>} rowIndices - The row indices to select. Order matters and an index can be more than once.\n         * @param {Array<number>} columnIndices - The column indices to select. Order matters and an index can be use more than once.\n         * @return {Matrix} The new matrix\n         */\n        selection(rowIndices, columnIndices) {\n            var indices = util.checkIndices(this, rowIndices, columnIndices);\n            var newMatrix = new this.constructor[Symbol.species](rowIndices.length, columnIndices.length);\n            for (var i = 0; i < indices.row.length; i++) {\n                var rowIndex = indices.row[i];\n                for (var j = 0; j < indices.column.length; j++) {\n                    var columnIndex = indices.column[j];\n                    newMatrix[i][j] = this.get(rowIndex, columnIndex);\n                }\n            }\n            return newMatrix;\n        }\n\n        /**\n         * Returns the trace of the matrix (sum of the diagonal elements)\n         * @return {number}\n         */\n        trace() {\n            var min = Math.min(this.rows, this.columns);\n            var trace = 0;\n            for (var i = 0; i < min; i++) {\n                trace += this.get(i, i);\n            }\n            return trace;\n        }\n\n        /*\n         Matrix views\n         */\n\n        /**\n         * Returns a view of the transposition of the matrix\n         * @return {MatrixTransposeView}\n         */\n        transposeView() {\n            return new MatrixTransposeView(this);\n        }\n\n        /**\n         * Returns a view of the row vector with the given index\n         * @param {number} row - row index of the vector\n         * @return {MatrixRowView}\n         */\n        rowView(row) {\n            util.checkRowIndex(this, row);\n            return new MatrixRowView(this, row);\n        }\n\n        /**\n         * Returns a view of the column vector with the given index\n         * @param {number} column - column index of the vector\n         * @return {MatrixColumnView}\n         */\n        columnView(column) {\n            util.checkColumnIndex(this, column);\n            return new MatrixColumnView(this, column);\n        }\n\n        /**\n         * Returns a view of the matrix flipped in the row axis\n         * @return {MatrixFlipRowView}\n         */\n        flipRowView() {\n            return new MatrixFlipRowView(this);\n        }\n\n        /**\n         * Returns a view of the matrix flipped in the column axis\n         * @return {MatrixFlipColumnView}\n         */\n        flipColumnView() {\n            return new MatrixFlipColumnView(this);\n        }\n\n        /**\n         * Returns a view of a submatrix giving the index boundaries\n         * @param {number} startRow - first row index of the submatrix\n         * @param {number} endRow - last row index of the submatrix\n         * @param {number} startColumn - first column index of the submatrix\n         * @param {number} endColumn - last column index of the submatrix\n         * @return {MatrixSubView}\n         */\n        subMatrixView(startRow, endRow, startColumn, endColumn) {\n            return new MatrixSubView(this, startRow, endRow, startColumn, endColumn);\n        }\n\n        /**\n         * Returns a view of the cross of the row indices and the column indices\n         * @example\n         * // resulting vector is [[2], [2]]\n         * var matrix = new Matrix([[1,2,3], [4,5,6]]).selectionView([0, 0], [1])\n         * @param {Array<number>} rowIndices\n         * @param {Array<number>} columnIndices\n         * @return {MatrixSelectionView}\n         */\n        selectionView(rowIndices, columnIndices) {\n            return new MatrixSelectionView(this, rowIndices, columnIndices);\n        }\n\n\n        /**\n        * Calculates and returns the determinant of a matrix as a Number\n        * @example\n        *   new Matrix([[1,2,3], [4,5,6]]).det()\n        * @return {number}\n        */\n        det() {\n            if (this.isSquare()) {\n                var a, b, c, d;\n                if (this.columns === 2) {\n                    // 2 x 2 matrix\n                    a = this.get(0, 0);\n                    b = this.get(0, 1);\n                    c = this.get(1, 0);\n                    d = this.get(1, 1);\n\n                    return a * d - (b * c);\n                } else if (this.columns === 3) {\n                    // 3 x 3 matrix\n                    var subMatrix0, subMatrix1, subMatrix2;\n                    subMatrix0 = this.selectionView([1, 2], [1, 2]);\n                    subMatrix1 = this.selectionView([1, 2], [0, 2]);\n                    subMatrix2 = this.selectionView([1, 2], [0, 1]);\n                    a = this.get(0, 0);\n                    b = this.get(0, 1);\n                    c = this.get(0, 2);\n\n                    return a * subMatrix0.det() - b * subMatrix1.det() + c * subMatrix2.det();\n                } else {\n                    // general purpose determinant using the LU decomposition\n                    return new LuDecomposition(this).determinant;\n                }\n\n            } else {\n                throw Error('Determinant can only be calculated for a square matrix.');\n            }\n        }\n\n        /**\n         * Returns inverse of a matrix if it exists or the pseudoinverse\n         * @param {number} threshold - threshold for taking inverse of singular values (default = 1e-15)\n         * @return {Matrix} the (pseudo)inverted matrix.\n         */\n        pseudoInverse(threshold) {\n            if (threshold === undefined) threshold = Number.EPSILON;\n            var svdSolution = new SvDecomposition(this, {autoTranspose: true});\n\n            var U = svdSolution.leftSingularVectors;\n            var V = svdSolution.rightSingularVectors;\n            var s = svdSolution.diagonal;\n\n            for (var i = 0; i < s.length; i++) {\n                if (Math.abs(s[i]) > threshold) {\n                    s[i] = 1.0 / s[i];\n                } else {\n                    s[i] = 0.0;\n                }\n            }\n\n            // convert list to diagonal\n            s = this.constructor[Symbol.species].diag(s);\n            return V.mmul(s.mmul(U.transposeView()));\n        }\n    }\n\n    Matrix.prototype.klass = 'Matrix';\n\n    /**\n     * @private\n     * Check that two matrices have the same dimensions\n     * @param {Matrix} matrix\n     * @param {Matrix} otherMatrix\n     */\n    function checkDimensions(matrix, otherMatrix) { // eslint-disable-line no-unused-vars\n        if (matrix.rows !== otherMatrix.rows ||\n            matrix.columns !== otherMatrix.columns) {\n            throw new RangeError('Matrices dimensions must be equal');\n        }\n    }\n\n    function compareNumbers(a, b) {\n        return a - b;\n    }\n\n    /*\n     Synonyms\n     */\n\n    Matrix.random = Matrix.rand;\n    Matrix.diagonal = Matrix.diag;\n    Matrix.prototype.diagonal = Matrix.prototype.diag;\n    Matrix.identity = Matrix.eye;\n    Matrix.prototype.negate = Matrix.prototype.neg;\n    Matrix.prototype.tensorProduct = Matrix.prototype.kroneckerProduct;\n    Matrix.prototype.determinant = Matrix.prototype.det;\n\n    /*\n     Add dynamically instance and static methods for mathematical operations\n     */\n\n    var inplaceOperator = `\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n`;\n\n    var inplaceOperatorScalar = `\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% value);\n        }\n    }\n    return this;\n})\n`;\n\n    var inplaceOperatorMatrix = `\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    checkDimensions(this, matrix);\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));\n        }\n    }\n    return this;\n})\n`;\n\n    var staticOperator = `\n(function %name%(matrix, value) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(value);\n})\n`;\n\n    var inplaceMethod = `\n(function %name%() {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j)));\n        }\n    }\n    return this;\n})\n`;\n\n    var staticMethod = `\n(function %name%(matrix) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%();\n})\n`;\n\n    var inplaceMethodWithArgs = `\n(function %name%(%args%) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), %args%));\n        }\n    }\n    return this;\n})\n`;\n\n    var staticMethodWithArgs = `\n(function %name%(matrix, %args%) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(%args%);\n})\n`;\n\n\n    var inplaceMethodWithOneArgScalar = `\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), value));\n        }\n    }\n    return this;\n})\n`;\n    var inplaceMethodWithOneArgMatrix = `\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    checkDimensions(this, matrix);\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));\n        }\n    }\n    return this;\n})\n`;\n\n    var inplaceMethodWithOneArg = `\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n`;\n\n    var staticMethodWithOneArg = staticMethodWithArgs;\n\n    var operators = [\n        // Arithmetic operators\n        ['+', 'add'],\n        ['-', 'sub', 'subtract'],\n        ['*', 'mul', 'multiply'],\n        ['/', 'div', 'divide'],\n        ['%', 'mod', 'modulus'],\n        // Bitwise operators\n        ['&', 'and'],\n        ['|', 'or'],\n        ['^', 'xor'],\n        ['<<', 'leftShift'],\n        ['>>', 'signPropagatingRightShift'],\n        ['>>>', 'rightShift', 'zeroFillRightShift']\n    ];\n\n    var i;\n\n    for (var operator of operators) {\n        var inplaceOp = eval(fillTemplateFunction(inplaceOperator, {name: operator[1], op: operator[0]}));\n        var inplaceOpS = eval(fillTemplateFunction(inplaceOperatorScalar, {name: operator[1] + 'S', op: operator[0]}));\n        var inplaceOpM = eval(fillTemplateFunction(inplaceOperatorMatrix, {name: operator[1] + 'M', op: operator[0]}));\n        var staticOp = eval(fillTemplateFunction(staticOperator, {name: operator[1]}));\n        for (i = 1; i < operator.length; i++) {\n            Matrix.prototype[operator[i]] = inplaceOp;\n            Matrix.prototype[operator[i] + 'S'] = inplaceOpS;\n            Matrix.prototype[operator[i] + 'M'] = inplaceOpM;\n            Matrix[operator[i]] = staticOp;\n        }\n    }\n\n    var methods = [\n        ['~', 'not']\n    ];\n\n    [\n        'abs', 'acos', 'acosh', 'asin', 'asinh', 'atan', 'atanh', 'cbrt', 'ceil',\n        'clz32', 'cos', 'cosh', 'exp', 'expm1', 'floor', 'fround', 'log', 'log1p',\n        'log10', 'log2', 'round', 'sign', 'sin', 'sinh', 'sqrt', 'tan', 'tanh', 'trunc'\n    ].forEach(function (mathMethod) {\n        methods.push(['Math.' + mathMethod, mathMethod]);\n    });\n\n    for (var method of methods) {\n        var inplaceMeth = eval(fillTemplateFunction(inplaceMethod, {name: method[1], method: method[0]}));\n        var staticMeth = eval(fillTemplateFunction(staticMethod, {name: method[1]}));\n        for (i = 1; i < method.length; i++) {\n            Matrix.prototype[method[i]] = inplaceMeth;\n            Matrix[method[i]] = staticMeth;\n        }\n    }\n\n    var methodsWithArgs = [\n        ['Math.pow', 1, 'pow']\n    ];\n\n    for (var methodWithArg of methodsWithArgs) {\n        var args = 'arg0';\n        for (i = 1; i < methodWithArg[1]; i++) {\n            args += `, arg${i}`;\n        }\n        if (methodWithArg[1] !== 1) {\n            var inplaceMethWithArgs = eval(fillTemplateFunction(inplaceMethodWithArgs, {\n                name: methodWithArg[2],\n                method: methodWithArg[0],\n                args: args\n            }));\n            var staticMethWithArgs = eval(fillTemplateFunction(staticMethodWithArgs, {name: methodWithArg[2], args: args}));\n            for (i = 2; i < methodWithArg.length; i++) {\n                Matrix.prototype[methodWithArg[i]] = inplaceMethWithArgs;\n                Matrix[methodWithArg[i]] = staticMethWithArgs;\n            }\n        } else {\n            var tmplVar = {\n                name: methodWithArg[2],\n                args: args,\n                method: methodWithArg[0]\n            };\n            var inplaceMethod2 = eval(fillTemplateFunction(inplaceMethodWithOneArg, tmplVar));\n            var inplaceMethodS = eval(fillTemplateFunction(inplaceMethodWithOneArgScalar, tmplVar));\n            var inplaceMethodM = eval(fillTemplateFunction(inplaceMethodWithOneArgMatrix, tmplVar));\n            var staticMethod2 = eval(fillTemplateFunction(staticMethodWithOneArg, tmplVar));\n            for (i = 2; i < methodWithArg.length; i++) {\n                Matrix.prototype[methodWithArg[i]] = inplaceMethod2;\n                Matrix.prototype[methodWithArg[i] + 'M'] = inplaceMethodM;\n                Matrix.prototype[methodWithArg[i] + 'S'] = inplaceMethodS;\n                Matrix[methodWithArg[i]] = staticMethod2;\n            }\n        }\n    }\n\n    function fillTemplateFunction(template, values) {\n        for (var value in values) {\n            template = template.replace(new RegExp('%' + value + '%', 'g'), values[value]);\n        }\n        return template;\n    }\n\n    return Matrix;\n}\n","'use strict';\n\nvar Matrix = require('../matrix');\n\n// https://github.com/lutzroeder/Mapack/blob/master/Source/LuDecomposition.cs\nfunction LuDecomposition(matrix) {\n    if (!(this instanceof LuDecomposition)) {\n        return new LuDecomposition(matrix);\n    }\n\n    matrix = Matrix.Matrix.checkMatrix(matrix);\n\n    var lu = matrix.clone(),\n        rows = lu.rows,\n        columns = lu.columns,\n        pivotVector = new Array(rows),\n        pivotSign = 1,\n        i, j, k, p, s, t, v,\n        LUrowi, LUcolj, kmax;\n\n    for (i = 0; i < rows; i++) {\n        pivotVector[i] = i;\n    }\n\n    LUcolj = new Array(rows);\n\n    for (j = 0; j < columns; j++) {\n\n        for (i = 0; i < rows; i++) {\n            LUcolj[i] = lu[i][j];\n        }\n\n        for (i = 0; i < rows; i++) {\n            LUrowi = lu[i];\n            kmax = Math.min(i, j);\n            s = 0;\n            for (k = 0; k < kmax; k++) {\n                s += LUrowi[k] * LUcolj[k];\n            }\n            LUrowi[j] = LUcolj[i] -= s;\n        }\n\n        p = j;\n        for (i = j + 1; i < rows; i++) {\n            if (Math.abs(LUcolj[i]) > Math.abs(LUcolj[p])) {\n                p = i;\n            }\n        }\n\n        if (p !== j) {\n            for (k = 0; k < columns; k++) {\n                t = lu[p][k];\n                lu[p][k] = lu[j][k];\n                lu[j][k] = t;\n            }\n\n            v = pivotVector[p];\n            pivotVector[p] = pivotVector[j];\n            pivotVector[j] = v;\n\n            pivotSign = -pivotSign;\n        }\n\n        if (j < rows && lu[j][j] !== 0) {\n            for (i = j + 1; i < rows; i++) {\n                lu[i][j] /= lu[j][j];\n            }\n        }\n    }\n\n    this.LU = lu;\n    this.pivotVector = pivotVector;\n    this.pivotSign = pivotSign;\n}\n\nLuDecomposition.prototype = {\n    isSingular: function () {\n        var data = this.LU,\n            col = data.columns;\n        for (var j = 0; j < col; j++) {\n            if (data[j][j] === 0) {\n                return true;\n            }\n        }\n        return false;\n    },\n    get determinant() {\n        var data = this.LU;\n        if (!data.isSquare()) {\n            throw new Error('Matrix must be square');\n        }\n        var determinant = this.pivotSign, col = data.columns;\n        for (var j = 0; j < col; j++) {\n            determinant *= data[j][j];\n        }\n        return determinant;\n    },\n    get lowerTriangularMatrix() {\n        var data = this.LU,\n            rows = data.rows,\n            columns = data.columns,\n            X = new Matrix.Matrix(rows, columns);\n        for (var i = 0; i < rows; i++) {\n            for (var j = 0; j < columns; j++) {\n                if (i > j) {\n                    X[i][j] = data[i][j];\n                } else if (i === j) {\n                    X[i][j] = 1;\n                } else {\n                    X[i][j] = 0;\n                }\n            }\n        }\n        return X;\n    },\n    get upperTriangularMatrix() {\n        var data = this.LU,\n            rows = data.rows,\n            columns = data.columns,\n            X = new Matrix.Matrix(rows, columns);\n        for (var i = 0; i < rows; i++) {\n            for (var j = 0; j < columns; j++) {\n                if (i <= j) {\n                    X[i][j] = data[i][j];\n                } else {\n                    X[i][j] = 0;\n                }\n            }\n        }\n        return X;\n    },\n    get pivotPermutationVector() {\n        return this.pivotVector.slice();\n    },\n    solve: function (value) {\n        value = Matrix.Matrix.checkMatrix(value);\n\n        var lu = this.LU,\n            rows = lu.rows;\n\n        if (rows !== value.rows) {\n            throw new Error('Invalid matrix dimensions');\n        }\n        if (this.isSingular()) {\n            throw new Error('LU matrix is singular');\n        }\n\n        var count = value.columns;\n        var X = value.subMatrixRow(this.pivotVector, 0, count - 1);\n        var columns = lu.columns;\n        var i, j, k;\n\n        for (k = 0; k < columns; k++) {\n            for (i = k + 1; i < columns; i++) {\n                for (j = 0; j < count; j++) {\n                    X[i][j] -= X[k][j] * lu[i][k];\n                }\n            }\n        }\n        for (k = columns - 1; k >= 0; k--) {\n            for (j = 0; j < count; j++) {\n                X[k][j] /= lu[k][k];\n            }\n            for (i = 0; i < k; i++) {\n                for (j = 0; j < count; j++) {\n                    X[i][j] -= X[k][j] * lu[i][k];\n                }\n            }\n        }\n        return X;\n    }\n};\n\nmodule.exports = LuDecomposition;\n","'use strict';\n\nvar Matrix = require('../matrix');\nvar util = require('./util');\nvar hypotenuse = util.hypotenuse;\nvar getFilled2DArray = util.getFilled2DArray;\n\n// https://github.com/lutzroeder/Mapack/blob/master/Source/SingularValueDecomposition.cs\nfunction SingularValueDecomposition(value, options) {\n    if (!(this instanceof SingularValueDecomposition)) {\n        return new SingularValueDecomposition(value, options);\n    }\n    value = Matrix.Matrix.checkMatrix(value);\n\n    options = options || {};\n\n    var m = value.rows,\n        n = value.columns,\n        nu = Math.min(m, n);\n\n    var wantu = true, wantv = true;\n    if (options.computeLeftSingularVectors === false) wantu = false;\n    if (options.computeRightSingularVectors === false) wantv = false;\n    var autoTranspose = options.autoTranspose === true;\n\n    var swapped = false;\n    var a;\n    if (m < n) {\n        if (!autoTranspose) {\n            a = value.clone();\n            // eslint-disable-next-line no-console\n            console.warn('Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose');\n        } else {\n            a = value.transpose();\n            m = a.rows;\n            n = a.columns;\n            swapped = true;\n            var aux = wantu;\n            wantu = wantv;\n            wantv = aux;\n        }\n    } else {\n        a = value.clone();\n    }\n\n    var s = new Array(Math.min(m + 1, n)),\n        U = getFilled2DArray(m, nu, 0),\n        V = getFilled2DArray(n, n, 0),\n        e = new Array(n),\n        work = new Array(m);\n\n    var nct = Math.min(m - 1, n);\n    var nrt = Math.max(0, Math.min(n - 2, m));\n\n    var i, j, k, p, t, ks, f, cs, sn, max, kase,\n        scale, sp, spm1, epm1, sk, ek, b, c, shift, g;\n\n    for (k = 0, max = Math.max(nct, nrt); k < max; k++) {\n        if (k < nct) {\n            s[k] = 0;\n            for (i = k; i < m; i++) {\n                s[k] = hypotenuse(s[k], a[i][k]);\n            }\n            if (s[k] !== 0) {\n                if (a[k][k] < 0) {\n                    s[k] = -s[k];\n                }\n                for (i = k; i < m; i++) {\n                    a[i][k] /= s[k];\n                }\n                a[k][k] += 1;\n            }\n            s[k] = -s[k];\n        }\n\n        for (j = k + 1; j < n; j++) {\n            if ((k < nct) && (s[k] !== 0)) {\n                t = 0;\n                for (i = k; i < m; i++) {\n                    t += a[i][k] * a[i][j];\n                }\n                t = -t / a[k][k];\n                for (i = k; i < m; i++) {\n                    a[i][j] += t * a[i][k];\n                }\n            }\n            e[j] = a[k][j];\n        }\n\n        if (wantu && (k < nct)) {\n            for (i = k; i < m; i++) {\n                U[i][k] = a[i][k];\n            }\n        }\n\n        if (k < nrt) {\n            e[k] = 0;\n            for (i = k + 1; i < n; i++) {\n                e[k] = hypotenuse(e[k], e[i]);\n            }\n            if (e[k] !== 0) {\n                if (e[k + 1] < 0) {\n                    e[k] = 0 - e[k];\n                }\n                for (i = k + 1; i < n; i++) {\n                    e[i] /= e[k];\n                }\n                e[k + 1] += 1;\n            }\n            e[k] = -e[k];\n            if ((k + 1 < m) && (e[k] !== 0)) {\n                for (i = k + 1; i < m; i++) {\n                    work[i] = 0;\n                }\n                for (j = k + 1; j < n; j++) {\n                    for (i = k + 1; i < m; i++) {\n                        work[i] += e[j] * a[i][j];\n                    }\n                }\n                for (j = k + 1; j < n; j++) {\n                    t = -e[j] / e[k + 1];\n                    for (i = k + 1; i < m; i++) {\n                        a[i][j] += t * work[i];\n                    }\n                }\n            }\n            if (wantv) {\n                for (i = k + 1; i < n; i++) {\n                    V[i][k] = e[i];\n                }\n            }\n        }\n    }\n\n    p = Math.min(n, m + 1);\n    if (nct < n) {\n        s[nct] = a[nct][nct];\n    }\n    if (m < p) {\n        s[p - 1] = 0;\n    }\n    if (nrt + 1 < p) {\n        e[nrt] = a[nrt][p - 1];\n    }\n    e[p - 1] = 0;\n\n    if (wantu) {\n        for (j = nct; j < nu; j++) {\n            for (i = 0; i < m; i++) {\n                U[i][j] = 0;\n            }\n            U[j][j] = 1;\n        }\n        for (k = nct - 1; k >= 0; k--) {\n            if (s[k] !== 0) {\n                for (j = k + 1; j < nu; j++) {\n                    t = 0;\n                    for (i = k; i < m; i++) {\n                        t += U[i][k] * U[i][j];\n                    }\n                    t = -t / U[k][k];\n                    for (i = k; i < m; i++) {\n                        U[i][j] += t * U[i][k];\n                    }\n                }\n                for (i = k; i < m; i++) {\n                    U[i][k] = -U[i][k];\n                }\n                U[k][k] = 1 + U[k][k];\n                for (i = 0; i < k - 1; i++) {\n                    U[i][k] = 0;\n                }\n            } else {\n                for (i = 0; i < m; i++) {\n                    U[i][k] = 0;\n                }\n                U[k][k] = 1;\n            }\n        }\n    }\n\n    if (wantv) {\n        for (k = n - 1; k >= 0; k--) {\n            if ((k < nrt) && (e[k] !== 0)) {\n                for (j = k + 1; j < n; j++) {\n                    t = 0;\n                    for (i = k + 1; i < n; i++) {\n                        t += V[i][k] * V[i][j];\n                    }\n                    t = -t / V[k + 1][k];\n                    for (i = k + 1; i < n; i++) {\n                        V[i][j] += t * V[i][k];\n                    }\n                }\n            }\n            for (i = 0; i < n; i++) {\n                V[i][k] = 0;\n            }\n            V[k][k] = 1;\n        }\n    }\n\n    var pp = p - 1,\n        iter = 0,\n        eps = Math.pow(2, -52);\n    while (p > 0) {\n        for (k = p - 2; k >= -1; k--) {\n            if (k === -1) {\n                break;\n            }\n            if (Math.abs(e[k]) <= eps * (Math.abs(s[k]) + Math.abs(s[k + 1]))) {\n                e[k] = 0;\n                break;\n            }\n        }\n        if (k === p - 2) {\n            kase = 4;\n        } else {\n            for (ks = p - 1; ks >= k; ks--) {\n                if (ks === k) {\n                    break;\n                }\n                t = (ks !== p ? Math.abs(e[ks]) : 0) + (ks !== k + 1 ? Math.abs(e[ks - 1]) : 0);\n                if (Math.abs(s[ks]) <= eps * t) {\n                    s[ks] = 0;\n                    break;\n                }\n            }\n            if (ks === k) {\n                kase = 3;\n            } else if (ks === p - 1) {\n                kase = 1;\n            } else {\n                kase = 2;\n                k = ks;\n            }\n        }\n\n        k++;\n\n        switch (kase) {\n            case 1: {\n                f = e[p - 2];\n                e[p - 2] = 0;\n                for (j = p - 2; j >= k; j--) {\n                    t = hypotenuse(s[j], f);\n                    cs = s[j] / t;\n                    sn = f / t;\n                    s[j] = t;\n                    if (j !== k) {\n                        f = -sn * e[j - 1];\n                        e[j - 1] = cs * e[j - 1];\n                    }\n                    if (wantv) {\n                        for (i = 0; i < n; i++) {\n                            t = cs * V[i][j] + sn * V[i][p - 1];\n                            V[i][p - 1] = -sn * V[i][j] + cs * V[i][p - 1];\n                            V[i][j] = t;\n                        }\n                    }\n                }\n                break;\n            }\n            case 2 : {\n                f = e[k - 1];\n                e[k - 1] = 0;\n                for (j = k; j < p; j++) {\n                    t = hypotenuse(s[j], f);\n                    cs = s[j] / t;\n                    sn = f / t;\n                    s[j] = t;\n                    f = -sn * e[j];\n                    e[j] = cs * e[j];\n                    if (wantu) {\n                        for (i = 0; i < m; i++) {\n                            t = cs * U[i][j] + sn * U[i][k - 1];\n                            U[i][k - 1] = -sn * U[i][j] + cs * U[i][k - 1];\n                            U[i][j] = t;\n                        }\n                    }\n                }\n                break;\n            }\n            case 3 : {\n                scale = Math.max(Math.max(Math.max(Math.max(Math.abs(s[p - 1]), Math.abs(s[p - 2])), Math.abs(e[p - 2])), Math.abs(s[k])), Math.abs(e[k]));\n                sp = s[p - 1] / scale;\n                spm1 = s[p - 2] / scale;\n                epm1 = e[p - 2] / scale;\n                sk = s[k] / scale;\n                ek = e[k] / scale;\n                b = ((spm1 + sp) * (spm1 - sp) + epm1 * epm1) / 2;\n                c = (sp * epm1) * (sp * epm1);\n                shift = 0;\n                if ((b !== 0) || (c !== 0)) {\n                    shift = Math.sqrt(b * b + c);\n                    if (b < 0) {\n                        shift = -shift;\n                    }\n                    shift = c / (b + shift);\n                }\n                f = (sk + sp) * (sk - sp) + shift;\n                g = sk * ek;\n                for (j = k; j < p - 1; j++) {\n                    t = hypotenuse(f, g);\n                    cs = f / t;\n                    sn = g / t;\n                    if (j !== k) {\n                        e[j - 1] = t;\n                    }\n                    f = cs * s[j] + sn * e[j];\n                    e[j] = cs * e[j] - sn * s[j];\n                    g = sn * s[j + 1];\n                    s[j + 1] = cs * s[j + 1];\n                    if (wantv) {\n                        for (i = 0; i < n; i++) {\n                            t = cs * V[i][j] + sn * V[i][j + 1];\n                            V[i][j + 1] = -sn * V[i][j] + cs * V[i][j + 1];\n                            V[i][j] = t;\n                        }\n                    }\n                    t = hypotenuse(f, g);\n                    cs = f / t;\n                    sn = g / t;\n                    s[j] = t;\n                    f = cs * e[j] + sn * s[j + 1];\n                    s[j + 1] = -sn * e[j] + cs * s[j + 1];\n                    g = sn * e[j + 1];\n                    e[j + 1] = cs * e[j + 1];\n                    if (wantu && (j < m - 1)) {\n                        for (i = 0; i < m; i++) {\n                            t = cs * U[i][j] + sn * U[i][j + 1];\n                            U[i][j + 1] = -sn * U[i][j] + cs * U[i][j + 1];\n                            U[i][j] = t;\n                        }\n                    }\n                }\n                e[p - 2] = f;\n                iter = iter + 1;\n                break;\n            }\n            case 4: {\n                if (s[k] <= 0) {\n                    s[k] = (s[k] < 0 ? -s[k] : 0);\n                    if (wantv) {\n                        for (i = 0; i <= pp; i++) {\n                            V[i][k] = -V[i][k];\n                        }\n                    }\n                }\n                while (k < pp) {\n                    if (s[k] >= s[k + 1]) {\n                        break;\n                    }\n                    t = s[k];\n                    s[k] = s[k + 1];\n                    s[k + 1] = t;\n                    if (wantv && (k < n - 1)) {\n                        for (i = 0; i < n; i++) {\n                            t = V[i][k + 1];\n                            V[i][k + 1] = V[i][k];\n                            V[i][k] = t;\n                        }\n                    }\n                    if (wantu && (k < m - 1)) {\n                        for (i = 0; i < m; i++) {\n                            t = U[i][k + 1];\n                            U[i][k + 1] = U[i][k];\n                            U[i][k] = t;\n                        }\n                    }\n                    k++;\n                }\n                iter = 0;\n                p--;\n                break;\n            }\n            // no default\n        }\n    }\n\n    if (swapped) {\n        var tmp = V;\n        V = U;\n        U = tmp;\n    }\n\n    this.m = m;\n    this.n = n;\n    this.s = s;\n    this.U = U;\n    this.V = V;\n}\n\nSingularValueDecomposition.prototype = {\n    get condition() {\n        return this.s[0] / this.s[Math.min(this.m, this.n) - 1];\n    },\n    get norm2() {\n        return this.s[0];\n    },\n    get rank() {\n        var eps = Math.pow(2, -52),\n            tol = Math.max(this.m, this.n) * this.s[0] * eps,\n            r = 0,\n            s = this.s;\n        for (var i = 0, ii = s.length; i < ii; i++) {\n            if (s[i] > tol) {\n                r++;\n            }\n        }\n        return r;\n    },\n    get diagonal() {\n        return this.s;\n    },\n    // https://github.com/accord-net/framework/blob/development/Sources/Accord.Math/Decompositions/SingularValueDecomposition.cs\n    get threshold() {\n        return (Math.pow(2, -52) / 2) * Math.max(this.m, this.n) * this.s[0];\n    },\n    get leftSingularVectors() {\n        if (!Matrix.Matrix.isMatrix(this.U)) {\n            this.U = new Matrix.Matrix(this.U);\n        }\n        return this.U;\n    },\n    get rightSingularVectors() {\n        if (!Matrix.Matrix.isMatrix(this.V)) {\n            this.V = new Matrix.Matrix(this.V);\n        }\n        return this.V;\n    },\n    get diagonalMatrix() {\n        return Matrix.Matrix.diag(this.s);\n    },\n    solve: function (value) {\n\n        var Y = value,\n            e = this.threshold,\n            scols = this.s.length,\n            Ls = Matrix.Matrix.zeros(scols, scols),\n            i;\n\n        for (i = 0; i < scols; i++) {\n            if (Math.abs(this.s[i]) <= e) {\n                Ls[i][i] = 0;\n            } else {\n                Ls[i][i] = 1 / this.s[i];\n            }\n        }\n\n        var U = this.U;\n        var V = this.rightSingularVectors;\n\n        var VL = V.mmul(Ls),\n            vrows = V.rows,\n            urows = U.length,\n            VLU = Matrix.Matrix.zeros(vrows, urows),\n            j, k, sum;\n\n        for (i = 0; i < vrows; i++) {\n            for (j = 0; j < urows; j++) {\n                sum = 0;\n                for (k = 0; k < scols; k++) {\n                    sum += VL[i][k] * U[j][k];\n                }\n                VLU[i][j] = sum;\n            }\n        }\n\n        return VLU.mmul(Y);\n    },\n    solveForDiagonal: function (value) {\n        return this.solve(Matrix.Matrix.diag(value));\n    },\n    inverse: function () {\n        var V = this.V;\n        var e = this.threshold,\n            vrows = V.length,\n            vcols = V[0].length,\n            X = new Matrix.Matrix(vrows, this.s.length),\n            i, j;\n\n        for (i = 0; i < vrows; i++) {\n            for (j = 0; j < vcols; j++) {\n                if (Math.abs(this.s[j]) > e) {\n                    X[i][j] = V[i][j] / this.s[j];\n                } else {\n                    X[i][j] = 0;\n                }\n            }\n        }\n\n        var U = this.U;\n\n        var urows = U.length,\n            ucols = U[0].length,\n            Y = new Matrix.Matrix(vrows, urows),\n            k, sum;\n\n        for (i = 0; i < vrows; i++) {\n            for (j = 0; j < urows; j++) {\n                sum = 0;\n                for (k = 0; k < ucols; k++) {\n                    sum += X[i][k] * U[j][k];\n                }\n                Y[i][j] = sum;\n            }\n        }\n\n        return Y;\n    }\n};\n\nmodule.exports = SingularValueDecomposition;\n","'use strict';\n\nfunction compareNumbers(a, b) {\n    return a - b;\n}\n\n/**\n * Computes the sum of the given values\n * @param {Array} values\n * @returns {number}\n */\nexports.sum = function sum(values) {\n    var sum = 0;\n    for (var i = 0; i < values.length; i++) {\n        sum += values[i];\n    }\n    return sum;\n};\n\n/**\n * Computes the maximum of the given values\n * @param {Array} values\n * @returns {number}\n */\nexports.max = function max(values) {\n    var max = values[0];\n    var l = values.length;\n    for (var i = 1; i < l; i++) {\n        if (values[i] > max) max = values[i];\n    }\n    return max;\n};\n\n/**\n * Computes the minimum of the given values\n * @param {Array} values\n * @returns {number}\n */\nexports.min = function min(values) {\n    var min = values[0];\n    var l = values.length;\n    for (var i = 1; i < l; i++) {\n        if (values[i] < min) min = values[i];\n    }\n    return min;\n};\n\n/**\n * Computes the min and max of the given values\n * @param {Array} values\n * @returns {{min: number, max: number}}\n */\nexports.minMax = function minMax(values) {\n    var min = values[0];\n    var max = values[0];\n    var l = values.length;\n    for (var i = 1; i < l; i++) {\n        if (values[i] < min) min = values[i];\n        if (values[i] > max) max = values[i];\n    }\n    return {\n        min: min,\n        max: max\n    };\n};\n\n/**\n * Computes the arithmetic mean of the given values\n * @param {Array} values\n * @returns {number}\n */\nexports.arithmeticMean = function arithmeticMean(values) {\n    var sum = 0;\n    var l = values.length;\n    for (var i = 0; i < l; i++) {\n        sum += values[i];\n    }\n    return sum / l;\n};\n\n/**\n * {@link arithmeticMean}\n */\nexports.mean = exports.arithmeticMean;\n\n/**\n * Computes the geometric mean of the given values\n * @param {Array} values\n * @returns {number}\n */\nexports.geometricMean = function geometricMean(values) {\n    var mul = 1;\n    var l = values.length;\n    for (var i = 0; i < l; i++) {\n        mul *= values[i];\n    }\n    return Math.pow(mul, 1 / l);\n};\n\n/**\n * Computes the mean of the log of the given values\n * If the return value is exponentiated, it gives the same result as the\n * geometric mean.\n * @param {Array} values\n * @returns {number}\n */\nexports.logMean = function logMean(values) {\n    var lnsum = 0;\n    var l = values.length;\n    for (var i = 0; i < l; i++) {\n        lnsum += Math.log(values[i]);\n    }\n    return lnsum / l;\n};\n\n/**\n * Computes the weighted grand mean for a list of means and sample sizes\n * @param {Array} means - Mean values for each set of samples\n * @param {Array} samples - Number of original values for each set of samples\n * @returns {number}\n */\nexports.grandMean = function grandMean(means, samples) {\n    var sum = 0;\n    var n = 0;\n    var l = means.length;\n    for (var i = 0; i < l; i++) {\n        sum += samples[i] * means[i];\n        n += samples[i];\n    }\n    return sum / n;\n};\n\n/**\n * Computes the truncated mean of the given values using a given percentage\n * @param {Array} values\n * @param {number} percent - The percentage of values to keep (range: [0,1])\n * @param {boolean} [alreadySorted=false]\n * @returns {number}\n */\nexports.truncatedMean = function truncatedMean(values, percent, alreadySorted) {\n    if (alreadySorted === undefined) alreadySorted = false;\n    if (!alreadySorted) {\n        values = [].concat(values).sort(compareNumbers);\n    }\n    var l = values.length;\n    var k = Math.floor(l * percent);\n    var sum = 0;\n    for (var i = k; i < (l - k); i++) {\n        sum += values[i];\n    }\n    return sum / (l - 2 * k);\n};\n\n/**\n * Computes the harmonic mean of the given values\n * @param {Array} values\n * @returns {number}\n */\nexports.harmonicMean = function harmonicMean(values) {\n    var sum = 0;\n    var l = values.length;\n    for (var i = 0; i < l; i++) {\n        if (values[i] === 0) {\n            throw new RangeError('value at index ' + i + 'is zero');\n        }\n        sum += 1 / values[i];\n    }\n    return l / sum;\n};\n\n/**\n * Computes the contraharmonic mean of the given values\n * @param {Array} values\n * @returns {number}\n */\nexports.contraHarmonicMean = function contraHarmonicMean(values) {\n    var r1 = 0;\n    var r2 = 0;\n    var l = values.length;\n    for (var i = 0; i < l; i++) {\n        r1 += values[i] * values[i];\n        r2 += values[i];\n    }\n    if (r2 < 0) {\n        throw new RangeError('sum of values is negative');\n    }\n    return r1 / r2;\n};\n\n/**\n * Computes the median of the given values\n * @param {Array} values\n * @param {boolean} [alreadySorted=false]\n * @returns {number}\n */\nexports.median = function median(values, alreadySorted) {\n    if (alreadySorted === undefined) alreadySorted = false;\n    if (!alreadySorted) {\n        values = [].concat(values).sort(compareNumbers);\n    }\n    var l = values.length;\n    var half = Math.floor(l / 2);\n    if (l % 2 === 0) {\n        return (values[half - 1] + values[half]) * 0.5;\n    } else {\n        return values[half];\n    }\n};\n\n/**\n * Computes the variance of the given values\n * @param {Array} values\n * @param {boolean} [unbiased=true] - if true, divide by (n-1); if false, divide by n.\n * @returns {number}\n */\nexports.variance = function variance(values, unbiased) {\n    if (unbiased === undefined) unbiased = true;\n    var theMean = exports.mean(values);\n    var theVariance = 0;\n    var l = values.length;\n\n    for (var i = 0; i < l; i++) {\n        var x = values[i] - theMean;\n        theVariance += x * x;\n    }\n\n    if (unbiased) {\n        return theVariance / (l - 1);\n    } else {\n        return theVariance / l;\n    }\n};\n\n/**\n * Computes the standard deviation of the given values\n * @param {Array} values\n * @param {boolean} [unbiased=true] - if true, divide by (n-1); if false, divide by n.\n * @returns {number}\n */\nexports.standardDeviation = function standardDeviation(values, unbiased) {\n    return Math.sqrt(exports.variance(values, unbiased));\n};\n\nexports.standardError = function standardError(values) {\n    return exports.standardDeviation(values) / Math.sqrt(values.length);\n};\n\n/**\n * IEEE Transactions on biomedical engineering, vol. 52, no. 1, january 2005, p. 76-\n * Calculate the standard deviation via the Median of the absolute deviation\n *  The formula for the standard deviation only holds for Gaussian random variables.\n * @returns {{mean: number, stdev: number}}\n */\nexports.robustMeanAndStdev = function robustMeanAndStdev(y) {\n    var mean = 0, stdev = 0;\n    var length = y.length, i = 0;\n    for (i = 0; i < length; i++) {\n        mean += y[i];\n    }\n    mean /= length;\n    var averageDeviations = new Array(length);\n    for (i = 0; i < length; i++)\n        averageDeviations[i] = Math.abs(y[i] - mean);\n    averageDeviations.sort(compareNumbers);\n    if (length % 2 === 1) {\n        stdev = averageDeviations[(length - 1) / 2] / 0.6745;\n    } else {\n        stdev = 0.5 * (averageDeviations[length / 2] + averageDeviations[length / 2 - 1]) / 0.6745;\n    }\n\n    return {\n        mean: mean,\n        stdev: stdev\n    };\n};\n\nexports.quartiles = function quartiles(values, alreadySorted) {\n    if (typeof (alreadySorted) === 'undefined') alreadySorted = false;\n    if (!alreadySorted) {\n        values = [].concat(values).sort(compareNumbers);\n    }\n\n    var quart = values.length / 4;\n    var q1 = values[Math.ceil(quart) - 1];\n    var q2 = exports.median(values, true);\n    var q3 = values[Math.ceil(quart * 3) - 1];\n\n    return {q1: q1, q2: q2, q3: q3};\n};\n\nexports.pooledStandardDeviation = function pooledStandardDeviation(samples, unbiased) {\n    return Math.sqrt(exports.pooledVariance(samples, unbiased));\n};\n\nexports.pooledVariance = function pooledVariance(samples, unbiased) {\n    if (typeof (unbiased) === 'undefined') unbiased = true;\n    var sum = 0;\n    var length = 0, l = samples.length;\n    for (var i = 0; i < l; i++) {\n        var values = samples[i];\n        var vari = exports.variance(values);\n\n        sum += (values.length - 1) * vari;\n\n        if (unbiased)\n            length += values.length - 1;\n        else\n            length += values.length;\n    }\n    return sum / length;\n};\n\nexports.mode = function mode(values) {\n    var l = values.length,\n        itemCount = new Array(l),\n        i;\n    for (i = 0; i < l; i++) {\n        itemCount[i] = 0;\n    }\n    var itemArray = new Array(l);\n    var count = 0;\n\n    for (i = 0; i < l; i++) {\n        var index = itemArray.indexOf(values[i]);\n        if (index >= 0)\n            itemCount[index]++;\n        else {\n            itemArray[count] = values[i];\n            itemCount[count] = 1;\n            count++;\n        }\n    }\n\n    var maxValue = 0, maxIndex = 0;\n    for (i = 0; i < count; i++) {\n        if (itemCount[i] > maxValue) {\n            maxValue = itemCount[i];\n            maxIndex = i;\n        }\n    }\n\n    return itemArray[maxIndex];\n};\n\nexports.covariance = function covariance(vector1, vector2, unbiased) {\n    if (typeof (unbiased) === 'undefined') unbiased = true;\n    var mean1 = exports.mean(vector1);\n    var mean2 = exports.mean(vector2);\n\n    if (vector1.length !== vector2.length)\n        throw 'Vectors do not have the same dimensions';\n\n    var cov = 0, l = vector1.length;\n    for (var i = 0; i < l; i++) {\n        var x = vector1[i] - mean1;\n        var y = vector2[i] - mean2;\n        cov += x * y;\n    }\n\n    if (unbiased)\n        return cov / (l - 1);\n    else\n        return cov / l;\n};\n\nexports.skewness = function skewness(values, unbiased) {\n    if (typeof (unbiased) === 'undefined') unbiased = true;\n    var theMean = exports.mean(values);\n\n    var s2 = 0, s3 = 0, l = values.length;\n    for (var i = 0; i < l; i++) {\n        var dev = values[i] - theMean;\n        s2 += dev * dev;\n        s3 += dev * dev * dev;\n    }\n    var m2 = s2 / l;\n    var m3 = s3 / l;\n\n    var g = m3 / (Math.pow(m2, 3 / 2.0));\n    if (unbiased) {\n        var a = Math.sqrt(l * (l - 1));\n        var b = l - 2;\n        return (a / b) * g;\n    } else {\n        return g;\n    }\n};\n\nexports.kurtosis = function kurtosis(values, unbiased) {\n    if (typeof (unbiased) === 'undefined') unbiased = true;\n    var theMean = exports.mean(values);\n    var n = values.length, s2 = 0, s4 = 0;\n\n    for (var i = 0; i < n; i++) {\n        var dev = values[i] - theMean;\n        s2 += dev * dev;\n        s4 += dev * dev * dev * dev;\n    }\n    var m2 = s2 / n;\n    var m4 = s4 / n;\n\n    if (unbiased) {\n        var v = s2 / (n - 1);\n        var a = (n * (n + 1)) / ((n - 1) * (n - 2) * (n - 3));\n        var b = s4 / (v * v);\n        var c = ((n - 1) * (n - 1)) / ((n - 2) * (n - 3));\n\n        return a * b - 3 * c;\n    } else {\n        return m4 / (m2 * m2) - 3;\n    }\n};\n\nexports.entropy = function entropy(values, eps) {\n    if (typeof (eps) === 'undefined') eps = 0;\n    var sum = 0, l = values.length;\n    for (var i = 0; i < l; i++)\n        sum += values[i] * Math.log(values[i] + eps);\n    return -sum;\n};\n\nexports.weightedMean = function weightedMean(values, weights) {\n    var sum = 0, l = values.length;\n    for (var i = 0; i < l; i++)\n        sum += values[i] * weights[i];\n    return sum;\n};\n\nexports.weightedStandardDeviation = function weightedStandardDeviation(values, weights) {\n    return Math.sqrt(exports.weightedVariance(values, weights));\n};\n\nexports.weightedVariance = function weightedVariance(values, weights) {\n    var theMean = exports.weightedMean(values, weights);\n    var vari = 0, l = values.length;\n    var a = 0, b = 0;\n\n    for (var i = 0; i < l; i++) {\n        var z = values[i] - theMean;\n        var w = weights[i];\n\n        vari += w * (z * z);\n        b += w;\n        a += w * w;\n    }\n\n    return vari * (b / (b * b - a));\n};\n\nexports.center = function center(values, inPlace) {\n    if (typeof (inPlace) === 'undefined') inPlace = false;\n\n    var result = values;\n    if (!inPlace)\n        result = [].concat(values);\n\n    var theMean = exports.mean(result), l = result.length;\n    for (var i = 0; i < l; i++)\n        result[i] -= theMean;\n};\n\nexports.standardize = function standardize(values, standardDev, inPlace) {\n    if (typeof (standardDev) === 'undefined') standardDev = exports.standardDeviation(values);\n    if (typeof (inPlace) === 'undefined') inPlace = false;\n    var l = values.length;\n    var result = inPlace ? values : new Array(l);\n    for (var i = 0; i < l; i++)\n        result[i] = values[i] / standardDev;\n    return result;\n};\n\nexports.cumulativeSum = function cumulativeSum(array) {\n    var l = array.length;\n    var result = new Array(l);\n    result[0] = array[0];\n    for (var i = 1; i < l; i++)\n        result[i] = result[i - 1] + array[i];\n    return result;\n};\n","/**\n * Created by acastillo on 8/24/15.\n */\n/**\n * Non in-place function definitions, compatible with mathjs code *\n */\n\n'use strict';\n\nvar Matrix = require('ml-matrix');\n\nfunction matrix(A,B){\n    return new Matrix(A,B);\n}\n\nfunction ones(rows, cols){\n    return Matrix.ones(rows,cols);\n}\n\nfunction eye(rows, cols){\n    return Matrix.eye(rows, cols);\n}\n\nfunction zeros(rows, cols){\n    return Matrix.zeros(rows, cols);\n}\n\nfunction random(rows, cols){\n    return Matrix.rand(rows,cols);\n}\n\nfunction transpose(A){\n    if(typeof A == 'number')\n        return A;\n    var result = A.clone();\n    return result.transpose();\n}\n\nfunction add(A, B){\n    if(typeof A == 'number'&&typeof B === 'number')\n        return A+B;\n    if(typeof A == 'number')\n        return this.add(B,A);\n\n    var result = A.clone();\n    return result.add(B);\n\n}\n\nfunction subtract(A, B){\n    if(typeof A == 'number'&&typeof B === 'number')\n        return A-B;\n    if(typeof A == 'number')\n        return this.subtract(B,A);\n    var result = A.clone();\n    return result.sub(B);\n}\n\nfunction multiply(A, B){\n    if(typeof A == 'number'&&typeof B === 'number')\n        return A*B;\n    if(typeof A == 'number')\n        return this.multiply(B,A);\n\n    var result = A.clone();\n\n    if(typeof B === 'number')\n        result.mul(B);\n    else\n        result = result.mmul(B);\n\n    if(result.rows==1&&result.columns==1)\n        return result[0][0];\n    else\n        return result;\n\n}\n\nfunction dotMultiply(A, B){\n    var result = A.clone();\n    return result.mul(B);\n}\n\nfunction dotDivide(A, B){\n    var result = A.clone();\n    return result.div(B);\n}\n\nfunction diag(A){\n    var diag = null;\n    var rows = A.rows, cols = A.columns, j, r;\n    //It is an array\n    if(typeof cols === \"undefined\" && (typeof A)=='object'){\n        if(A[0]&&A[0].length){\n            rows = A.length;\n            cols = A[0].length;\n            r = Math.min(rows,cols);\n            diag = Matrix.zeros(cols, cols);\n            for (j = 0; j < cols; j++) {\n                diag[j][j]=A[j][j];\n            }\n        }\n        else{\n            cols = A.length;\n            diag = Matrix.zeros(cols, cols);\n            for (j = 0; j < cols; j++) {\n                diag[j][j]=A[j];\n            }\n        }\n\n    }\n    if(rows == 1){\n        diag = Matrix.zeros(cols, cols);\n        for (j = 0; j < cols; j++) {\n            diag[j][j]=A[0][j];\n        }\n    }\n    else{\n        if(rows>0 && cols > 0){\n            r = Math.min(rows,cols);\n            diag = new Array(r);\n            for (j = 0; j < r; j++) {\n                diag[j] = A[j][j];\n            }\n        }\n    }\n    return diag;\n}\n\nfunction min(A, B){\n    if(typeof A==='number' && typeof B ==='number')\n        return Math.min(A,B);\n    var ii = A.rows, jj = A.columns;\n    var result = new Matrix(ii,jj);\n    for (var i = 0; i < ii; i++) {\n        for (var j = 0; j < jj; j++) {\n            if (A[i][j] < B[i][j]) {\n                result[i][j] = A[i][j];\n            }\n            else{\n                result[i][j] = B[i][j];\n            }\n        }\n    }\n    return result;\n}\n\nfunction max(A, B){\n    if(typeof A==='number' && typeof B ==='number')\n        return Math.max(A,B);\n    var ii = A.rows, jj = A.columns;\n    var result = new Matrix(ii,jj);\n    for (var i = 0; i < ii; i++) {\n        for (var j = 0; j < jj; j++) {\n            if (A[i][j] > B[i][j]) {\n                result[i][j] = A[i][j];\n            }\n            else{\n                result[i][j] = B[i][j];\n            }\n        }\n    }\n    return result;\n}\n\nfunction sqrt(A){\n    if(typeof A==='number' )\n        return Math.sqrt(A);\n    var ii = A.rows, jj = A.columns;\n    var result = new Matrix(ii,jj);\n    for (var i = 0; i < ii; i++) {\n        for (var j = 0; j < jj; j++) {\n            result[i][j] = Math.sqrt(A[i][j]);\n\n        }\n    }\n    return result;\n}\n\nfunction abs(A){\n    if(typeof A==='number' )\n        return Math.abs(A);\n    var ii = A.rows, jj = A.columns;\n    var result = new Matrix(ii,jj);\n    for (var i = 0; i < ii; i++) {\n        for (var j = 0; j < jj; j++) {\n            result[i][j] = Math.abs(A[i][j]);\n\n        }\n    }\n    return result;\n}\n\nfunction exp(A){\n    if(typeof A==='number' )\n        return Math.sqrt(A);\n    var ii = A.rows, jj = A.columns;\n    var result = new Matrix(ii,jj);\n    for (var i = 0; i < ii; i++) {\n        for (var j = 0; j < jj; j++) {\n            result[i][j] = Math.exp(A[i][j]);\n        }\n    }\n    return result;\n}\n\nfunction dotPow(A, b){\n    if(typeof A==='number' )\n        return Math.pow(A,b);\n    //console.log(A);\n    var ii = A.rows, jj = A.columns;\n    var result = new Matrix(ii,jj);\n    for (var i = 0; i < ii; i++) {\n        for (var j = 0; j < jj; j++) {\n            result[i][j] = Math.pow(A[i][j],b);\n        }\n    }\n    return result;\n}\n\nfunction solve(A, B){\n    return A.solve(B);\n}\n\nfunction inv(A){\n    if(typeof A ===\"number\")\n        return 1/A;\n    return A.inverse();\n}\n\nmodule.exports = {\n    transpose:transpose,\n    add:add,\n    subtract:subtract,\n    multiply:multiply,\n    dotMultiply:dotMultiply,\n    dotDivide:dotDivide,\n    diag:diag,\n    min:min,\n    max:max,\n    solve:solve,\n    inv:inv,\n    sqrt:sqrt,\n    exp:exp,\n    dotPow:dotPow,\n    abs:abs,\n    matrix:matrix,\n    ones:ones,\n    zeros:zeros,\n    random:random,\n    eye:eye\n};\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","'use strict';\n\n/**\n * In place modification of the 2 arrays to make X unique and sum the Y if X has the same value\n * @param xs\n * @param ys\n */\n\nfunction uniqueX(xs, ys) {\n    if (xs.length < 2) return;\n\n    var current = xs[0];\n    var counter = 0;\n\n    for (var i = 1; i < xs.length; i++) {\n        if (current !== xs[i]) {\n            counter++;\n            current = xs[i];\n            xs[counter] = xs[i];\n            if (i !== counter) {\n                ys[counter] = 0;\n            }\n        }\n        if (i !== counter) {\n            ys[counter] += ys[i];\n        }\n\n    }\n\n    xs.length = counter + 1;\n    ys.length = counter + 1;\n}\n\nmodule.exports = uniqueX;\n","/**\n * @function first\n *\n * @description\n * get the first n number of items from the array as a new array (faster than native splice)\n *\n * @param {Array<any>} array the array to get the items from\n * @param {number} length the length to limit the size to\n * @returns {Array<any>} the array limited in size\n */\nexport var first = function first(array, length) {\n  var newArray = new Array(length);\n\n  for (var index = 0; index < length; index++) {\n    newArray[index] = array[index];\n  }\n\n  return newArray;\n};\n/**\n * @function getCircularValue\n *\n * @description\n * create a method that will get a placeholder for the circular value based\n * on the value saved in the cache for it\n *\n * @param {any} key the key of the object to stringify\n * @param {any} value the value of the object at key\n * @param {number} refCount the index of the ref\n * @returns {string} the circular value\n */\n\nexport var getCircularValue = function getCircularValue(key, value, refCount) {\n  return \"[ref-\" + refCount + \"]\";\n};\n/**\n * @function getValue\n *\n * @description\n * get the value passed (similar to an identity function)\n *\n * @param {any} key the key of the object to stringify\n * @param {any} value the value of the object at key\n * @returns {any} the value passed\n */\n\nexport var getValue = function getValue(key, value) {\n  return value;\n};\n/**\n * @function indexOf\n *\n * @description\n * get the index of the value in the array (faster than native indexOf)\n *\n * @param {Array<any>} array the array to get the index of the value at\n * @param {any} value the value to match\n * @returns {number} the index of the value in array\n */\n\nexport var indexOf = function indexOf(array, value) {\n  for (var index = 0; index < array.length; index++) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n\n  return -1;\n};\n/**\n * @function createReplacer\n *\n * @description\n * create a replacer method that handles circular values\n *\n * @param {function} [replacer] a custom replacer to use for non-circular values\n * @param {function} [circularReplacer] a custom replacer to use for circular methods\n * @returns {any} the value to stringify\n */\n\nexport var createReplacer = function createReplacer(replacer, circularReplacer) {\n  var getCircularReplacer = circularReplacer || getCircularValue;\n  var hasReplacer = typeof replacer === 'function';\n  var cache = [],\n      locationOfThis,\n      locationOfValue;\n  return function (key, value) {\n    if (cache.length) {\n      locationOfThis = indexOf(cache, this);\n\n      if (~locationOfThis) {\n        cache = first(cache, locationOfThis + 1);\n      } else {\n        cache[cache.length] = this;\n      }\n\n      locationOfValue = indexOf(cache, value);\n\n      if (~locationOfValue) {\n        return getCircularReplacer.call(this, key, value, locationOfValue);\n      }\n    } else {\n      cache[0] = value;\n    }\n\n    return hasReplacer ? replacer.call(this, key, value) : value;\n  };\n};","// utils\nimport { createReplacer } from './utils';\n/**\n * @function stringify\n *\n * @description\n * strinigifer that handles circular values\n *\n * @param {any} value the value to stringify\n * @param {function} [replacer] a custom replacer function for stringifying standard values\n * @param {number} [indent] the number of spaces to indent the output by\n * @param {function} [circularReplacer] a custom replacer function for stringifying circular values\n * @returns {string} the stringified output\n */\n\nexport default function stringify(value, replacer, indent, circularReplacer) {\n  return JSON.stringify(value, createReplacer(replacer, circularReplacer), indent);\n}","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar min = _interopDefault(require('ml-array-min'));\nvar max = _interopDefault(require('ml-array-max'));\nvar filterX = _interopDefault(require('ml-array-xy-filter-x'));\nvar mlGsd = require('ml-gsd');\nvar equallySpaced = _interopDefault(require('ml-array-xy-equally-spaced'));\nvar Util = _interopDefault(require('ml-array-utils'));\nvar hash = _interopDefault(require('hash-it'));\nvar jcampconverter = require('jcampconverter');\nvar xyParser = require('xy-parser');\n\nconst ABSORBANCE = 1;\nconst TRANSMITTANCE = 2;\nconst PERCENT_TRANSMITTANCE = 3;\n\nfunction getKind(kind = '') {\n  if (typeof kind === 'number') {\n    if (kind < 1 || kind > 2) {\n      throw new Error('kind should either be 1 or 2');\n    }\n    return kind;\n  }\n  if (kind.match(/abs/i)) {\n    return ABSORBANCE;\n  }\n  return TRANSMITTANCE;\n}\n\n/**\n * Create an object of Chromatogram\n * @return {object}\n */\nfunction toJSON() {\n  return {\n    wavelength: this.wavelength,\n    transmittance: this.transmittance,\n    peaks: this.peaks\n  };\n}\n\nfunction getAnnotations(spectrum, options = {}) {\n  const { fillColor = 'green', strokeColor = 'red', creationFct } = options;\n  const peaks = spectrum.peaks;\n  if (!peaks) return [];\n  let annotations = peaks.map((peak) => {\n    var annotation = {\n      line: 1,\n      type: 'rect',\n      strokeColor: strokeColor,\n      strokeWidth: 0,\n      fillColor: fillColor\n    };\n    if (creationFct) {\n      creationFct(annotation, peak);\n    }\n    switch (spectrum.mode) {\n      case ABSORBANCE:\n        annotationAbsorbance(annotation, peak);\n        break;\n      case TRANSMITTANCE:\n        annotationTransmittance(annotation, peak, 1);\n        break;\n      case PERCENT_TRANSMITTANCE:\n        annotationTransmittance(annotation, peak, 100);\n        break;\n      default:\n    }\n    return annotation;\n  });\n\n  return annotations;\n}\n\nfunction annotationTransmittance(annotation, peak, factor = 1) {\n  annotation.label = [\n    {\n      text: peak.kind,\n      size: '18px',\n      anchor: 'middle',\n      color: 'red',\n      position: {\n        x: peak.wavelength,\n        y: peak.transmittance * factor,\n        dy: '23px'\n      }\n    }\n  ];\n  annotation.position = [\n    {\n      x: peak.wavelength,\n      y: peak.transmittance * factor,\n      dy: '10px',\n      dx: '-1px'\n    },\n    {\n      x: peak.wavelength,\n      y: peak.transmittance * factor,\n      dy: '5px',\n      dx: '1px'\n    }\n  ];\n}\n\nfunction annotationAbsorbance(annotation, peak) {\n  annotation.label = [\n    {\n      text: peak.kind,\n      size: '18px',\n      anchor: 'middle',\n      color: 'red',\n      position: {\n        x: peak.wavelength,\n        y: peak.absorbance,\n        dy: '-15px'\n      }\n    }\n  ];\n  annotation.position = [\n    {\n      x: peak.wavelength,\n      y: peak.absorbance,\n      dy: '-10px',\n      dx: '-1px'\n    },\n    {\n      x: peak.wavelength,\n      y: peak.absorbance,\n      dy: '-5px',\n      dx: '1px'\n    }\n  ];\n}\n\n/**\n *\n * @param {*} spectrum\n * @param {object} [options={}]\n *\n */\n\nfunction getData(spectrum, options = {}) {\n  const { mode = options.mode || spectrum.mode, filter } = options;\n\n  let data = { x: [], y: [] };\n  switch (mode) {\n    case ABSORBANCE:\n      data = spectrum.getAbsorbance();\n      break;\n    case TRANSMITTANCE:\n      data = spectrum.getTransmittance();\n      break;\n    case PERCENT_TRANSMITTANCE:\n      data = spectrum.getPercentTransmittance();\n      break;\n    default:\n  }\n  if (filter) {\n    data = filterX(data, filter);\n  }\n  return data;\n}\n\n/**\n *\n * @param {Spectrum} spectrum\n * @param {object} peak\n */\n\nfunction addPeak(spectrum, peak = {}) {\n  if (!peak.wavelength) {\n    throw new Error('addPeak: peak mush have wavelength property');\n  }\n  if (!peak.absorbance && !peak.transmittance) {\n    throw new Error(\n      'addPeak: peak mush have either absorbance of transmittance property'\n    );\n  }\n  const {\n    wavelength,\n    transmittance = 10 ** -peak.absorbance,\n    absorbance = -Math.log10(peak.transmittance)\n  } = peak;\n\n  for (let existing of spectrum.peaks) {\n    if (Number(existing.wavelength) === wavelength) return existing;\n  }\n  spectrum.peaks.push({\n    wavelength: wavelength,\n    transmittance: transmittance,\n    absorbance: absorbance,\n    kind: getPeakKind(\n      transmittance,\n      spectrum.minTransmittance,\n      spectrum.maxTransmittance\n    )\n  });\n  return peak;\n}\n\nfunction getPeakKind(transmittance, minTransmittance, maxTransmittance) {\n  var position =\n    (maxTransmittance - transmittance) / (maxTransmittance - minTransmittance);\n  if (position < 0.33) {\n    return 'w';\n  } else if (position < 0.66) {\n    return 'm';\n  }\n  return 'S';\n}\n\n/**\n *\n * @param {Spectrum} spectrum\n * @param {number} targetWavelength\n * @param {object} [options]\n * @param {number} [options.range=0] Search in a range around the targetWavelength\n * @param {boolean} [options.optimize=false] Search for the closest peak to the targetWavelength\n */\n\nfunction peakPicking(spectrum, targetWavelength, options = {}) {\n  const { range = 0, optimize = false } = options;\n\n  // find the peak that is the closest to the click\n  let bestPeak = getClosest(spectrum, targetWavelength);\n\n  if (optimize) {\n    findClosest(spectrum, bestPeak);\n  } else if (range) {\n    bestInRange(spectrum, bestPeak, targetWavelength, range);\n  }\n\n  return addPeak(spectrum, bestPeak);\n}\n\nfunction getClosest(spectrum, targetWavelength) {\n  let bestPeak = {\n    transmittance: spectrum.transmittance[0],\n    absorbance: spectrum.absorbance[0],\n    wavelength: spectrum.wavelength[0],\n    index: 0\n  };\n\n  let error = Math.abs(targetWavelength - bestPeak.wavelength);\n  for (let i = 1; i < spectrum.wavelength.length; i++) {\n    let newError = Math.abs(targetWavelength - spectrum.wavelength[i]);\n    if (newError < error) {\n      error = newError;\n      setBestPeak(spectrum, bestPeak, i);\n    }\n  }\n  return bestPeak;\n}\n\nfunction bestInRange(spectrum, bestPeak, targetWavelength, range) {\n  // we search the minimum based on wavelength +/- range\n  for (let i = 0; i < spectrum.wavelength.length; i++) {\n    if (Math.abs(spectrum.wavelength[i] - targetWavelength) <= range) {\n      if (spectrum.transmittance[i] < bestPeak.transmittance) {\n        setBestPeak(spectrum, bestPeak, i);\n      }\n    }\n  }\n}\n\nfunction findClosest(spectrum, bestPeak) {\n  let index = bestPeak.index;\n  let previousIndex;\n  while (index !== previousIndex) {\n    previousIndex = index;\n    if (index > 0 && spectrum.absorbance[index - 1] > bestPeak.absorbance) {\n      index--;\n      setBestPeak(spectrum, bestPeak, index);\n    } else if (\n      index < spectrum.wavelength.length - 1 &&\n      spectrum.absorbance[index + 1] > bestPeak.absorbance\n    ) {\n      index++;\n      setBestPeak(spectrum, bestPeak, index);\n    }\n  }\n}\n\nfunction setBestPeak(spectrum, bestPeak, index) {\n  bestPeak.index = index;\n  bestPeak.wavelength = spectrum.wavelength[index];\n  bestPeak.absorbance = spectrum.absorbance[index];\n  bestPeak.transmittance = spectrum.transmittance[index];\n}\n\n/**\n *\n * @param {*} spectrum\n * @param {object} [options={}]\n * @param {number} [options.fromWavelength=0]\n * @param {number} [options.toWavelength=5000]\n * @param {number} [options.noiseLevel=0.01] - Specify the level of the noise\n * @param {number} [options.minMaxRatio=0.05] - Threshold to determine if a given peak should be considered as a noise\n * @param {boolean} [options.replaceExisting=true] - Replace existing peaks\n */\n\nfunction autoPeakPicking(spectrum, options = {}) {\n  const {\n    noiseLevel = 0.001,\n    minMaxRatio = 0.05,\n    fromWavelength = 0,\n    toWavelength = 5000,\n    replaceExisting = true\n  } = options;\n\n  let peaks = mlGsd.gsd(spectrum.wavelength, spectrum.absorbance, {\n    noiseLevel,\n    minMaxRatio,\n    realTopDetection: true,\n    maxCriteria: true,\n    smoothY: false,\n    sgOptions: { windowSize: 7, polynomial: 3 }\n  });\n\n  peaks = peaks.filter(\n    (peak) => peak.x >= fromWavelength && peak.x <= toWavelength\n  );\n\n  if (replaceExisting) {\n    while (spectrum.peaks.length) {\n      spectrum.peaks.pop();\n    }\n  }\n\n  peakLoop: for (let peak of peaks) {\n    for (let existing of spectrum.peaks) {\n      if (Number(existing.wavelength) === Number(peak.x)) continue peakLoop;\n    }\n    addPeak(spectrum, {\n      wavelength: peak.x,\n      absorbance: peak.y\n    });\n  }\n}\n\nfunction getNormalized(spectrum, options = {}) {\n  let optionsHash = hash(options);\n\n  if (!spectrum.cache) spectrum.cache = {};\n  if (!spectrum.cache.normalized) spectrum.cache.normalized = {};\n  if (spectrum.cache.normalized.hash === optionsHash) {\n    return spectrum.cache.normalized.value;\n  }\n  let {\n    from = 800,\n    to = 4000,\n    numberOfPoints = 1024,\n    applySNV = true,\n    exclusions = []\n  } = options;\n  let y = applySNV ? Util.SNV(spectrum.absorbance) : spectrum.absorbance;\n  let result = equallySpaced(\n    { x: spectrum.wavelength, y },\n    { from, to, numberOfPoints, exclusions }\n  );\n  spectrum.cache.normalized = {\n    hash: optionsHash,\n    value: result\n  };\n\n  return result;\n}\n\nfunction getYLabel(mode) {\n  switch (mode) {\n    case ABSORBANCE:\n      return 'Absorbance';\n    case TRANSMITTANCE:\n      return 'Transmittance';\n    case PERCENT_TRANSMITTANCE:\n      return 'Transmittance [%]';\n    default:\n      return '';\n  }\n}\n\n/**\n * Class allowing manipulate one IR spectrum\n * @class spectrum\n * @param {object} [json={}] - object containing a spectrum\n * @param {Array} [json.wavelength=[]] - wavelength\n * @param {Array} [json.y=[]] - y values\n * @param {integer} [json.kind=spectrum.TRANSMITTANCE] - either spectrum.ABSORBANCE or spectrum.TRANSMITTANCE\n */\nclass Spectrum {\n  constructor(json = {}) {\n    this.wavelength = json.wavelength || [];\n    this.absorbance = json.absorbance || [];\n    this.transmittance = json.transmittance || [];\n    this.mode = PERCENT_TRANSMITTANCE;\n    this.peaks = [];\n    this.clearCache();\n    check(this);\n  }\n\n  /**\n   *\n   * @param {Array} [peaks=[]] array of peaks. Peaks are composed of transmittance, wavelength, kind\n   */\n  setPeaks(peaks = []) {\n    this.peaks = peaks;\n  }\n\n  setMode(mode) {\n    if (mode < 1 || mode > 3) {\n      throw new Error(\n        'Mode should be either 1 (absorbance), 2 (transmittance) or 3 (percent transmittance)'\n      );\n    }\n    this.mode = mode;\n  }\n\n  peakPicking(targetWavelength, options = {}) {\n    peakPicking(this, targetWavelength, options);\n  }\n\n  getAbsorbance() {\n    return { x: this.wavelength, y: this.absorbance };\n  }\n\n  getTransmittance() {\n    return { x: this.wavelength, y: this.transmittance };\n  }\n\n  getPercentTransmittance() {\n    let data = this.getTransmittance();\n    return {\n      x: data.x,\n      y: data.y.map((transmittance) => transmittance * 100)\n    };\n  }\n\n  clearCache() {\n    this.cache = { normalized: { hash: '' } };\n  }\n\n  getYLabel() {\n    return getYLabel(this.mode);\n  }\n}\n\nSpectrum.getYLabel = getYLabel;\n\nSpectrum.prototype.toJSON = toJSON;\nSpectrum.prototype.getAnnotations = function (options) {\n  return getAnnotations(this, options);\n};\nSpectrum.prototype.getData = function (options) {\n  return getData(this, options);\n};\nSpectrum.prototype.autoPeakPicking = function (options) {\n  return autoPeakPicking(this, options);\n};\nSpectrum.prototype.getNormalized = function (options) {\n  return getNormalized(this, options);\n};\n\nfunction check(spectrum) {\n  if (spectrum.transmittance.length > 0 && spectrum.absorbance.length === 0) {\n    spectrum.absorbance = spectrum.transmittance.map(\n      (transmittance) => -Math.log10(transmittance)\n    );\n  }\n\n  if (spectrum.absorbance.length > 0 && spectrum.transmittance.length === 0) {\n    spectrum.transmittance = spectrum.absorbance.map(\n      (absorbance) => 10 ** -absorbance\n    );\n  }\n\n  if (spectrum.wavelength.length > 0) {\n    spectrum.minWavelength = min(spectrum.wavelength);\n  }\n  if (spectrum.wavelength.length > 0) {\n    spectrum.maxWavelength = max(spectrum.wavelength);\n  }\n  if (spectrum.absorbance.length > 0) {\n    spectrum.minAbsorbance = min(spectrum.absorbance);\n  }\n  if (spectrum.absorbance.length > 0) {\n    spectrum.maxAbsorbance = max(spectrum.absorbance);\n  }\n  if (spectrum.transmittance.length > 0) {\n    spectrum.minTransmittance = min(spectrum.transmittance);\n  }\n  if (spectrum.transmittance.length > 0) {\n    spectrum.maxTransmittance = max(spectrum.transmittance);\n  }\n}\n\nclass Spectra {\n  constructor(options = {}) {\n    this.normalizationOptions =\n      options.normalization === undefined\n        ? {\n          from: 800,\n          to: 4000,\n          numberOfPoints: 1024,\n          applySNV: true,\n          exclusions: []\n        }\n        : options.normalization;\n    if (Array.isArray(this.normalizationOptions.exclusions)) {\n      this.normalizationOptions.exclusions = this.normalizationOptions.exclusions.filter(\n        (exclusion) => !exclusion.ignore\n      );\n    }\n    this.data = [];\n    this.mode = PERCENT_TRANSMITTANCE;\n  }\n\n  /**\n   * Add a spectrum\n   * @param {Spectrum} spectrum\n   * @param {string} id\n   * @param {object} [meta={}]\n   * @param {string} [meta.color]\n   */\n  addSpectrum(spectrum, id, meta = {}) {\n    let index = this.getSpectrumIndex(id);\n    if (index === undefined) index = this.data.length;\n    this.data[index] = {\n      normalized: spectrum.getNormalized(this.normalizationOptions),\n      spectrum,\n      id,\n      meta\n    };\n  }\n\n  /**\n   * Add jcamp\n   * @param {string} jcamp\n   * @param {string} id\n   * @param {boolean} [force=false]\n   * @param {object} [meta={}]\n   * @param {string} [meta.color]\n   */\n  addFromJcamp(jcamp, id, meta = {}, force = false) {\n    if (force === false && this.contains(id)) return;\n    let spectrum = fromJcamp(jcamp);\n    this.addSpectrum(spectrum, id, meta);\n  }\n\n  removeSpectrum(id) {\n    let index = this.getSpectrumIndex(id);\n    if (index === undefined) return undefined;\n    return this.data.splice(index, 1);\n  }\n\n  contains(id) {\n    return !isNaN(this.getSpectrumIndex(id));\n  }\n\n  getSpectrumIndex(id) {\n    if (!id) return undefined;\n    for (let i = 0; i < this.data.length; i++) {\n      let spectrum = this.data[i];\n      if (spectrum.id === id) return i;\n    }\n    return undefined;\n  }\n\n  getNormalizedData() {\n    if (!this.data || !this.data[0]) return {};\n    let matrix = [];\n    let meta = [];\n    let ids = [];\n    for (let datum of this.data) {\n      ids.push(datum.id);\n      matrix.push(datum.normalized.y);\n      meta.push(datum.meta);\n    }\n    let x = this.data[0].normalized.x;\n    return { ids, matrix, meta, x };\n  }\n\n  getChart(options = {}) {\n    console.log({ options });\n    const { ids, filter = {}, mode = this.mode } = options;\n    let chart = {\n      title: 'IR spectra superimposition',\n      data: []\n    };\n    for (let datum of this.data) {\n      if (!ids || ids.includes(datum.id)) {\n        let data = datum.spectrum.getData({ mode, filter });\n\n        data.styles = {\n          unselected: {\n            lineColor: datum.meta.color || 'darkgrey',\n            lineWidth: 1,\n            lineStyle: 1\n          },\n          selected: {\n            lineColor: datum.meta.color || 'darkgrey',\n            lineWidth: 3,\n            lineStyle: 1\n          }\n        };\n        data.label = datum.meta.id || datum.id;\n        chart.data.push(data);\n      }\n    }\n    return chart;\n  }\n}\n\n/**\n * Creates a new Chromatogram element based in a JCAMP string\n * @param {string} jcamp - String containing the JCAMP data\n * @return {Spectrum} - New class element with the given data\n */\nfunction fromJcamp(jcamp) {\n  const data = jcampconverter.convert(jcamp, { xy: true });\n  let spectrum = data.spectra[0].data[0];\n  if (getKind(data.spectra[0].yUnit) === TRANSMITTANCE) {\n    return new Spectrum({\n      wavelength: spectrum.x,\n      transmittance: spectrum.y,\n      absorbance: []\n    });\n  } else {\n    return new Spectrum({\n      wavelength: spectrum.x,\n      transmittance: [],\n      absorbance: spectrum.y\n    });\n  }\n}\n\n/**\n * Creates a new Chromatogram element based in a Txt string\n * @param {string} text - String containing the data as CSV or TSV\n * @param {object} [options] - Options object for the parser\n * @param {string} [options.kind] - Absorbance or Transmisstance\n * @return {Spectrum} - New class element with the given data\n */\nfunction fromText(text, options = {}) {\n  options = Object.assign({}, options, { arrayType: 'xxyy' });\n  const data = xyParser.parseXY(text, options);\n  if (getKind(options.kind) === TRANSMITTANCE) {\n    return new Spectrum({\n      wavelength: data[0],\n      transmittance: data[1],\n      absorbance: []\n    });\n  } else {\n    return new Spectrum({\n      wavelength: data[0],\n      transmisttance: [],\n      absorbance: data[1]\n    });\n  }\n}\n\nfunction getFilterAnnotations(filter = {}) {\n  let { exclusions = [] } = filter;\n  let annotations = [];\n  exclusions = exclusions.filter((exclusion) => !exclusion.ignore);\n  annotations = exclusions.map((exclusion) => {\n    var annotation = {\n      type: 'rect',\n      position: [{ x: exclusion.from, y: 0 }, { x: exclusion.to, y: 200 }],\n      strokeWidth: 0,\n      fillColor: 'rgba(255,255,224,1)'\n    };\n    return annotation;\n  });\n  if (filter.from !== undefined) {\n    annotations.push({\n      type: 'rect',\n      position: [{ x: 0, y: 0 }, { x: filter.from, y: 200 }],\n      strokeWidth: 0,\n      fillColor: 'rgba(255,255,224,1)'\n    });\n  }\n  if (filter.to !== undefined) {\n    annotations.push({\n      type: 'rect',\n      position: [{ x: filter.to, y: 0 }, { x: 10000, y: 200 }],\n      strokeWidth: 0,\n      fillColor: 'rgba(255,255,224,1)'\n    });\n  }\n  return annotations;\n}\n\nexports.ABSORBANCE = ABSORBANCE;\nexports.PERCENT_TRANSMITTANCE = PERCENT_TRANSMITTANCE;\nexports.Spectra = Spectra;\nexports.Spectrum = Spectrum;\nexports.TRANSMITTANCE = TRANSMITTANCE;\nexports.fromJcamp = fromJcamp;\nexports.fromText = fromText;\nexports.getFilterAnnotations = getFilterAnnotations;\nexports.getYLabel = getYLabel;\n","import isArray from 'is-any-array';\n\n/**\n * Computes the minimum of the given values\n * @param {Array<number>} input\n * @return {number}\n */\n\nfunction min(input) {\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var min = input[0];\n\n  for (var i = 1; i < input.length; i++) {\n    if (input[i] < min) min = input[i];\n  }\n\n  return min;\n}\n\nexport default min;\n","import isArray from 'is-any-array';\n\n/**\n * Computes the maximum of the given values\n * @param {Array<number>} input\n * @return {number}\n */\n\nfunction max(input) {\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var max = input[0];\n\n  for (var i = 1; i < input.length; i++) {\n    if (input[i] > max) max = input[i];\n  }\n\n  return max;\n}\n\nexport default max;\n","'use strict';\n\nmodule.exports.gsd = require('./gsd');\n\nmodule.exports.post = {\n  optimizePeaks: require('./post/optimizePeaks'),\n  joinBroadPeaks: require('./post/joinBroadPeaks'),\n  broadenPeaks: require('./post/broadenPeaks')\n};\n","'use strict';\n\nconst SG = require('ml-savitzky-golay-generalized');\n\nconst defaultOptions = {\n  sgOptions: {\n    windowSize: 9,\n    polynomial: 3\n  },\n  minMaxRatio: 0.00025,\n  broadRatio: 0.0,\n  maxCriteria: true,\n  smoothY: true,\n  realTopDetection: false,\n  heightFactor: 0,\n  boundaries: false,\n  derivativeThreshold: -1\n};\n\n/**\n * Global spectra deconvolution\n * @param {Array<number>} x - Independent variable\n * @param {Array<number>} yIn - Dependent variable\n * @param {object} [options] - Options object\n * @param {object} [options.sgOptions] - Options object for Savitzky-Golay filter. See https://github.com/mljs/savitzky-golay-generalized#options\n * @param {number} [options.sgOptions.windowSize = 9] - points to use in the approximations\n * @param {number} [options.sgOptions.polynomial = 3] - degree of the polynomial to use in the approximations\n * @param {number} [options.minMaxRatio = 0.00025] - Threshold to determine if a given peak should be considered as a noise\n * @param {number} [options.broadRatio = 0.00] - If `broadRatio` is higher than 0, then all the peaks which second derivative\n * smaller than `broadRatio * maxAbsSecondDerivative` will be marked with the soft mask equal to true.\n * @param {number} [options.noiseLevel = 0] - Noise threshold in spectrum units\n * @param {boolean} [options.maxCriteria = true] - Peaks are local maximum(true) or minimum(false)\n * @param {boolean} [options.smoothY = true] - Select the peak intensities from a smoothed version of the independent variables\n * @param {boolean} [options.realTopDetection = false] - Use a quadratic optimizations with the peak and its 3 closest neighbors\n * to determine the true x,y values of the peak?\n * @param {number} [options.heightFactor = 0] - Factor to multiply the calculated height (usually 2)\n * @param {boolean} [options.boundaries = false] - Return also the inflection points of the peaks\n * @param {number} [options.derivativeThreshold = -1] - Filters based on the amplitude of the first derivative\n * @return {Array<object>}\n */\nfunction gsd(x, yIn, options) {\n  options = Object.assign({}, defaultOptions, options);\n  let sgOptions = options.sgOptions;\n  const y = [].concat(yIn);\n\n  if (!('noiseLevel' in options)) {\n    // We have to know if x is equally spaced\n    var maxDx = 0;\n\n    var minDx = Number.MAX_VALUE;\n\n    var tmp;\n    for (let i = 0; i < x.length - 1; ++i) {\n      tmp = Math.abs(x[i + 1] - x[i]);\n      if (tmp < minDx) {\n        minDx = tmp;\n      }\n      if (tmp > maxDx) {\n        maxDx = tmp;\n      }\n    }\n\n    if ((maxDx - minDx) / maxDx < 0.05) {\n      options.noiseLevel = getNoiseLevel(y);\n    } else {\n      options.noiseLevel = 0;\n    }\n  }\n  const yCorrection = { m: 1, b: options.noiseLevel };\n  if (!options.maxCriteria) {\n    yCorrection.m = -1;\n    yCorrection.b *= -1;\n  }\n\n  for (let i = 0; i < y.length; i++) {\n    y[i] = yCorrection.m * y[i] - yCorrection.b;\n  }\n\n  for (let i = 0; i < y.length; i++) {\n    if (y[i] < 0) {\n      y[i] = 0;\n    }\n  }\n  // If the max difference between delta x is less than 5%, then, we can assume it to be equally spaced variable\n  let Y = y;\n  let dY, ddY;\n  if ((maxDx - minDx) / maxDx < 0.05) {\n    if (options.smoothY) {\n      Y = SG(y, x[1] - x[0], {\n        windowSize: sgOptions.windowSize,\n        polynomial: sgOptions.polynomial,\n        derivative: 0\n      });\n    }\n    dY = SG(y, x[1] - x[0], {\n      windowSize: sgOptions.windowSize,\n      polynomial: sgOptions.polynomial,\n      derivative: 1\n    });\n    ddY = SG(y, x[1] - x[0], {\n      windowSize: sgOptions.windowSize,\n      polynomial: sgOptions.polynomial,\n      derivative: 2\n    });\n  } else {\n    if (options.smoothY) {\n      Y = SG(y, x, {\n        windowSize: sgOptions.windowSize,\n        polynomial: sgOptions.polynomial,\n        derivative: 0\n      });\n    }\n    dY = SG(y, x, {\n      windowSize: sgOptions.windowSize,\n      polynomial: sgOptions.polynomial,\n      derivative: 1\n    });\n    ddY = SG(y, x, {\n      windowSize: sgOptions.windowSize,\n      polynomial: sgOptions.polynomial,\n      derivative: 2\n    });\n  }\n\n  const X = x;\n  const dx = x[1] - x[0];\n  var maxDdy = 0;\n  var maxY = 0;\n  for (let i = 0; i < Y.length; i++) {\n    if (Math.abs(ddY[i]) > maxDdy) {\n      maxDdy = Math.abs(ddY[i]);\n    }\n    if (Math.abs(Y[i]) > maxY) {\n      maxY = Math.abs(Y[i]);\n    }\n  }\n\n  var lastMax = null;\n  var lastMin = null;\n  var minddY = new Array(Y.length - 2);\n  var intervalL = new Array(Y.length);\n  var intervalR = new Array(Y.length);\n  var broadMask = new Array(Y.length - 2);\n  var minddYLen = 0;\n  var intervalLLen = 0;\n  var intervalRLen = 0;\n  var broadMaskLen = 0;\n  // By the intermediate value theorem We cannot find 2 consecutive maximum or minimum\n  for (let i = 1; i < Y.length - 1; ++i) {\n    // filter based on derivativeThreshold\n    if (Math.abs(dY[i]) > options.derivativeThreshold) {\n      // Minimum in first derivative\n      if (\n        (dY[i] < dY[i - 1] && dY[i] <= dY[i + 1]) ||\n        (dY[i] <= dY[i - 1] && dY[i] < dY[i + 1])\n      ) {\n        lastMin = {\n          x: X[i],\n          index: i\n        };\n        if (dx > 0 && lastMax !== null) {\n          intervalL[intervalLLen++] = lastMax;\n          intervalR[intervalRLen++] = lastMin;\n        }\n      }\n\n      // Maximum in first derivative\n      if (\n        (dY[i] >= dY[i - 1] && dY[i] > dY[i + 1]) ||\n        (dY[i] > dY[i - 1] && dY[i] >= dY[i + 1])\n      ) {\n        lastMax = {\n          x: X[i],\n          index: i\n        };\n        if (dx < 0 && lastMin !== null) {\n          intervalL[intervalLLen++] = lastMax;\n          intervalR[intervalRLen++] = lastMin;\n        }\n      }\n    }\n\n    // Minimum in second derivative\n    if (ddY[i] < ddY[i - 1] && ddY[i] < ddY[i + 1]) {\n      // TODO should we change this to have 3 arrays ? Huge overhead creating arrays\n      minddY[minddYLen++] = i; // ( [X[i], Y[i], i] );\n      broadMask[broadMaskLen++] =\n        Math.abs(ddY[i]) <= options.broadRatio * maxDdy;\n    }\n  }\n  minddY.length = minddYLen;\n  intervalL.length = intervalLLen;\n  intervalR.length = intervalRLen;\n  broadMask.length = broadMaskLen;\n\n  let signals = new Array(minddY.length);\n  let signalsLen = 0;\n  let lastK = -1;\n  let possible, frequency, distanceJ, minDistance, gettingCloser;\n  for (let j = 0; j < minddY.length; ++j) {\n    frequency = X[minddY[j]];\n    possible = -1;\n    let k = lastK + 1;\n    minDistance = Number.MAX_VALUE;\n    distanceJ = 0;\n    gettingCloser = true;\n    while (possible === -1 && k < intervalL.length && gettingCloser) {\n      distanceJ = Math.abs(frequency - (intervalL[k].x + intervalR[k].x) / 2);\n\n      // Still getting closer?\n      if (distanceJ < minDistance) {\n        minDistance = distanceJ;\n      } else {\n        gettingCloser = false;\n      }\n      if (distanceJ < Math.abs(intervalL[k].x - intervalR[k].x) / 2) {\n        possible = k;\n        lastK = k;\n      }\n      ++k;\n    }\n\n    if (possible !== -1) {\n      if (Math.abs(Y[minddY[j]]) > options.minMaxRatio * maxY) {\n        signals[signalsLen++] = {\n          index: minddY[j],\n          x: frequency,\n          y: (Y[minddY[j]] + yCorrection.b) / yCorrection.m,\n          width: Math.abs(intervalR[possible].x - intervalL[possible].x), // widthCorrection\n          soft: broadMask[j]\n        };\n        if (options.boundaries) {\n          signals[signalsLen - 1].left = intervalL[possible];\n          signals[signalsLen - 1].right = intervalR[possible];\n        }\n        if (options.heightFactor) {\n          let yLeft = Y[intervalL[possible].index];\n          let yRight = Y[intervalR[possible].index];\n          signals[signalsLen - 1].height =\n            options.heightFactor *\n            (signals[signalsLen - 1].y - (yLeft + yRight) / 2);\n        }\n      }\n    }\n  }\n  signals.length = signalsLen;\n\n  if (options.realTopDetection) {\n    realTopDetection(signals, X, Y);\n  }\n\n  // Correct the values to fit the original spectra data\n  for (let j = 0; j < signals.length; j++) {\n    signals[j].base = options.noiseLevel;\n  }\n\n  signals.sort(function (a, b) {\n    return a.x - b.x;\n  });\n\n  return signals;\n}\n\nfunction getNoiseLevel(y) {\n  var mean = 0;\n\n  var stddev = 0;\n  var length = y.length;\n  for (let i = 0; i < length; ++i) {\n    mean += y[i];\n  }\n  mean /= length;\n  var averageDeviations = new Array(length);\n  for (let i = 0; i < length; ++i) {\n    averageDeviations[i] = Math.abs(y[i] - mean);\n  }\n  averageDeviations.sort();\n  if (length % 2 === 1) {\n    stddev = averageDeviations[(length - 1) / 2] / 0.6745;\n  } else {\n    stddev =\n      (0.5 *\n        (averageDeviations[length / 2] + averageDeviations[length / 2 - 1])) /\n      0.6745;\n  }\n\n  return stddev;\n}\n\nfunction realTopDetection(peakList, x, y) {\n  var alpha, beta, gamma, p, currentPoint;\n  for (var j = 0; j < peakList.length; j++) {\n    currentPoint = peakList[j].index; // peakList[j][2];\n    // The detected peak could be moved 1 or 2 unit to left or right.\n    if (\n      y[currentPoint - 1] >= y[currentPoint - 2] &&\n      y[currentPoint - 1] >= y[currentPoint]\n    ) {\n      currentPoint--;\n    } else {\n      if (\n        y[currentPoint + 1] >= y[currentPoint] &&\n        y[currentPoint + 1] >= y[currentPoint + 2]\n      ) {\n        currentPoint++;\n      } else {\n        if (\n          y[currentPoint - 2] >= y[currentPoint - 3] &&\n          y[currentPoint - 2] >= y[currentPoint - 1]\n        ) {\n          currentPoint -= 2;\n        } else {\n          if (\n            y[currentPoint + 2] >= y[currentPoint + 1] &&\n            y[currentPoint + 2] >= y[currentPoint + 3]\n          ) {\n            currentPoint += 2;\n          }\n        }\n      }\n    }\n    // interpolation to a sin() function\n    if (\n      y[currentPoint - 1] > 0 &&\n      y[currentPoint + 1] > 0 &&\n      y[currentPoint] >= y[currentPoint - 1] &&\n      y[currentPoint] >= y[currentPoint + 1]\n    ) {\n      alpha = 20 * Math.log10(y[currentPoint - 1]);\n      beta = 20 * Math.log10(y[currentPoint]);\n      gamma = 20 * Math.log10(y[currentPoint + 1]);\n      p = (0.5 * (alpha - gamma)) / (alpha - 2 * beta + gamma);\n      // console.log(alpha, beta, gamma, `p: ${p}`);\n      // console.log(x[currentPoint]+\" \"+tmp+\" \"+currentPoint);\n      peakList[j].x =\n        x[currentPoint] + (x[currentPoint] - x[currentPoint - 1]) * p;\n      peakList[j].y =\n        y[currentPoint] -\n        0.25 * (y[currentPoint - 1] - y[currentPoint + 1]) * p;\n    }\n  }\n}\n\nmodule.exports = gsd;\n","//Code translate from Pascal source in http://pubs.acs.org/doi/pdf/10.1021/ac00205a007\nvar extend = require('extend');\nvar stat = require('ml-stat');\n\nvar defaultOptions = {\n    windowSize: 9,\n    derivative: 0,\n    polynomial: 3,\n};\n\n\nfunction SavitzkyGolay(data, h, options) {\n    options = extend({}, defaultOptions, options);\n\n    if ((options.windowSize % 2 === 0) || (options.windowSize < 5) || !(Number.isInteger(options.windowSize)))\n            throw new RangeError('Invalid window size (should be odd and at least 5 integer number)')\n\n\n    if (options.windowSize>data.length)\n        throw new RangeError('Window size is higher than the data length '+options.windowSize+\">\"+data.length);\n    if ((options.derivative < 0) || !(Number.isInteger(options.derivative)))\n        throw new RangeError('Derivative should be a positive integer');\n    if ((options.polynomial < 1) || !(Number.isInteger(options.polynomial)))\n        throw new RangeError('Polynomial should be a positive integer');\n    if (options.polynomial >= 6)\n        console.warn('You should not use polynomial grade higher than 5 if you are' +\n            ' not sure that your data arises from such a model. Possible polynomial oscillation problems');\n\n    var windowSize = options.windowSize;\n\n    var half = Math.floor(windowSize/2);\n    var np = data.length;\n    var ans = new Array(np);\n    var weights = fullWeights(windowSize,options.polynomial,options.derivative);\n    var hs = 0;\n    var constantH = true;\n    if( Object.prototype.toString.call( h ) === '[object Array]' ) {\n        constantH = false;\n    }\n    else{\n        hs = Math.pow(h, options.derivative);\n    }\n    //console.log(\"Constant h: \"+constantH);\n    //For the borders\n    for(var i=0;i<half;i++){\n        var wg1=weights[half-i-1];\n        var wg2=weights[half+i+1];\n        var d1 = 0,d2=0;\n        for (var l = 0; l < windowSize; l++){\n            d1 += wg1[l] * data[l];\n            d2 += wg2[l] * data[np-windowSize+l-1];\n        }\n        if(constantH){\n            ans[half-i-1] = d1/hs;\n            ans[np-half+i] = d2/hs;\n        }\n        else{\n            hs = getHs(h,half-i-1,half, options.derivative);\n            ans[half-i-1] = d1/hs;\n            hs = getHs(h,np-half+i,half, options.derivative);\n            ans[np-half+i] = d2/hs;\n        }\n    }\n    //For the internal points\n    var wg = weights[half];\n    for(var i=windowSize;i<np+1;i++){\n        var d = 0;\n        for (var l = 0; l < windowSize; l++)\n            d += wg[l] * data[l+i-windowSize];\n        if(!constantH)\n            hs = getHs(h,i-half-1,half, options.derivative);\n        ans[i-half-1] = d/hs;\n    }\n    return ans;\n}\n\nfunction getHs(h,center,half,derivative){\n    var hs = 0;\n    var count = 0;\n    for(var i=center-half;i<center+half;i++){\n        if(i>=0 && i < h.length-1){\n            hs+= (h[i+1]-h[i]);\n            count++;\n        }\n    }\n    return Math.pow(hs/count,derivative);\n}\n\nfunction GramPoly(i,m,k,s){\n    var Grampoly = 0;\n    if(k>0){\n        Grampoly = (4*k-2)/(k*(2*m-k+1))*(i*GramPoly(i,m,k-1,s) +\n            s*GramPoly(i,m,k-1,s-1)) - ((k-1)*(2*m+k))/(k*(2*m-k+1))*GramPoly(i,m,k-2,s);\n    }\n    else{\n        if(k==0&&s==0){\n            Grampoly=1;\n        }\n        else{\n            Grampoly=0;\n        }\n    }\n    //console.log(Grampoly);\n    return Grampoly;\n}\n\nfunction GenFact(a,b){\n    var gf=1;\n    if(a>=b){\n        for(var j=a-b+1;j<=a;j++){\n            gf*=j;\n        }\n    }\n    return gf;\n}\n\nfunction Weight(i,t,m,n,s){\n    var sum=0;\n    for(var k=0;k<=n;k++){\n        //console.log(k);\n        sum+=(2*k+1)*(GenFact(2*m,k)/GenFact(2*m+k+1,k+1))*GramPoly(i,m,k,0)*GramPoly(t,m,k,s)\n    }\n    return sum;\n}\n\n/**\n *\n * @param m  Number of points\n * @param n  Polynomial grade\n * @param s  Derivative\n */\nfunction fullWeights(m,n,s){\n    var weights = new Array(m);\n    var np = Math.floor(m/2);\n    for(var t=-np;t<=np;t++){\n        weights[t+np] = new Array(m);\n        for(var j=-np;j<=np;j++){\n            weights[t+np][j+np]=Weight(j,t,np,n,s);\n        }\n    }\n    return weights;\n}\n\n/*function entropy(data,h,options){\n    var trend = SavitzkyGolay(data,h,trendOptions);\n    var copy = new Array(data.length);\n    var sum = 0;\n    var max = 0;\n    for(var i=0;i<data.length;i++){\n        copy[i] = data[i]-trend[i];\n    }\n\n    sum/=data.length;\n    console.log(sum+\" \"+max);\n    console.log(stat.array.standardDeviation(copy));\n    console.log(Math.abs(stat.array.mean(copy))/stat.array.standardDeviation(copy));\n    return sum;\n\n}\n\n\n\nfunction guessWindowSize(data, h){\n    console.log(\"entropy \"+entropy(data,h,trendOptions));\n    return 5;\n}\n*/\nmodule.exports = SavitzkyGolay;\n \n","'use strict';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\nvar defineProperty = Object.defineProperty;\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) { /**/ }\n\n\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n};\n\n// If name is '__proto__', and Object.defineProperty is available, define __proto__ as an own property on target\nvar setProperty = function setProperty(target, options) {\n\tif (defineProperty && options.name === '__proto__') {\n\t\tdefineProperty(target, options.name, {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\t\t\tvalue: options.newValue,\n\t\t\twritable: true\n\t\t});\n\t} else {\n\t\ttarget[options.name] = options.newValue;\n\t}\n};\n\n// Return undefined instead of __proto__ if '__proto__' is not an own property\nvar getProperty = function getProperty(obj, name) {\n\tif (name === '__proto__') {\n\t\tif (!hasOwn.call(obj, name)) {\n\t\t\treturn void 0;\n\t\t} else if (gOPD) {\n\t\t\t// In early versions of node, obj['__proto__'] is buggy when obj has\n\t\t\t// __proto__ as an own property. Object.getOwnPropertyDescriptor() works.\n\t\t\treturn gOPD(obj, name).value;\n\t\t}\n\t}\n\n\treturn obj[name];\n};\n\nmodule.exports = function extend() {\n\tvar options, name, src, copy, copyIsArray, clone;\n\tvar target = arguments[0];\n\tvar i = 1;\n\tvar length = arguments.length;\n\tvar deep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t}\n\tif (target == null || (typeof target !== 'object' && typeof target !== 'function')) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = getProperty(target, name);\n\t\t\t\tcopy = getProperty(options, name);\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target !== copy) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: extend(deep, clone, copy) });\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: copy });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n","'use strict';\n\nexports.array = require('./array');\nexports.matrix = require('./matrix');\n","'use strict';\nvar arrayStat = require('./array');\n\n// https://github.com/accord-net/framework/blob/development/Sources/Accord.Statistics/Tools.cs\n\nfunction entropy(matrix, eps) {\n    if (typeof(eps) === 'undefined') {\n        eps = 0;\n    }\n    var sum = 0,\n        l1 = matrix.length,\n        l2 = matrix[0].length;\n    for (var i = 0; i < l1; i++) {\n        for (var j = 0; j < l2; j++) {\n            sum += matrix[i][j] * Math.log(matrix[i][j] + eps);\n        }\n    }\n    return -sum;\n}\n\nfunction mean(matrix, dimension) {\n    if (typeof(dimension) === 'undefined') {\n        dimension = 0;\n    }\n    var rows = matrix.length,\n        cols = matrix[0].length,\n        theMean, N, i, j;\n\n    if (dimension === -1) {\n        theMean = [0];\n        N = rows * cols;\n        for (i = 0; i < rows; i++) {\n            for (j = 0; j < cols; j++) {\n                theMean[0] += matrix[i][j];\n            }\n        }\n        theMean[0] /= N;\n    } else if (dimension === 0) {\n        theMean = new Array(cols);\n        N = rows;\n        for (j = 0; j < cols; j++) {\n            theMean[j] = 0;\n            for (i = 0; i < rows; i++) {\n                theMean[j] += matrix[i][j];\n            }\n            theMean[j] /= N;\n        }\n    } else if (dimension === 1) {\n        theMean = new Array(rows);\n        N = cols;\n        for (j = 0; j < rows; j++) {\n            theMean[j] = 0;\n            for (i = 0; i < cols; i++) {\n                theMean[j] += matrix[j][i];\n            }\n            theMean[j] /= N;\n        }\n    } else {\n        throw new Error('Invalid dimension');\n    }\n    return theMean;\n}\n\nfunction standardDeviation(matrix, means, unbiased) {\n    var vari = variance(matrix, means, unbiased), l = vari.length;\n    for (var i = 0; i < l; i++) {\n        vari[i] = Math.sqrt(vari[i]);\n    }\n    return vari;\n}\n\nfunction variance(matrix, means, unbiased) {\n    if (typeof(unbiased) === 'undefined') {\n        unbiased = true;\n    }\n    means = means || mean(matrix);\n    var rows = matrix.length;\n    if (rows === 0) return [];\n    var cols = matrix[0].length;\n    var vari = new Array(cols);\n\n    for (var j = 0; j < cols; j++) {\n        var sum1 = 0, sum2 = 0, x = 0;\n        for (var i = 0; i < rows; i++) {\n            x = matrix[i][j] - means[j];\n            sum1 += x;\n            sum2 += x * x;\n        }\n        if (unbiased) {\n            vari[j] = (sum2 - ((sum1 * sum1) / rows)) / (rows - 1);\n        } else {\n            vari[j] = (sum2 - ((sum1 * sum1) / rows)) / rows;\n        }\n    }\n    return vari;\n}\n\nfunction median(matrix) {\n    var rows = matrix.length, cols = matrix[0].length;\n    var medians = new Array(cols);\n\n    for (var i = 0; i < cols; i++) {\n        var data = new Array(rows);\n        for (var j = 0; j < rows; j++) {\n            data[j] = matrix[j][i];\n        }\n        data.sort();\n        var N = data.length;\n        if (N % 2 === 0) {\n            medians[i] = (data[N / 2] + data[(N / 2) - 1]) * 0.5;\n        } else {\n            medians[i] = data[Math.floor(N / 2)];\n        }\n    }\n    return medians;\n}\n\nfunction mode(matrix) {\n    var rows = matrix.length,\n        cols = matrix[0].length,\n        modes = new Array(cols),\n        i, j;\n    for (i = 0; i < cols; i++) {\n        var itemCount = new Array(rows);\n        for (var k = 0; k < rows; k++) {\n            itemCount[k] = 0;\n        }\n        var itemArray = new Array(rows);\n        var count = 0;\n\n        for (j = 0; j < rows; j++) {\n            var index = itemArray.indexOf(matrix[j][i]);\n            if (index >= 0) {\n                itemCount[index]++;\n            } else {\n                itemArray[count] = matrix[j][i];\n                itemCount[count] = 1;\n                count++;\n            }\n        }\n\n        var maxValue = 0, maxIndex = 0;\n        for (j = 0; j < count; j++) {\n            if (itemCount[j] > maxValue) {\n                maxValue = itemCount[j];\n                maxIndex = j;\n            }\n        }\n\n        modes[i] = itemArray[maxIndex];\n    }\n    return modes;\n}\n\nfunction skewness(matrix, unbiased) {\n    if (typeof(unbiased) === 'undefined') unbiased = true;\n    var means = mean(matrix);\n    var n = matrix.length, l = means.length;\n    var skew = new Array(l);\n\n    for (var j = 0; j < l; j++) {\n        var s2 = 0, s3 = 0;\n        for (var i = 0; i < n; i++) {\n            var dev = matrix[i][j] - means[j];\n            s2 += dev * dev;\n            s3 += dev * dev * dev;\n        }\n\n        var m2 = s2 / n;\n        var m3 = s3 / n;\n        var g = m3 / Math.pow(m2, 3 / 2);\n\n        if (unbiased) {\n            var a = Math.sqrt(n * (n - 1));\n            var b = n - 2;\n            skew[j] = (a / b) * g;\n        } else {\n            skew[j] = g;\n        }\n    }\n    return skew;\n}\n\nfunction kurtosis(matrix, unbiased) {\n    if (typeof(unbiased) === 'undefined') unbiased = true;\n    var means = mean(matrix);\n    var n = matrix.length, m = matrix[0].length;\n    var kurt = new Array(m);\n\n    for (var j = 0; j < m; j++) {\n        var s2 = 0, s4 = 0;\n        for (var i = 0; i < n; i++) {\n            var dev = matrix[i][j] - means[j];\n            s2 += dev * dev;\n            s4 += dev * dev * dev * dev;\n        }\n        var m2 = s2 / n;\n        var m4 = s4 / n;\n\n        if (unbiased) {\n            var v = s2 / (n - 1);\n            var a = (n * (n + 1)) / ((n - 1) * (n - 2) * (n - 3));\n            var b = s4 / (v * v);\n            var c = ((n - 1) * (n - 1)) / ((n - 2) * (n - 3));\n            kurt[j] = a * b - 3 * c;\n        } else {\n            kurt[j] = m4 / (m2 * m2) - 3;\n        }\n    }\n    return kurt;\n}\n\nfunction standardError(matrix) {\n    var samples = matrix.length;\n    var standardDeviations = standardDeviation(matrix), l = standardDeviations.length;\n    var standardErrors = new Array(l);\n    var sqrtN = Math.sqrt(samples);\n\n    for (var i = 0; i < l; i++) {\n        standardErrors[i] = standardDeviations[i] / sqrtN;\n    }\n    return standardErrors;\n}\n\nfunction covariance(matrix, dimension) {\n    return scatter(matrix, undefined, dimension);\n}\n\nfunction scatter(matrix, divisor, dimension) {\n    if (typeof(dimension) === 'undefined') {\n        dimension = 0;\n    }\n    if (typeof(divisor) === 'undefined') {\n        if (dimension === 0) {\n            divisor = matrix.length - 1;\n        } else if (dimension === 1) {\n            divisor = matrix[0].length - 1;\n        }\n    }\n    var means = mean(matrix, dimension),\n        rows = matrix.length;\n    if (rows === 0) {\n        return [[]];\n    }\n    var cols = matrix[0].length,\n        cov, i, j, s, k;\n\n    if (dimension === 0) {\n        cov = new Array(cols);\n        for (i = 0; i < cols; i++) {\n            cov[i] = new Array(cols);\n        }\n        for (i = 0; i < cols; i++) {\n            for (j = i; j < cols; j++) {\n                s = 0;\n                for (k = 0; k < rows; k++) {\n                    s += (matrix[k][j] - means[j]) * (matrix[k][i] - means[i]);\n                }\n                s /= divisor;\n                cov[i][j] = s;\n                cov[j][i] = s;\n            }\n        }\n    } else if (dimension === 1) {\n        cov = new Array(rows);\n        for (i = 0; i < rows; i++) {\n            cov[i] = new Array(rows);\n        }\n        for (i = 0; i < rows; i++) {\n            for (j = i; j < rows; j++) {\n                s = 0;\n                for (k = 0; k < cols; k++) {\n                    s += (matrix[j][k] - means[j]) * (matrix[i][k] - means[i]);\n                }\n                s /= divisor;\n                cov[i][j] = s;\n                cov[j][i] = s;\n            }\n        }\n    } else {\n        throw new Error('Invalid dimension');\n    }\n\n    return cov;\n}\n\nfunction correlation(matrix) {\n    var means = mean(matrix),\n        standardDeviations = standardDeviation(matrix, true, means),\n        scores = zScores(matrix, means, standardDeviations),\n        rows = matrix.length,\n        cols = matrix[0].length,\n        i, j;\n\n    var cor = new Array(cols);\n    for (i = 0; i < cols; i++) {\n        cor[i] = new Array(cols);\n    }\n    for (i = 0; i < cols; i++) {\n        for (j = i; j < cols; j++) {\n            var c = 0;\n            for (var k = 0, l = scores.length; k < l; k++) {\n                c += scores[k][j] * scores[k][i];\n            }\n            c /= rows - 1;\n            cor[i][j] = c;\n            cor[j][i] = c;\n        }\n    }\n    return cor;\n}\n\nfunction zScores(matrix, means, standardDeviations) {\n    means = means || mean(matrix);\n    if (typeof(standardDeviations) === 'undefined') standardDeviations = standardDeviation(matrix, true, means);\n    return standardize(center(matrix, means, false), standardDeviations, true);\n}\n\nfunction center(matrix, means, inPlace) {\n    means = means || mean(matrix);\n    var result = matrix,\n        l = matrix.length,\n        i, j, jj;\n\n    if (!inPlace) {\n        result = new Array(l);\n        for (i = 0; i < l; i++) {\n            result[i] = new Array(matrix[i].length);\n        }\n    }\n\n    for (i = 0; i < l; i++) {\n        var row = result[i];\n        for (j = 0, jj = row.length; j < jj; j++) {\n            row[j] = matrix[i][j] - means[j];\n        }\n    }\n    return result;\n}\n\nfunction standardize(matrix, standardDeviations, inPlace) {\n    if (typeof(standardDeviations) === 'undefined') standardDeviations = standardDeviation(matrix);\n    var result = matrix,\n        l = matrix.length,\n        i, j, jj;\n\n    if (!inPlace) {\n        result = new Array(l);\n        for (i = 0; i < l; i++) {\n            result[i] = new Array(matrix[i].length);\n        }\n    }\n\n    for (i = 0; i < l; i++) {\n        var resultRow = result[i];\n        var sourceRow = matrix[i];\n        for (j = 0, jj = resultRow.length; j < jj; j++) {\n            if (standardDeviations[j] !== 0 && !isNaN(standardDeviations[j])) {\n                resultRow[j] = sourceRow[j] / standardDeviations[j];\n            }\n        }\n    }\n    return result;\n}\n\nfunction weightedVariance(matrix, weights) {\n    var means = mean(matrix);\n    var rows = matrix.length;\n    if (rows === 0) return [];\n    var cols = matrix[0].length;\n    var vari = new Array(cols);\n\n    for (var j = 0; j < cols; j++) {\n        var sum = 0;\n        var a = 0, b = 0;\n\n        for (var i = 0; i < rows; i++) {\n            var z = matrix[i][j] - means[j];\n            var w = weights[i];\n\n            sum += w * (z * z);\n            b += w;\n            a += w * w;\n        }\n\n        vari[j] = sum * (b / (b * b - a));\n    }\n\n    return vari;\n}\n\nfunction weightedMean(matrix, weights, dimension) {\n    if (typeof(dimension) === 'undefined') {\n        dimension = 0;\n    }\n    var rows = matrix.length;\n    if (rows === 0) return [];\n    var cols = matrix[0].length,\n        means, i, ii, j, w, row;\n\n    if (dimension === 0) {\n        means = new Array(cols);\n        for (i = 0; i < cols; i++) {\n            means[i] = 0;\n        }\n        for (i = 0; i < rows; i++) {\n            row = matrix[i];\n            w = weights[i];\n            for (j = 0; j < cols; j++) {\n                means[j] += row[j] * w;\n            }\n        }\n    } else if (dimension === 1) {\n        means = new Array(rows);\n        for (i = 0; i < rows; i++) {\n            means[i] = 0;\n        }\n        for (j = 0; j < rows; j++) {\n            row = matrix[j];\n            w = weights[j];\n            for (i = 0; i < cols; i++) {\n                means[j] += row[i] * w;\n            }\n        }\n    } else {\n        throw new Error('Invalid dimension');\n    }\n\n    var weightSum = arrayStat.sum(weights);\n    if (weightSum !== 0) {\n        for (i = 0, ii = means.length; i < ii; i++) {\n            means[i] /= weightSum;\n        }\n    }\n    return means;\n}\n\nfunction weightedCovariance(matrix, weights, means, dimension) {\n    dimension = dimension || 0;\n    means = means || weightedMean(matrix, weights, dimension);\n    var s1 = 0, s2 = 0;\n    for (var i = 0, ii = weights.length; i < ii; i++) {\n        s1 += weights[i];\n        s2 += weights[i] * weights[i];\n    }\n    var factor = s1 / (s1 * s1 - s2);\n    return weightedScatter(matrix, weights, means, factor, dimension);\n}\n\nfunction weightedScatter(matrix, weights, means, factor, dimension) {\n    dimension = dimension || 0;\n    means = means || weightedMean(matrix, weights, dimension);\n    if (typeof(factor) === 'undefined') {\n        factor = 1;\n    }\n    var rows = matrix.length;\n    if (rows === 0) {\n        return [[]];\n    }\n    var cols = matrix[0].length,\n        cov, i, j, k, s;\n\n    if (dimension === 0) {\n        cov = new Array(cols);\n        for (i = 0; i < cols; i++) {\n            cov[i] = new Array(cols);\n        }\n        for (i = 0; i < cols; i++) {\n            for (j = i; j < cols; j++) {\n                s = 0;\n                for (k = 0; k < rows; k++) {\n                    s += weights[k] * (matrix[k][j] - means[j]) * (matrix[k][i] - means[i]);\n                }\n                cov[i][j] = s * factor;\n                cov[j][i] = s * factor;\n            }\n        }\n    } else if (dimension === 1) {\n        cov = new Array(rows);\n        for (i = 0; i < rows; i++) {\n            cov[i] = new Array(rows);\n        }\n        for (i = 0; i < rows; i++) {\n            for (j = i; j < rows; j++) {\n                s = 0;\n                for (k = 0; k < cols; k++) {\n                    s += weights[k] * (matrix[j][k] - means[j]) * (matrix[i][k] - means[i]);\n                }\n                cov[i][j] = s * factor;\n                cov[j][i] = s * factor;\n            }\n        }\n    } else {\n        throw new Error('Invalid dimension');\n    }\n\n    return cov;\n}\n\nmodule.exports = {\n    entropy: entropy,\n    mean: mean,\n    standardDeviation: standardDeviation,\n    variance: variance,\n    median: median,\n    mode: mode,\n    skewness: skewness,\n    kurtosis: kurtosis,\n    standardError: standardError,\n    covariance: covariance,\n    scatter: scatter,\n    correlation: correlation,\n    zScores: zScores,\n    center: center,\n    standardize: standardize,\n    weightedVariance: weightedVariance,\n    weightedMean: weightedMean,\n    weightedCovariance: weightedCovariance,\n    weightedScatter: weightedScatter\n};\n","/**\n * Created by acastillo on 9/6/15.\n */\n'use strict';\n\nvar optimize = require('ml-optimize-lorentzian');\n\nfunction sampleFunction(from, to, x, y, lastIndex) {\n  var nbPoints = x.length;\n  var sampleX = [];\n  var sampleY = [];\n  var direction = Math.sign(x[1] - x[0]); // Direction of the derivative\n  if (direction === -1) {\n    lastIndex[0] = x.length - 1;\n  }\n\n  var delta = Math.abs(to - from) / 2;\n  var mid = (from + to) / 2;\n  var stop = false;\n  var index = lastIndex[0];\n  while (!stop && index < nbPoints && index >= 0) {\n    if (Math.abs(x[index] - mid) <= delta) {\n      sampleX.push(x[index]);\n      sampleY.push(y[index]);\n      index += direction;\n    } else {\n      // It is outside the range.\n      if (Math.sign(mid - x[index]) === 1) {\n        // We'll reach the mid going in the current direction\n        index += direction;\n      } else {\n        // There is not more peaks in the current range\n        stop = true;\n      }\n    }\n    // console.log(sampleX);\n  }\n  lastIndex[0] = index;\n  return [sampleX, sampleY];\n}\n\nmodule.exports = function optimizePeaks(peakList, x, y, n, fnType) {\n  var i;\n  var j;\n\n  var lastIndex = [0];\n  var groups = groupPeaks(peakList, n);\n  var result = [];\n  var factor = 1;\n  if (fnType === 'gaussian') {\n    factor = 1.17741;\n  } // From https://en.wikipedia.org/wiki/Gaussian_function#Properties\n  var sampling, error, opts;\n  for (i = 0; i < groups.length; i++) {\n    var peaks = groups[i].group;\n    if (peaks.length > 1) {\n      // Multiple peaks\n      // console.log(\"Pending group of overlaped peaks \"+peaks.length);\n      // console.log(\"here1\");\n      // console.log(groups[i].limits);\n      sampling = sampleFunction(\n        groups[i].limits[0] - groups[i].limits[1],\n        groups[i].limits[0] + groups[i].limits[1],\n        x,\n        y,\n        lastIndex\n      );\n      // console.log(sampling);\n      if (sampling[0].length > 5) {\n        error = peaks[0].width / 1000;\n        opts = [3, 100, error, error, error, error * 10, error * 10, 11, 9, 1];\n        // var gauss = Opt.optimizeSingleGaussian(sampling[0], sampling[1], opts, peaks);\n        var optPeaks = [];\n        if (fnType === 'gaussian') {\n          optPeaks = optimize.optimizeGaussianSum(sampling, peaks, opts);\n        } else {\n          if (fnType === 'lorentzian') {\n            optPeaks = optimize.optimizeLorentzianSum(sampling, peaks, opts);\n          }\n        }\n        // console.log(optPeak);\n        for (j = 0; j < optPeaks.length; j++) {\n          result.push({\n            x: optPeaks[j][0][0],\n            y: optPeaks[j][1][0],\n            width: optPeaks[j][2][0] * factor\n          });\n        }\n      }\n    } else {\n      // Single peak\n      peaks = peaks[0];\n      sampling = sampleFunction(\n        peaks.x - n * peaks.width,\n        peaks.x + n * peaks.width,\n        x,\n        y,\n        lastIndex\n      );\n      // console.log(\"here2\");\n      // console.log(groups[i].limits);\n      if (sampling[0].length > 5) {\n        error = peaks.width / 1000;\n        opts = [3, 100, error, error, error, error * 10, error * 10, 11, 9, 1];\n        // var gauss = Opt.optimizeSingleGaussian(sampling[0], sampling[1], opts, peaks);\n        // var gauss = Opt.optimizeSingleGaussian([sampling[0],sampling[1]], peaks, opts);\n        var optPeak = [];\n        if (fnType === 'gaussian') {\n          optPeak = optimize.optimizeSingleGaussian(\n            [sampling[0], sampling[1]],\n            peaks,\n            opts\n          );\n        } else {\n          if (fnType === 'lorentzian') {\n            optPeak = optimize.optimizeSingleLorentzian(\n              [sampling[0], sampling[1]],\n              peaks,\n              opts\n            );\n          }\n        }\n        // console.log(optPeak);\n        result.push({\n          x: optPeak[0][0],\n          y: optPeak[1][0],\n          width: optPeak[2][0] * factor\n        }); // From https://en.wikipedia.org/wiki/Gaussian_function#Properties}\n      }\n    }\n  }\n  return result;\n};\n\nfunction groupPeaks(peakList, nL) {\n  var group = [];\n  var groups = [];\n  var i, j;\n  var limits = [peakList[0].x, nL * peakList[0].width];\n  var upperLimit, lowerLimit;\n  // Merge forward\n  for (i = 0; i < peakList.length; i++) {\n    // If the 2 things overlaps\n    if (\n      Math.abs(peakList[i].x - limits[0]) <\n      nL * peakList[i].width + limits[1]\n    ) {\n      // Add the peak to the group\n      group.push(peakList[i]);\n      // Update the group limits\n      upperLimit = limits[0] + limits[1];\n      if (peakList[i].x + nL * peakList[i].width > upperLimit) {\n        upperLimit = peakList[i].x + nL * peakList[i].width;\n      }\n      lowerLimit = limits[0] - limits[1];\n      if (peakList[i].x - nL * peakList[i].width < lowerLimit) {\n        lowerLimit = peakList[i].x - nL * peakList[i].width;\n      }\n      limits = [\n        (upperLimit + lowerLimit) / 2,\n        Math.abs(upperLimit - lowerLimit) / 2\n      ];\n    } else {\n      groups.push({ limits: limits, group: group });\n      // var optmimalPeak = fitSpectrum(group,limits,spectrum);\n      group = [peakList[i]];\n      limits = [peakList[i].x, nL * peakList[i].width];\n    }\n  }\n  groups.push({ limits: limits, group: group });\n  // Merge backward\n  for (i = groups.length - 2; i >= 0; i--) {\n    // The groups overlaps\n    if (\n      Math.abs(groups[i].limits[0] - groups[i + 1].limits[0]) <\n      (groups[i].limits[1] + groups[i + 1].limits[1]) / 2\n    ) {\n      for (j = 0; j < groups[i + 1].group.length; j++) {\n        groups[i].group.push(groups[i + 1].group[j]);\n      }\n      upperLimit = groups[i].limits[0] + groups[i].limits[1];\n      if (groups[i + 1].limits[0] + groups[i + 1].limits[1] > upperLimit) {\n        upperLimit = groups[i + 1].limits[0] + groups[i + 1].limits[1];\n      }\n      lowerLimit = groups[i].limits[0] - groups[i].limits[1];\n      if (groups[i + 1].limits[0] - groups[i + 1].limits[1] < lowerLimit) {\n        lowerLimit = groups[i + 1].limits[0] - groups[i + 1].limits[1];\n      }\n      // console.log(limits);\n      groups[i].limits = [\n        (upperLimit + lowerLimit) / 2,\n        Math.abs(upperLimit - lowerLimit) / 2\n      ];\n\n      groups.splice(i + 1, 1);\n    }\n  }\n  return groups;\n}\n","'use strict';\n\nmodule.exports = require('./LM');\nmodule.exports.Matrix = require('ml-matrix');\nmodule.exports.Matrix.algebra = require('./algebra');\n","/**\n * Created by acastillo on 8/5/15.\n */\nvar Matrix = require(\"ml-matrix\");\nvar math = require(\"./algebra\");\n\nvar DEBUG = false;\n/** Levenberg Marquardt curve-fitting: minimize sum of weighted squared residuals\n ----------  INPUT  VARIABLES  -----------\n func   = function of n independent variables, 't', and m parameters, 'p',\n returning the simulated model: y_hat = func(t,p,c)\n p      = n-vector of initial guess of parameter values\n t      = m-vectors or matrix of independent variables (used as arg to func)\n y_dat  = m-vectors or matrix of data to be fit by func(t,p)\n weight = weighting vector for least squares fit ( weight >= 0 ) ...\n inverse of the standard measurement errors\n Default:  sqrt(d.o.f. / ( y_dat' * y_dat ))\n dp     = fractional increment of 'p' for numerical derivatives\n dp(j)>0 central differences calculated\n dp(j)<0 one sided 'backwards' differences calculated\n dp(j)=0 sets corresponding partials to zero; i.e. holds p(j) fixed\n Default:  0.001;\n p_min  = n-vector of lower bounds for parameter values\n p_max  = n-vector of upper bounds for parameter values\n c      = an optional matrix of values passed to func(t,p,c)\n opts   = vector of algorithmic parameters\n parameter    defaults    meaning\n opts(1)  =  prnt            3        >1 intermediate results; >2 plots\n opts(2)  =  MaxIter      10*Npar     maximum number of iterations\n opts(3)  =  epsilon_1       1e-3     convergence tolerance for gradient\n opts(4)  =  epsilon_2       1e-3     convergence tolerance for parameters\n opts(5)  =  epsilon_3       1e-3     convergence tolerance for Chi-square\n opts(6)  =  epsilon_4       1e-2     determines acceptance of a L-M step\n opts(7)  =  lambda_0        1e-2     initial value of L-M paramter\n opts(8)  =  lambda_UP_fac   11       factor for increasing lambda\n opts(9)  =  lambda_DN_fac    9       factor for decreasing lambda\n opts(10) =  Update_Type      1       1: Levenberg-Marquardt lambda update\n 2: Quadratic update\n 3: Nielsen's lambda update equations\n\n ----------  OUTPUT  VARIABLES  -----------\n p       = least-squares optimal estimate of the parameter values\n X2      = Chi squared criteria\n sigma_p = asymptotic standard error of the parameters\n sigma_y = asymptotic standard error of the curve-fit\n corr    = correlation matrix of the parameters\n R_sq    = R-squared cofficient of multiple determination\n cvg_hst = convergence history\n\n Henri Gavin, Dept. Civil & Environ. Engineering, Duke Univ. 22 Sep 2013\n modified from: http://octave.sourceforge.net/optim/function/leasqr.html\n using references by\n Press, et al., Numerical Recipes, Cambridge Univ. Press, 1992, Chapter 15.\n Sam Roweis       http://www.cs.toronto.edu/~roweis/notes/lm.pdf\n Manolis Lourakis http://www.ics.forth.gr/~lourakis/levmar/levmar.pdf\n Hans Nielson     http://www2.imm.dtu.dk/~hbn/publ/TR9905.ps\n Mathworks        optimization toolbox reference manual\n K. Madsen, H.B., Nielsen, and O. Tingleff\n http://www2.imm.dtu.dk/pubdb/views/edoc_download.php/3215/pdf/imm3215.pdf\n */\nvar LM = {\n\n    optimize: function(func,p,t,y_dat,weight,dp,p_min,p_max,c,opts){\n\n        var tensor_parameter = 0;\t\t\t// set to 1 of parameter is a tensor\n\n        var iteration  = 0;\t\t\t// iteration counter\n        //func_calls = 0;\t\t\t// running count of function evaluations\n\n        if((typeof p[0])!=\"object\"){\n            for(var i=0;i< p.length;i++){\n                p[i]=[p[i]];\n            }\n\n        }\n        //p = p(:); y_dat = y_dat(:); \t\t// make column vectors\n        var i,k;\n        var eps = 2^-52;\n        var Npar   = p.length;//length(p); \t\t\t// number of parameters\n        var Npnt   = y_dat.length;//length(y_dat);\t\t// number of data points\n        var p_old  = Matrix.zeros(Npar,1);\t\t// previous set of parameters\n        var y_old  = Matrix.zeros(Npnt,1);\t\t// previous model, y_old = y_hat(t;p_old)\n        var X2     = 1e-2/eps;\t\t\t// a really big initial Chi-sq value\n        var X2_old = 1e-2/eps;\t\t\t// a really big initial Chi-sq value\n        var J =  Matrix.zeros(Npnt,Npar);\n\n\n        if (t.length != y_dat.length) {\n            console.log('lm.m error: the length of t must equal the length of y_dat');\n\n            length_t = t.length;\n            length_y_dat = y_dat.length;\n            var X2 = 0, corr = 0, sigma_p = 0, sigma_y = 0, R_sq = 0, cvg_hist = 0;\n            if (!tensor_parameter) {\n                return;\n            }\n        }\n\n        weight = weight||Math.sqrt((Npnt-Npar+1)/(math.multiply(math.transpose(y_dat),y_dat)));\n        dp = dp || 0.001;\n        p_min   = p_min || math.multiply(Math.abs(p),-100);\n        p_max   = p_max || math.multiply(Math.abs(p),100);\n        c = c || 1;\n        // Algorithmic Paramters\n        //prnt MaxIter  eps1  eps2  epx3  eps4  lam0  lamUP lamDN UpdateType\n        opts = opts ||[  3,10*Npar, 1e-3, 1e-3, 1e-3, 1e-2, 1e-2, 11, 9, 1 ];\n\n        var prnt          = opts[0];\t// >1 intermediate results; >2 plots\n        var MaxIter       = opts[1];\t// maximum number of iterations\n        var epsilon_1     = opts[2];\t// convergence tolerance for gradient\n        var epsilon_2     = opts[3];\t// convergence tolerance for parameter\n        var epsilon_3     = opts[4];\t// convergence tolerance for Chi-square\n        var epsilon_4     = opts[5];\t// determines acceptance of a L-M step\n        var lambda_0      = opts[6];\t// initial value of damping paramter, lambda\n        var lambda_UP_fac = opts[7];\t// factor for increasing lambda\n        var lambda_DN_fac = opts[8];\t// factor for decreasing lambda\n        var Update_Type   = opts[9];\t// 1: Levenberg-Marquardt lambda update\n        // 2: Quadratic update\n        // 3: Nielsen's lambda update equations\n\n        if ( tensor_parameter && prnt == 3 ) prnt = 2;\n\n\n        if(!dp.length || dp.length == 1){\n            var dp_array = new Array(Npar);\n            for(var i=0;i<Npar;i++)\n                dp_array[i]=[dp];\n            dp=dp_array;\n        }\n\n        // indices of the parameters to be fit\n        var idx   = [];\n        for(i=0;i<dp.length;i++){\n            if(dp[i][0]!=0){\n                idx.push(i);\n            }\n        }\n\n        var Nfit = idx.length;\t\t\t// number of parameters to fit\n        var stop = false;\t\t\t\t// termination flag\n\n        var weight_sq = null;\n        //console.log(weight);\n        if ( !weight.length || weight.length < Npnt )\t{\n            // squared weighting vector\n            //weight_sq = ( weight(1)*ones(Npnt,1) ).^2;\n            //console.log(\"weight[0] \"+typeof weight[0]);\n            var tmp = math.multiply(Matrix.ones(Npnt,1),weight[0]);\n            weight_sq = math.dotMultiply(tmp,tmp);\n        }\n        else{\n            //weight_sq = (weight(:)).^2;\n            weight_sq = math.dotMultiply(weight,weight);\n        }\n\n\n        // initialize Jacobian with finite difference calculation\n        //console.log(\"J \"+weight_sq);\n        var result = this.lm_matx(func,t,p_old,y_old,1,J,p,y_dat,weight_sq,dp,c);\n        var JtWJ = result.JtWJ,JtWdy=result.JtWdy,X2=result.Chi_sq,y_hat=result.y_hat,J=result.J;\n        //[JtWJ,JtWdy,X2,y_hat,J] = this.lm_matx(func,t,p_old,y_old,1,J,p,y_dat,weight_sq,dp,c);\n        //console.log(JtWJ);\n\n        if ( Math.max(Math.abs(JtWdy)) < epsilon_1 ){\n            console.log(' *** Your Initial Guess is Extremely Close to Optimal ***')\n            console.log(' *** epsilon_1 = ', epsilon_1);\n            stop = true;\n        }\n\n\n        switch(Update_Type){\n            case 1: // Marquardt: init'l lambda\n                lambda  = lambda_0;\n                break;\n            default:    // Quadratic and Nielsen\n                lambda  = lambda_0 * Math.max(math.diag(JtWJ));\n                nu=2;\n        }\n        //console.log(X2);\n        X2_old = X2; // previous value of X2\n        //console.log(MaxIter+\" \"+Npar);\n        //var cvg_hst = Matrix.ones(MaxIter,Npar+3);\t\t// initialize convergence history\n        var h = null;\n        while ( !stop && iteration <= MaxIter ) {\t\t// --- Main Loop\n            iteration = iteration + 1;\n            // incremental change in parameters\n            switch(Update_Type){\n                case 1:\t\t\t\t\t// Marquardt\n                    //h = ( JtWJ + lambda * math.diag(math.diag(JtWJ)) ) \\ JtWdy;\n                    //h = math.multiply(math.inv(JtWdy),math.add(JtWJ,math.multiply(lambda,math.diag(math.diag(Npar)))));\n                    h = math.solve(math.add(JtWJ,math.multiply(math.diag(math.diag(JtWJ)),lambda)),JtWdy);\n                    break;\n                default:\t\t\t\t\t// Quadratic and Nielsen\n                    //h = ( JtWJ + lambda * math.eye(Npar) ) \\ JtWdy;\n\n                    h = math.solve(math.add(JtWJ,math.multiply( Matrix.eye(Npar),lambda)),JtWdy);\n            }\n\n            /*for(var k=0;k< h.length;k++){\n             h[k]=[h[k]];\n             }*/\n            //console.log(\"h \"+h);\n            //h=math.matrix(h);\n            //  big = max(abs(h./p)) > 2;\n            //this is a big step\n            // --- Are parameters [p+h] much better than [p] ?\n            var hidx = new Array(idx.length);\n            for(k=0;k<idx.length;k++){\n                hidx[k]=h[idx[k]];\n            }\n            var p_try = math.add(p, hidx);// update the [idx] elements\n\n            for(k=0;k<p_try.length;k++){\n                p_try[k][0]=Math.min(Math.max(p_min[k][0],p_try[k][0]),p_max[k][0]);\n            }\n            // p_try = Math.min(Math.max(p_min,p_try),p_max);           // apply constraints\n\n            var delta_y = math.subtract(y_dat, func(t,p_try,c));       // residual error using p_try\n            //func_calls = func_calls + 1;\n            //X2_try = delta_y' * ( delta_y .* weight_sq );  // Chi-squared error criteria\n\n            var X2_try = math.multiply(math.transpose(delta_y),math.dotMultiply(delta_y,weight_sq));\n\n            if ( Update_Type == 2 ){  \t\t\t  // Quadratic\n                //    One step of quadratic line update in the h direction for minimum X2\n                //var alpha =  JtWdy'*h / ( (X2_try - X2)/2 + 2*JtWdy'*h ) ;\n                var JtWdy_th = math.multiply(math.transpose(JtWdy),h);\n                var alpha =  math.multiply(JtWdy_th,math.inv(math.add(math.multiply(math.subtract(X2_try - X2),1/2)),math.multiply(JtWdy_th,2)));//JtWdy'*h / ( (X2_try - X2)/2 + 2*JtWdy'*h ) ;\n\n                h = math.multiply(alpha, h);\n                for(var k=0;k<idx.length;k++){\n                    hidx[k]=h[idx[k]];\n                }\n\n                p_try = math.add(p ,hidx);                     // update only [idx] elements\n                p_try = math.min(math.max(p_min,p_try),p_max);          // apply constraints\n\n                delta_y = math.subtract(y_dat, func(t,p_try,c));      // residual error using p_try\n                // func_calls = func_calls + 1;\n                //X2_try = delta_y' * ( delta_y .* weight_sq ); // Chi-squared error criteria\n                X2_try = math.multiply(math.transpose(delta_y), mat.dotMultiply(delta_y, weight_sq));\n            }\n\n            //rho = (X2 - X2_try) / ( 2*h' * (lambda * h + JtWdy) ); // Nielsen\n            var rho = (X2-X2_try)/math.multiply(math.multiply(math.transpose(h),2),math.add(math.multiply(lambda, h),JtWdy));\n            //console.log(\"rho \"+rho);\n            if ( rho > epsilon_4 ) {\t\t// it IS significantly better\n                //console.log(\"Here\");\n                dX2 = X2 - X2_old;\n                X2_old = X2;\n                p_old = p;\n                y_old = y_hat;\n                p = p_try;\t\t\t// accept p_try\n\n                result = this.lm_matx(func, t, p_old, y_old, dX2, J, p, y_dat, weight_sq, dp, c);\n                JtWJ = result.JtWJ,JtWdy=result.JtWdy,X2=result.Chi_sq,y_hat=result.y_hat,J=result.J;\n                // decrease lambda ==> Gauss-Newton method\n\n                switch (Update_Type) {\n                    case 1:\t\t\t\t\t\t\t// Levenberg\n                        lambda = Math.max(lambda / lambda_DN_fac, 1.e-7);\n                        break;\n                    case 2:\t\t\t\t\t\t\t// Quadratic\n                        lambda = Math.max(lambda / (1 + alpha), 1.e-7);\n                        break;\n                    case 3:\t\t\t\t\t\t\t// Nielsen\n                        lambda = math.multiply(Math.max(1 / 3, 1 - (2 * rho - 1) ^ 3),lambda);\n                        nu = 2;\n                        break;\n                }\n            }\n            else {\t\t\t\t\t// it IS NOT better\n                X2 = X2_old;\t\t\t// do not accept p_try\n                if (iteration%(2 * Npar)==0) {\t// rank-1 update of Jacobian\n                    result = this.lm_matx(func, t, p_old, y_old, -1, J, p, y_dat, weight_sq, dp, c);\n                    JtWJ = result.JtWJ,JtWdy=result.JtWdy,dX2=result.Chi_sq,y_hat=result.y_hat,J=result.J;\n                }\n\n                // increase lambda  ==> gradient descent method\n                switch (Update_Type) {\n                    case 1:\t\t\t\t\t\t\t// Levenberg\n                        lambda = Math.min(lambda * lambda_UP_fac, 1.e7);\n                        break;\n                    case 2:\t\t\t\t\t\t\t// Quadratic\n                        lambda = lambda + Math.abs((X2_try - X2) / 2 / alpha);\n                        break;\n                    case 3:\t\t\t\t\t\t// Nielsen\n                        lambda = lambda * nu;\n                        nu = 2 * nu;\n                        break;\n                }\n            }\n        }// --- End of Main Loop\n\n        // --- convergence achieved, find covariance and confidence intervals\n\n        // equal weights for paramter error analysis\n        weight_sq = math.multiply(math.multiply(math.transpose(delta_y),delta_y), Matrix.ones(Npnt,1));\n\n        weight_sq.apply(function(i,j){\n            weight_sq[i][j] = (Npnt-Nfit+1)/weight_sq[i][j];\n        });\n        //console.log(weight_sq);\n        result = this.lm_matx(func,t,p_old,y_old,-1,J,p,y_dat,weight_sq,dp,c);\n        JtWJ = result.JtWJ,JtWdy=result.JtWdy,X2=result.Chi_sq,y_hat=result.y_hat,J=result.J;\n\n        /*if nargout > 2\t\t\t\t// standard error of parameters\n         covar = inv(JtWJ);\n         sigma_p = sqrt(diag(covar));\n         end\n\n         if nargout > 3\t\t\t\t// standard error of the fit\n         //  sigma_y = sqrt(diag(J * covar * J'));\t// slower version of below\n         sigma_y = zeros(Npnt,1);\n         for i=1:Npnt\n         sigma_y(i) = J(i,:) * covar * J(i,:)';\n         end\n         sigma_y = sqrt(sigma_y);\n         end\n\n         if nargout > 4\t\t\t\t// parameter correlation matrix\n         corr = covar ./ [sigma_p*sigma_p'];\n         end\n\n         if nargout > 5\t\t\t\t// coefficient of multiple determination\n         R_sq = corrcoef([y_dat y_hat]);\n         R_sq = R_sq(1,2).^2;\n         end\n\n         if nargout > 6\t\t\t\t// convergence history\n         cvg_hst = cvg_hst(1:iteration,:);\n         end*/\n\n        // endfunction  # ---------------------------------------------------------- LM\n\n        return { p:p, X2:X2};\n    },\n\n    lm_FD_J:function(func,t,p,y,dp,c) {\n        // J = lm_FD_J(func,t,p,y,{dp},{c})\n        //\n        // partial derivatives (Jacobian) dy/dp for use with lm.m\n        // computed via Finite Differences\n        // Requires n or 2n function evaluations, n = number of nonzero values of dp\n        // -------- INPUT VARIABLES ---------\n        // func = function of independent variables, 't', and parameters, 'p',\n        //        returning the simulated model: y_hat = func(t,p,c)\n        // t  = m-vector of independent variables (used as arg to func)\n        // p  = n-vector of current parameter values\n        // y  = func(t,p,c) n-vector initialised by user before each call to lm_FD_J\n        // dp = fractional increment of p for numerical derivatives\n        //      dp(j)>0 central differences calculated\n        //      dp(j)<0 one sided differences calculated\n        //      dp(j)=0 sets corresponding partials to zero; i.e. holds p(j) fixed\n        //      Default:  0.001;\n        // c  = optional vector of constants passed to y_hat = func(t,p,c)\n        //---------- OUTPUT VARIABLES -------\n        // J  = Jacobian Matrix J(i,j)=dy(i)/dp(j)\ti=1:n; j=1:m\n\n        //   Henri Gavin, Dept. Civil & Environ. Engineering, Duke Univ. November 2005\n        //   modified from: ftp://fly.cnuce.cnr.it/pub/software/octave/leasqr/\n        //   Press, et al., Numerical Recipes, Cambridge Univ. Press, 1992, Chapter 15.\n\n        var m = y.length;\t\t\t// number of data points\n        var n = p.length;\t\t\t// number of parameters\n\n        dp = dp || math.multiply( Matrix.ones(n, 1), 0.001);\n\n        var ps = p.clone();//JSON.parse(JSON.stringify(p));\n        //var ps = $.extend(true, [], p);\n        var J = new Matrix(m,n), del =new Array(n);         // initialize Jacobian to Zero\n\n        for (var j = 0;j < n; j++) {\n            //console.log(j+\" \"+dp[j]+\" \"+p[j]+\" \"+ps[j]+\" \"+del[j]);\n            del[j] = dp[j]*(1+Math.abs(p[j][0]));  // parameter perturbation\n            p[j] = [ps[j][0]+del[j]];\t      // perturb parameter p(j)\n            //console.log(j+\" \"+dp[j]+\" \"+p[j]+\" \"+ps[j]+\" \"+del[j]);\n\n            if (del[j] != 0){\n                y1 = func(t, p, c);\n                //func_calls = func_calls + 1;\n                if (dp[j][0] < 0) {\t\t// backwards difference\n                    //J(:,j) = math.dotDivide(math.subtract(y1, y),del[j]);//. / del[j];\n                    //console.log(del[j]);\n                    //console.log(y);\n                    var column = math.dotDivide(math.subtract(y1, y),del[j]);\n                    for(var k=0;k< m;k++){\n                        J[k][j]=column[k][0];\n                    }\n                    //console.log(column);\n                }\n                else{\n                    p[j][0] = ps[j][0] - del[j];\n                    //J(:,j) = (y1 - feval(func, t, p, c)). / (2. * del[j]);\n                    var column = math.dotDivide(math.subtract(y1,func(t,p,c)),2*del[j]);\n                    for(var k=0;k< m;k++){\n                        J[k][j]=column[k][0];\n                    }\n\n                }\t\t\t// central difference, additional func call\n            }\n\n            p[j] = ps[j];\t\t// restore p(j)\n\n        }\n        //console.log(\"lm_FD_J: \"+ JSON.stringify(J));\n        return J;\n\n    },\n\n    // endfunction # -------------------------------------------------- LM_FD_J\n    lm_Broyden_J: function(p_old,y_old,J,p,y){\n        // J = lm_Broyden_J(p_old,y_old,J,p,y)\n        // carry out a rank-1 update to the Jacobian matrix using Broyden's equation\n        //---------- INPUT VARIABLES -------\n        // p_old = previous set of parameters\n        // y_old = model evaluation at previous set of parameters, y_hat(t;p_old)\n        // J  = current version of the Jacobian matrix\n        // p     = current  set of parameters\n        // y     = model evaluation at current  set of parameters, y_hat(t;p)\n        //---------- OUTPUT VARIABLES -------\n        // J = rank-1 update to Jacobian Matrix J(i,j)=dy(i)/dp(j)\ti=1:n; j=1:m\n        //console.log(p+\" X \"+ p_old)\n        var h  = math.subtract(p, p_old);\n\n        //console.log(\"hhh \"+h);\n        var h_t = math.transpose(h);\n        h_t.div(math.multiply(h_t,h));\n\n        //console.log(h_t);\n        //J = J + ( y - y_old - J*h )*h' / (h'*h);\t// Broyden rank-1 update eq'n\n        J = math.add(J, math.multiply(math.subtract(y, math.add(y_old,math.multiply(J,h))),h_t));\n        return J;\n        // endfunction # ---------------------------------------------- LM_Broyden_J\n    },\n\n    lm_matx : function (func,t,p_old,y_old,dX2,J,p,y_dat,weight_sq,dp,c,iteration){\n        // [JtWJ,JtWdy,Chi_sq,y_hat,J] = this.lm_matx(func,t,p_old,y_old,dX2,J,p,y_dat,weight_sq,{da},{c})\n        //\n        // Evaluate the linearized fitting matrix, JtWJ, and vector JtWdy,\n        // and calculate the Chi-squared error function, Chi_sq\n        // Used by Levenberg-Marquard algorithm, lm.m\n        // -------- INPUT VARIABLES ---------\n        // func   = function ofpn independent variables, p, and m parameters, p,\n        //         returning the simulated model: y_hat = func(t,p,c)\n        // t      = m-vectors or matrix of independent variables (used as arg to func)\n        // p_old  = n-vector of previous parameter values\n        // y_old  = m-vector of previous model ... y_old = y_hat(t;p_old);\n        // dX2    = previous change in Chi-squared criteria\n        // J   = m-by-n Jacobian of model, y_hat, with respect to parameters, p\n        // p      = n-vector of current  parameter values\n        // y_dat  = n-vector of data to be fit by func(t,p,c)\n        // weight_sq = square of the weighting vector for least squares fit ...\n        //\t    inverse of the standard measurement errors\n        // dp     = fractional increment of 'p' for numerical derivatives\n        //          dp(j)>0 central differences calculated\n        //          dp(j)<0 one sided differences calculated\n        //          dp(j)=0 sets corresponding partials to zero; i.e. holds p(j) fixed\n        //          Default:  0.001;\n        // c      = optional vector of constants passed to y_hat = func(t,p,c)\n        //---------- OUTPUT VARIABLES -------\n        // JtWJ\t = linearized Hessian matrix (inverse of covariance matrix)\n        // JtWdy   = linearized fitting vector\n        // Chi_sq = Chi-squared criteria: weighted sum of the squared residuals WSSR\n        // y_hat  = model evaluated with parameters 'p'\n        // J   = m-by-n Jacobian of model, y_hat, with respect to parameters, p\n\n        //   Henri Gavin, Dept. Civil & Environ. Engineering, Duke Univ. November 2005\n        //   modified from: ftp://fly.cnuce.cnr.it/pub/software/octave/leasqr/\n        //   Press, et al., Numerical Recipes, Cambridge Univ. Press, 1992, Chapter 15.\n\n\n        var Npnt = y_dat.length;\t\t// number of data points\n        var Npar = p.length;\t\t// number of parameters\n\n        dp = dp || 0.001;\n\n\n        //var JtWJ = new Matrix.zeros(Npar);\n        //var JtWdy  = new Matrix.zeros(Npar,1);\n\n        var y_hat = func(t,p,c);\t// evaluate model using parameters 'p'\n        //func_calls = func_calls + 1;\n        //console.log(J);\n        if ( (iteration%(2*Npar))==0 || dX2 > 0 ) {\n            //console.log(\"Par\");\n            J = this.lm_FD_J(func, t, p, y_hat, dp, c);\t\t// finite difference\n        }\n        else{\n            //console.log(\"ImPar\");\n            J = this.lm_Broyden_J(p_old, y_old, J, p, y_hat); // rank-1 update\n        }\n        //console.log(y_dat);\n        //console.log(y_hat);\n        var delta_y = math.subtract(y_dat, y_hat);\t// residual error between model and data\n        //console.log(delta_y[0][0]);\n        //console.log(delta_y.rows+\" \"+delta_y.columns+\" \"+JSON.stringify(weight_sq));\n        //var Chi_sq = delta_y' * ( delta_y .* weight_sq ); \t// Chi-squared error criteria\n        var Chi_sq = math.multiply(math.transpose(delta_y),math.dotMultiply(delta_y,weight_sq));\n        //JtWJ  = J' * ( J .* ( weight_sq * ones(1,Npar) ) );\n        var Jt = math.transpose(J);\n\n        //console.log(weight_sq);\n\n        var JtWJ = math.multiply(Jt, math.dotMultiply(J,math.multiply(weight_sq, Matrix.ones(1,Npar))));\n\n        //JtWdy = J' * ( weight_sq .* delta_y );\n        var JtWdy = math.multiply(Jt, math.dotMultiply(weight_sq,delta_y));\n\n\n        return {JtWJ:JtWJ,JtWdy:JtWdy,Chi_sq:Chi_sq,y_hat:y_hat,J:J};\n        // endfunction  # ------------------------------------------------------ LM_MATX\n    }\n\n\n\n};\n\nmodule.exports = LM;","'use strict';\n\nif (!Symbol.species) {\n    Symbol.species = Symbol.for('@@species');\n}\n","module.exports = exports = require('./ArrayUtils');\n\n\nexports.getEquallySpacedData = require('./getEquallySpaced').getEquallySpacedData;\nexports.SNV = require('./snv').SNV;\n","'use strict';\n\nconst Stat = require('ml-stat').array;\n/**\n * Function that returns an array of points given 1D array as follows:\n *\n * [x1, y1, .. , x2, y2, ..]\n *\n * And receive the number of dimensions of each point.\n * @param array\n * @param dimensions\n * @returns {Array} - Array of points.\n */\nfunction coordArrayToPoints(array, dimensions) {\n    if(array.length % dimensions !== 0) {\n        throw new RangeError('Dimensions number must be accordance with the size of the array.');\n    }\n\n    var length = array.length / dimensions;\n    var pointsArr = new Array(length);\n\n    var k = 0;\n    for(var i = 0; i < array.length; i += dimensions) {\n        var point = new Array(dimensions);\n        for(var j = 0; j < dimensions; ++j) {\n            point[j] = array[i + j];\n        }\n\n        pointsArr[k] = point;\n        k++;\n    }\n\n    return pointsArr;\n}\n\n\n/**\n * Function that given an array as follows:\n * [x1, y1, .. , x2, y2, ..]\n *\n * Returns an array as follows:\n * [[x1, x2, ..], [y1, y2, ..], [ .. ]]\n *\n * And receives the number of dimensions of each coordinate.\n * @param array\n * @param dimensions\n * @returns {Array} - Matrix of coordinates\n */\nfunction coordArrayToCoordMatrix(array, dimensions) {\n    if(array.length % dimensions !== 0) {\n        throw new RangeError('Dimensions number must be accordance with the size of the array.');\n    }\n\n    var coordinatesArray = new Array(dimensions);\n    var points = array.length / dimensions;\n    for (var i = 0; i < coordinatesArray.length; i++) {\n        coordinatesArray[i] = new Array(points);\n    }\n\n    for(i = 0; i < array.length; i += dimensions) {\n        for(var j = 0; j < dimensions; ++j) {\n            var currentPoint = Math.floor(i / dimensions);\n            coordinatesArray[j][currentPoint] = array[i + j];\n        }\n    }\n\n    return coordinatesArray;\n}\n\n/**\n * Function that receives a coordinate matrix as follows:\n * [[x1, x2, ..], [y1, y2, ..], [ .. ]]\n *\n * Returns an array of coordinates as follows:\n * [x1, y1, .. , x2, y2, ..]\n *\n * @param coordMatrix\n * @returns {Array}\n */\nfunction coordMatrixToCoordArray(coordMatrix) {\n    var coodinatesArray = new Array(coordMatrix.length * coordMatrix[0].length);\n    var k = 0;\n    for(var i = 0; i < coordMatrix[0].length; ++i) {\n        for(var j = 0; j < coordMatrix.length; ++j) {\n            coodinatesArray[k] = coordMatrix[j][i];\n            ++k;\n        }\n    }\n\n    return coodinatesArray;\n}\n\n/**\n * Tranpose a matrix, this method is for coordMatrixToPoints and\n * pointsToCoordMatrix, that because only transposing the matrix\n * you can change your representation.\n *\n * @param matrix\n * @returns {Array}\n */\nfunction transpose(matrix) {\n    var resultMatrix = new Array(matrix[0].length);\n    for(var i = 0; i < resultMatrix.length; ++i) {\n        resultMatrix[i] = new Array(matrix.length);\n    }\n\n    for (i = 0; i < matrix.length; ++i) {\n        for(var j = 0; j < matrix[0].length; ++j) {\n            resultMatrix[j][i] = matrix[i][j];\n        }\n    }\n\n    return resultMatrix;\n}\n\n/**\n * Function that transform an array of points into a coordinates array\n * as follows:\n * [x1, y1, .. , x2, y2, ..]\n *\n * @param points\n * @returns {Array}\n */\nfunction pointsToCoordArray(points) {\n    var coodinatesArray = new Array(points.length * points[0].length);\n    var k = 0;\n    for(var i = 0; i < points.length; ++i) {\n        for(var j = 0; j < points[0].length; ++j) {\n            coodinatesArray[k] = points[i][j];\n            ++k;\n        }\n    }\n\n    return coodinatesArray;\n}\n\n/**\n * Apply the dot product between the smaller vector and a subsets of the\n * largest one.\n *\n * @param firstVector\n * @param secondVector\n * @returns {Array} each dot product of size of the difference between the\n *                  larger and the smallest one.\n */\nfunction applyDotProduct(firstVector, secondVector) {\n    var largestVector, smallestVector;\n    if(firstVector.length <= secondVector.length) {\n        smallestVector = firstVector;\n        largestVector = secondVector;\n    } else {\n        smallestVector = secondVector;\n        largestVector = firstVector;\n    }\n\n    var difference = largestVector.length - smallestVector.length + 1;\n    var dotProductApplied = new Array(difference);\n\n    for (var i = 0; i < difference; ++i) {\n        var sum = 0;\n        for (var j = 0; j < smallestVector.length; ++j) {\n            sum += smallestVector[j] * largestVector[i + j];\n        }\n        dotProductApplied[i] = sum;\n    }\n\n    return dotProductApplied;\n}\n/**\n * To scale the input array between the specified min and max values. The operation is performed inplace\n * if the options.inplace is specified. If only one of the min or max parameters is specified, then the scaling\n * will multiply the input array by min/min(input) or max/max(input)\n * @param input\n * @param options\n * @returns {*}\n */\nfunction scale(input, options){\n    var y;\n    if(options.inPlace){\n        y = input;\n    }\n    else{\n        y = new Array(input.length);\n    }\n    const max = options.max;\n    const min = options.min;\n    if(typeof max === \"number\"){\n        if(typeof min === \"number\"){\n            var minMax = Stat.minMax(input);\n            var factor = (max - min)/(minMax.max-minMax.min);\n            for(var i=0;i< y.length;i++){\n                y[i]=(input[i]-minMax.min)*factor+min;\n            }\n        }\n        else{\n            var currentMin = Stat.max(input);\n            var factor = max/currentMin;\n            for(var i=0;i< y.length;i++){\n                y[i] = input[i]*factor;\n            }\n        }\n    }\n    else{\n        if(typeof min === \"number\"){\n            var currentMin = Stat.min(input);\n            var factor = min/currentMin;\n            for(var i=0;i< y.length;i++){\n                y[i] = input[i]*factor;\n            }\n        }\n    }\n    return y;\n}\n\nmodule.exports = {\n    coordArrayToPoints: coordArrayToPoints,\n    coordArrayToCoordMatrix: coordArrayToCoordMatrix,\n    coordMatrixToCoordArray: coordMatrixToCoordArray,\n    coordMatrixToPoints: transpose,\n    pointsToCoordArray: pointsToCoordArray,\n    pointsToCoordMatrix: transpose,\n    applyDotProduct: applyDotProduct,\n    scale:scale\n};\n\n","'use strict';\n\nvar arrayStat = require('./array');\n\nfunction compareNumbers(a, b) {\n    return a - b;\n}\n\nexports.max = function max(matrix) {\n    var max = -Infinity;\n    for (var i = 0; i < matrix.length; i++) {\n        for (var j = 0; j < matrix[i].length; j++) {\n            if (matrix[i][j] > max) max = matrix[i][j];\n        }\n    }\n    return max;\n};\n\nexports.min = function min(matrix) {\n    var min = Infinity;\n    for (var i = 0; i < matrix.length; i++) {\n        for (var j = 0; j < matrix[i].length; j++) {\n            if (matrix[i][j] < min) min = matrix[i][j];\n        }\n    }\n    return min;\n};\n\nexports.minMax = function minMax(matrix) {\n    var min = Infinity;\n    var max = -Infinity;\n    for (var i = 0; i < matrix.length; i++) {\n        for (var j = 0; j < matrix[i].length; j++) {\n            if (matrix[i][j] < min) min = matrix[i][j];\n            if (matrix[i][j] > max) max = matrix[i][j];\n        }\n    }\n    return {\n        min:min,\n        max:max\n    };\n};\n\nexports.entropy = function entropy(matrix, eps) {\n    if (typeof (eps) === 'undefined') {\n        eps = 0;\n    }\n    var sum = 0,\n        l1 = matrix.length,\n        l2 = matrix[0].length;\n    for (var i = 0; i < l1; i++) {\n        for (var j = 0; j < l2; j++) {\n            sum += matrix[i][j] * Math.log(matrix[i][j] + eps);\n        }\n    }\n    return -sum;\n};\n\nexports.mean = function mean(matrix, dimension) {\n    if (typeof (dimension) === 'undefined') {\n        dimension = 0;\n    }\n    var rows = matrix.length,\n        cols = matrix[0].length,\n        theMean, N, i, j;\n\n    if (dimension === -1) {\n        theMean = [0];\n        N = rows * cols;\n        for (i = 0; i < rows; i++) {\n            for (j = 0; j < cols; j++) {\n                theMean[0] += matrix[i][j];\n            }\n        }\n        theMean[0] /= N;\n    } else if (dimension === 0) {\n        theMean = new Array(cols);\n        N = rows;\n        for (j = 0; j < cols; j++) {\n            theMean[j] = 0;\n            for (i = 0; i < rows; i++) {\n                theMean[j] += matrix[i][j];\n            }\n            theMean[j] /= N;\n        }\n    } else if (dimension === 1) {\n        theMean = new Array(rows);\n        N = cols;\n        for (j = 0; j < rows; j++) {\n            theMean[j] = 0;\n            for (i = 0; i < cols; i++) {\n                theMean[j] += matrix[j][i];\n            }\n            theMean[j] /= N;\n        }\n    } else {\n        throw new Error('Invalid dimension');\n    }\n    return theMean;\n};\n\nexports.sum = function sum(matrix, dimension) {\n    if (typeof (dimension) === 'undefined') {\n        dimension = 0;\n    }\n    var rows = matrix.length,\n        cols = matrix[0].length,\n        theSum, i, j;\n\n    if (dimension === -1) {\n        theSum = [0];\n        for (i = 0; i < rows; i++) {\n            for (j = 0; j < cols; j++) {\n                theSum[0] += matrix[i][j];\n            }\n        }\n    } else if (dimension === 0) {\n        theSum = new Array(cols);\n        for (j = 0; j < cols; j++) {\n            theSum[j] = 0;\n            for (i = 0; i < rows; i++) {\n                theSum[j] += matrix[i][j];\n            }\n        }\n    } else if (dimension === 1) {\n        theSum = new Array(rows);\n        for (j = 0; j < rows; j++) {\n            theSum[j] = 0;\n            for (i = 0; i < cols; i++) {\n                theSum[j] += matrix[j][i];\n            }\n        }\n    } else {\n        throw new Error('Invalid dimension');\n    }\n    return theSum;\n};\n\nexports.product = function product(matrix, dimension) {\n    if (typeof (dimension) === 'undefined') {\n        dimension = 0;\n    }\n    var rows = matrix.length,\n        cols = matrix[0].length,\n        theProduct, i, j;\n\n    if (dimension === -1) {\n        theProduct = [1];\n        for (i = 0; i < rows; i++) {\n            for (j = 0; j < cols; j++) {\n                theProduct[0] *= matrix[i][j];\n            }\n        }\n    } else if (dimension === 0) {\n        theProduct = new Array(cols);\n        for (j = 0; j < cols; j++) {\n            theProduct[j] = 1;\n            for (i = 0; i < rows; i++) {\n                theProduct[j] *= matrix[i][j];\n            }\n        }\n    } else if (dimension === 1) {\n        theProduct = new Array(rows);\n        for (j = 0; j < rows; j++) {\n            theProduct[j] = 1;\n            for (i = 0; i < cols; i++) {\n                theProduct[j] *= matrix[j][i];\n            }\n        }\n    } else {\n        throw new Error('Invalid dimension');\n    }\n    return theProduct;\n};\n\nexports.standardDeviation = function standardDeviation(matrix, means, unbiased) {\n    var vari = exports.variance(matrix, means, unbiased), l = vari.length;\n    for (var i = 0; i < l; i++) {\n        vari[i] = Math.sqrt(vari[i]);\n    }\n    return vari;\n};\n\nexports.variance = function variance(matrix, means, unbiased) {\n    if (typeof (unbiased) === 'undefined') {\n        unbiased = true;\n    }\n    means = means || exports.mean(matrix);\n    var rows = matrix.length;\n    if (rows === 0) return [];\n    var cols = matrix[0].length;\n    var vari = new Array(cols);\n\n    for (var j = 0; j < cols; j++) {\n        var sum1 = 0, sum2 = 0, x = 0;\n        for (var i = 0; i < rows; i++) {\n            x = matrix[i][j] - means[j];\n            sum1 += x;\n            sum2 += x * x;\n        }\n        if (unbiased) {\n            vari[j] = (sum2 - ((sum1 * sum1) / rows)) / (rows - 1);\n        } else {\n            vari[j] = (sum2 - ((sum1 * sum1) / rows)) / rows;\n        }\n    }\n    return vari;\n};\n\nexports.median = function median(matrix) {\n    var rows = matrix.length, cols = matrix[0].length;\n    var medians = new Array(cols);\n\n    for (var i = 0; i < cols; i++) {\n        var data = new Array(rows);\n        for (var j = 0; j < rows; j++) {\n            data[j] = matrix[j][i];\n        }\n        data.sort(compareNumbers);\n        var N = data.length;\n        if (N % 2 === 0) {\n            medians[i] = (data[N / 2] + data[(N / 2) - 1]) * 0.5;\n        } else {\n            medians[i] = data[Math.floor(N / 2)];\n        }\n    }\n    return medians;\n};\n\nexports.mode = function mode(matrix) {\n    var rows = matrix.length,\n        cols = matrix[0].length,\n        modes = new Array(cols),\n        i, j;\n    for (i = 0; i < cols; i++) {\n        var itemCount = new Array(rows);\n        for (var k = 0; k < rows; k++) {\n            itemCount[k] = 0;\n        }\n        var itemArray = new Array(rows);\n        var count = 0;\n\n        for (j = 0; j < rows; j++) {\n            var index = itemArray.indexOf(matrix[j][i]);\n            if (index >= 0) {\n                itemCount[index]++;\n            } else {\n                itemArray[count] = matrix[j][i];\n                itemCount[count] = 1;\n                count++;\n            }\n        }\n\n        var maxValue = 0, maxIndex = 0;\n        for (j = 0; j < count; j++) {\n            if (itemCount[j] > maxValue) {\n                maxValue = itemCount[j];\n                maxIndex = j;\n            }\n        }\n\n        modes[i] = itemArray[maxIndex];\n    }\n    return modes;\n};\n\nexports.skewness = function skewness(matrix, unbiased) {\n    if (typeof (unbiased) === 'undefined') unbiased = true;\n    var means = exports.mean(matrix);\n    var n = matrix.length, l = means.length;\n    var skew = new Array(l);\n\n    for (var j = 0; j < l; j++) {\n        var s2 = 0, s3 = 0;\n        for (var i = 0; i < n; i++) {\n            var dev = matrix[i][j] - means[j];\n            s2 += dev * dev;\n            s3 += dev * dev * dev;\n        }\n\n        var m2 = s2 / n;\n        var m3 = s3 / n;\n        var g = m3 / Math.pow(m2, 3 / 2);\n\n        if (unbiased) {\n            var a = Math.sqrt(n * (n - 1));\n            var b = n - 2;\n            skew[j] = (a / b) * g;\n        } else {\n            skew[j] = g;\n        }\n    }\n    return skew;\n};\n\nexports.kurtosis = function kurtosis(matrix, unbiased) {\n    if (typeof (unbiased) === 'undefined') unbiased = true;\n    var means = exports.mean(matrix);\n    var n = matrix.length, m = matrix[0].length;\n    var kurt = new Array(m);\n\n    for (var j = 0; j < m; j++) {\n        var s2 = 0, s4 = 0;\n        for (var i = 0; i < n; i++) {\n            var dev = matrix[i][j] - means[j];\n            s2 += dev * dev;\n            s4 += dev * dev * dev * dev;\n        }\n        var m2 = s2 / n;\n        var m4 = s4 / n;\n\n        if (unbiased) {\n            var v = s2 / (n - 1);\n            var a = (n * (n + 1)) / ((n - 1) * (n - 2) * (n - 3));\n            var b = s4 / (v * v);\n            var c = ((n - 1) * (n - 1)) / ((n - 2) * (n - 3));\n            kurt[j] = a * b - 3 * c;\n        } else {\n            kurt[j] = m4 / (m2 * m2) - 3;\n        }\n    }\n    return kurt;\n};\n\nexports.standardError = function standardError(matrix) {\n    var samples = matrix.length;\n    var standardDeviations = exports.standardDeviation(matrix);\n    var l = standardDeviations.length;\n    var standardErrors = new Array(l);\n    var sqrtN = Math.sqrt(samples);\n\n    for (var i = 0; i < l; i++) {\n        standardErrors[i] = standardDeviations[i] / sqrtN;\n    }\n    return standardErrors;\n};\n\nexports.covariance = function covariance(matrix, dimension) {\n    return exports.scatter(matrix, undefined, dimension);\n};\n\nexports.scatter = function scatter(matrix, divisor, dimension) {\n    if (typeof (dimension) === 'undefined') {\n        dimension = 0;\n    }\n    if (typeof (divisor) === 'undefined') {\n        if (dimension === 0) {\n            divisor = matrix.length - 1;\n        } else if (dimension === 1) {\n            divisor = matrix[0].length - 1;\n        }\n    }\n    var means = exports.mean(matrix, dimension);\n    var rows = matrix.length;\n    if (rows === 0) {\n        return [[]];\n    }\n    var cols = matrix[0].length,\n        cov, i, j, s, k;\n\n    if (dimension === 0) {\n        cov = new Array(cols);\n        for (i = 0; i < cols; i++) {\n            cov[i] = new Array(cols);\n        }\n        for (i = 0; i < cols; i++) {\n            for (j = i; j < cols; j++) {\n                s = 0;\n                for (k = 0; k < rows; k++) {\n                    s += (matrix[k][j] - means[j]) * (matrix[k][i] - means[i]);\n                }\n                s /= divisor;\n                cov[i][j] = s;\n                cov[j][i] = s;\n            }\n        }\n    } else if (dimension === 1) {\n        cov = new Array(rows);\n        for (i = 0; i < rows; i++) {\n            cov[i] = new Array(rows);\n        }\n        for (i = 0; i < rows; i++) {\n            for (j = i; j < rows; j++) {\n                s = 0;\n                for (k = 0; k < cols; k++) {\n                    s += (matrix[j][k] - means[j]) * (matrix[i][k] - means[i]);\n                }\n                s /= divisor;\n                cov[i][j] = s;\n                cov[j][i] = s;\n            }\n        }\n    } else {\n        throw new Error('Invalid dimension');\n    }\n\n    return cov;\n};\n\nexports.correlation = function correlation(matrix) {\n    var means = exports.mean(matrix),\n        standardDeviations = exports.standardDeviation(matrix, true, means),\n        scores = exports.zScores(matrix, means, standardDeviations),\n        rows = matrix.length,\n        cols = matrix[0].length,\n        i, j;\n\n    var cor = new Array(cols);\n    for (i = 0; i < cols; i++) {\n        cor[i] = new Array(cols);\n    }\n    for (i = 0; i < cols; i++) {\n        for (j = i; j < cols; j++) {\n            var c = 0;\n            for (var k = 0, l = scores.length; k < l; k++) {\n                c += scores[k][j] * scores[k][i];\n            }\n            c /= rows - 1;\n            cor[i][j] = c;\n            cor[j][i] = c;\n        }\n    }\n    return cor;\n};\n\nexports.zScores = function zScores(matrix, means, standardDeviations) {\n    means = means || exports.mean(matrix);\n    if (typeof (standardDeviations) === 'undefined') standardDeviations = exports.standardDeviation(matrix, true, means);\n    return exports.standardize(exports.center(matrix, means, false), standardDeviations, true);\n};\n\nexports.center = function center(matrix, means, inPlace) {\n    means = means || exports.mean(matrix);\n    var result = matrix,\n        l = matrix.length,\n        i, j, jj;\n\n    if (!inPlace) {\n        result = new Array(l);\n        for (i = 0; i < l; i++) {\n            result[i] = new Array(matrix[i].length);\n        }\n    }\n\n    for (i = 0; i < l; i++) {\n        var row = result[i];\n        for (j = 0, jj = row.length; j < jj; j++) {\n            row[j] = matrix[i][j] - means[j];\n        }\n    }\n    return result;\n};\n\nexports.standardize = function standardize(matrix, standardDeviations, inPlace) {\n    if (typeof (standardDeviations) === 'undefined') standardDeviations = exports.standardDeviation(matrix);\n    var result = matrix,\n        l = matrix.length,\n        i, j, jj;\n\n    if (!inPlace) {\n        result = new Array(l);\n        for (i = 0; i < l; i++) {\n            result[i] = new Array(matrix[i].length);\n        }\n    }\n\n    for (i = 0; i < l; i++) {\n        var resultRow = result[i];\n        var sourceRow = matrix[i];\n        for (j = 0, jj = resultRow.length; j < jj; j++) {\n            if (standardDeviations[j] !== 0 && !isNaN(standardDeviations[j])) {\n                resultRow[j] = sourceRow[j] / standardDeviations[j];\n            }\n        }\n    }\n    return result;\n};\n\nexports.weightedVariance = function weightedVariance(matrix, weights) {\n    var means = exports.mean(matrix);\n    var rows = matrix.length;\n    if (rows === 0) return [];\n    var cols = matrix[0].length;\n    var vari = new Array(cols);\n\n    for (var j = 0; j < cols; j++) {\n        var sum = 0;\n        var a = 0, b = 0;\n\n        for (var i = 0; i < rows; i++) {\n            var z = matrix[i][j] - means[j];\n            var w = weights[i];\n\n            sum += w * (z * z);\n            b += w;\n            a += w * w;\n        }\n\n        vari[j] = sum * (b / (b * b - a));\n    }\n\n    return vari;\n};\n\nexports.weightedMean = function weightedMean(matrix, weights, dimension) {\n    if (typeof (dimension) === 'undefined') {\n        dimension = 0;\n    }\n    var rows = matrix.length;\n    if (rows === 0) return [];\n    var cols = matrix[0].length,\n        means, i, ii, j, w, row;\n\n    if (dimension === 0) {\n        means = new Array(cols);\n        for (i = 0; i < cols; i++) {\n            means[i] = 0;\n        }\n        for (i = 0; i < rows; i++) {\n            row = matrix[i];\n            w = weights[i];\n            for (j = 0; j < cols; j++) {\n                means[j] += row[j] * w;\n            }\n        }\n    } else if (dimension === 1) {\n        means = new Array(rows);\n        for (i = 0; i < rows; i++) {\n            means[i] = 0;\n        }\n        for (j = 0; j < rows; j++) {\n            row = matrix[j];\n            w = weights[j];\n            for (i = 0; i < cols; i++) {\n                means[j] += row[i] * w;\n            }\n        }\n    } else {\n        throw new Error('Invalid dimension');\n    }\n\n    var weightSum = arrayStat.sum(weights);\n    if (weightSum !== 0) {\n        for (i = 0, ii = means.length; i < ii; i++) {\n            means[i] /= weightSum;\n        }\n    }\n    return means;\n};\n\nexports.weightedCovariance = function weightedCovariance(matrix, weights, means, dimension) {\n    dimension = dimension || 0;\n    means = means || exports.weightedMean(matrix, weights, dimension);\n    var s1 = 0, s2 = 0;\n    for (var i = 0, ii = weights.length; i < ii; i++) {\n        s1 += weights[i];\n        s2 += weights[i] * weights[i];\n    }\n    var factor = s1 / (s1 * s1 - s2);\n    return exports.weightedScatter(matrix, weights, means, factor, dimension);\n};\n\nexports.weightedScatter = function weightedScatter(matrix, weights, means, factor, dimension) {\n    dimension = dimension || 0;\n    means = means || exports.weightedMean(matrix, weights, dimension);\n    if (typeof (factor) === 'undefined') {\n        factor = 1;\n    }\n    var rows = matrix.length;\n    if (rows === 0) {\n        return [[]];\n    }\n    var cols = matrix[0].length,\n        cov, i, j, k, s;\n\n    if (dimension === 0) {\n        cov = new Array(cols);\n        for (i = 0; i < cols; i++) {\n            cov[i] = new Array(cols);\n        }\n        for (i = 0; i < cols; i++) {\n            for (j = i; j < cols; j++) {\n                s = 0;\n                for (k = 0; k < rows; k++) {\n                    s += weights[k] * (matrix[k][j] - means[j]) * (matrix[k][i] - means[i]);\n                }\n                cov[i][j] = s * factor;\n                cov[j][i] = s * factor;\n            }\n        }\n    } else if (dimension === 1) {\n        cov = new Array(rows);\n        for (i = 0; i < rows; i++) {\n            cov[i] = new Array(rows);\n        }\n        for (i = 0; i < rows; i++) {\n            for (j = i; j < rows; j++) {\n                s = 0;\n                for (k = 0; k < cols; k++) {\n                    s += weights[k] * (matrix[j][k] - means[j]) * (matrix[i][k] - means[i]);\n                }\n                cov[i][j] = s * factor;\n                cov[j][i] = s * factor;\n            }\n        }\n    } else {\n        throw new Error('Invalid dimension');\n    }\n\n    return cov;\n};\n","'use strict';\n\n/**\n *\n * Function that returns a Number array of equally spaced numberOfPoints\n * containing a representation of intensities of the spectra arguments x\n * and y.\n *\n * The options parameter contains an object in the following form:\n * from: starting point\n * to: last point\n * numberOfPoints: number of points between from and to\n * variant: \"slot\" or \"smooth\" - smooth is the default option\n *\n * The slot variant consist that each point in the new array is calculated\n * averaging the existing points between the slot that belongs to the current\n * value. The smooth variant is the same but takes the integral of the range\n * of the slot and divide by the step size between two points in the new array.\n *\n * @param x - sorted increasing x values\n * @param y\n * @param options\n * @returns {Array} new array with the equally spaced data.\n *\n */\nfunction getEquallySpacedData(x, y, options) {\n    if (x.length>1 && x[0]>x[1]) {\n        x=x.slice().reverse();\n        y=y.slice().reverse();\n    }\n\n    var xLength = x.length;\n    if(xLength !== y.length)\n        throw new RangeError(\"the x and y vector doesn't have the same size.\");\n\n    if (options === undefined) options = {};\n\n    var from = options.from === undefined ? x[0] : options.from\n    if (isNaN(from) || !isFinite(from)) {\n        throw new RangeError(\"'From' value must be a number\");\n    }\n    var to = options.to === undefined ? x[x.length - 1] : options.to;\n    if (isNaN(to) || !isFinite(to)) {\n        throw new RangeError(\"'To' value must be a number\");\n    }\n\n    var reverse = from > to;\n    if(reverse) {\n        var temp = from;\n        from = to;\n        to = temp;\n    }\n\n    var numberOfPoints = options.numberOfPoints === undefined ? 100 : options.numberOfPoints;\n    if (isNaN(numberOfPoints) || !isFinite(numberOfPoints)) {\n        throw new RangeError(\"'Number of points' value must be a number\");\n    }\n    if(numberOfPoints < 1)\n        throw new RangeError(\"the number of point must be higher than 1\");\n\n    var algorithm = options.variant === \"slot\" ? \"slot\" : \"smooth\"; // default value: smooth\n\n    var output = algorithm === \"slot\" ? getEquallySpacedSlot(x, y, from, to, numberOfPoints) : getEquallySpacedSmooth(x, y, from, to, numberOfPoints);\n\n    return reverse ? output.reverse() : output;\n}\n\n/**\n * function that retrieves the getEquallySpacedData with the variant \"smooth\"\n *\n * @param x\n * @param y\n * @param from - Initial point\n * @param to - Final point\n * @param numberOfPoints\n * @returns {Array} - Array of y's equally spaced with the variant \"smooth\"\n */\nfunction getEquallySpacedSmooth(x, y, from, to, numberOfPoints) {\n    var xLength = x.length;\n\n    var step = (to - from) / (numberOfPoints - 1);\n    var halfStep = step / 2;\n\n    var start = from - halfStep;\n    var output = new Array(numberOfPoints);\n\n    var initialOriginalStep = x[1] - x[0];\n    var lastOriginalStep = x[x.length - 1] - x[x.length - 2];\n\n    // Init main variables\n    var min = start;\n    var max = start + step;\n\n    var previousX = Number.MIN_VALUE;\n    var previousY = 0;\n    var nextX = x[0] - initialOriginalStep;\n    var nextY = 0;\n\n    var currentValue = 0;\n    var slope = 0;\n    var intercept = 0;\n    var sumAtMin = 0;\n    var sumAtMax = 0;\n\n    var i = 0; // index of input\n    var j = 0; // index of output\n\n    function getSlope(x0, y0, x1, y1) {\n        return (y1 - y0) / (x1 - x0);\n    }\n\n    main: while(true) {\n        while (nextX - max >= 0) {\n            // no overlap with original point, just consume current value\n            var add = integral(0, max - previousX, slope, previousY);\n            sumAtMax = currentValue + add;\n\n            output[j] = (sumAtMax - sumAtMin) / step;\n            j++;\n\n            if (j === numberOfPoints)\n                break main;\n\n            min = max;\n            max += step;\n            sumAtMin = sumAtMax;\n        }\n\n        if(previousX <= min && min <= nextX) {\n            add = integral(0, min - previousX, slope, previousY);\n            sumAtMin = currentValue + add;\n        }\n\n        currentValue += integral(previousX, nextX, slope, intercept);\n\n        previousX = nextX;\n        previousY = nextY;\n\n        if (i < xLength) {\n            nextX = x[i];\n            nextY = y[i];\n            i++;\n        } else if (i === xLength) {\n            nextX += lastOriginalStep;\n            nextY = 0;\n        }\n        // updating parameters\n        slope = getSlope(previousX, previousY, nextX, nextY);\n        intercept = -slope*previousX + previousY;\n    }\n\n    return output;\n}\n\n/**\n * function that retrieves the getEquallySpacedData with the variant \"slot\"\n *\n * @param x\n * @param y\n * @param from - Initial point\n * @param to - Final point\n * @param numberOfPoints\n * @returns {Array} - Array of y's equally spaced with the variant \"slot\"\n */\nfunction getEquallySpacedSlot(x, y, from, to, numberOfPoints) {\n    var xLength = x.length;\n\n    var step = (to - from) / (numberOfPoints - 1);\n    var halfStep = step / 2;\n    var lastStep = x[x.length - 1] - x[x.length - 2];\n\n    var start = from - halfStep;\n    var output = new Array(numberOfPoints);\n\n    // Init main variables\n    var min = start;\n    var max = start + step;\n\n    var previousX = -Number.MAX_VALUE;\n    var previousY = 0;\n    var nextX = x[0];\n    var nextY = y[0];\n    var frontOutsideSpectra = 0;\n    var backOutsideSpectra = true;\n\n    var currentValue = 0;\n\n    // for slot algorithm\n    var currentPoints = 0;\n\n    var i = 1; // index of input\n    var j = 0; // index of output\n\n    main: while(true) {\n        if (previousX>=nextX) throw (new Error('x must be an increasing serie'));\n        while (previousX - max > 0) {\n            // no overlap with original point, just consume current value\n            if(backOutsideSpectra) {\n                currentPoints++;\n                backOutsideSpectra = false;\n            }\n\n            output[j] = currentPoints <= 0 ? 0 : currentValue / currentPoints;\n            j++;\n\n            if (j === numberOfPoints)\n                break main;\n\n            min = max;\n            max += step;\n            currentValue = 0;\n            currentPoints = 0;\n        }\n\n        if(previousX > min) {\n            currentValue += previousY;\n            currentPoints++;\n        }\n\n        if(previousX === -Number.MAX_VALUE || frontOutsideSpectra > 1)\n            currentPoints--;\n\n        previousX = nextX;\n        previousY = nextY;\n\n        if (i < xLength) {\n            nextX = x[i];\n            nextY = y[i];\n            i++;\n        } else {\n            nextX += lastStep;\n            nextY = 0;\n            frontOutsideSpectra++;\n        }\n    }\n\n    return output;\n}\n/**\n * Function that calculates the integral of the line between two\n * x-coordinates, given the slope and intercept of the line.\n *\n * @param x0\n * @param x1\n * @param slope\n * @param intercept\n * @returns {number} integral value.\n */\nfunction integral(x0, x1, slope, intercept) {\n    return (0.5 * slope * x1 * x1 + intercept * x1) - (0.5 * slope * x0 * x0 + intercept * x0);\n}\n\nexports.getEquallySpacedData = getEquallySpacedData;\nexports.integral = integral;","'use strict';\n\nexports.SNV = SNV;\nvar Stat = require('ml-stat').array;\n\n/**\n * Function that applies the standard normal variate (SNV) to an array of values.\n *\n * @param data - Array of values.\n * @returns {Array} - applied the SNV.\n */\nfunction SNV(data) {\n    var mean = Stat.mean(data);\n    var std = Stat.standardDeviation(data);\n    var result = data.slice();\n    for (var i = 0; i < data.length; i++) {\n        result[i] = (result[i] - mean) / std;\n    }\n    return result;\n}\n","'use strict';\n\nvar BaseView = require('./base');\n\nclass MatrixTransposeView extends BaseView {\n    constructor(matrix) {\n        super(matrix, matrix.columns, matrix.rows);\n    }\n\n    set(rowIndex, columnIndex, value) {\n        this.matrix.set(columnIndex, rowIndex, value);\n        return this;\n    }\n\n    get(rowIndex, columnIndex) {\n        return this.matrix.get(columnIndex, rowIndex);\n    }\n}\n\nmodule.exports = MatrixTransposeView;\n","'use strict';\n\nvar BaseView = require('./base');\n\nclass MatrixRowView extends BaseView {\n    constructor(matrix, row) {\n        super(matrix, 1, matrix.columns);\n        this.row = row;\n    }\n\n    set(rowIndex, columnIndex, value) {\n        this.matrix.set(this.row, columnIndex, value);\n        return this;\n    }\n\n    get(rowIndex, columnIndex) {\n        return this.matrix.get(this.row, columnIndex);\n    }\n}\n\nmodule.exports = MatrixRowView;\n","'use strict';\n\nvar BaseView = require('./base');\nvar util = require('../util');\n\nclass MatrixSubView extends BaseView {\n    constructor(matrix, startRow, endRow, startColumn, endColumn) {\n        util.checkRange(matrix, startRow, endRow, startColumn, endColumn);\n        super(matrix, endRow - startRow + 1, endColumn - startColumn + 1);\n        this.startRow = startRow;\n        this.startColumn = startColumn;\n    }\n\n    set(rowIndex, columnIndex, value) {\n        this.matrix.set(this.startRow + rowIndex, this.startColumn + columnIndex, value);\n        return this;\n    }\n\n    get(rowIndex, columnIndex) {\n        return this.matrix.get(this.startRow + rowIndex, this.startColumn + columnIndex);\n    }\n}\n\nmodule.exports = MatrixSubView;\n","'use strict';\n\nvar BaseView = require('./base');\nvar util = require('../util');\n\nclass MatrixSelectionView extends BaseView {\n    constructor(matrix, rowIndices, columnIndices) {\n        var indices = util.checkIndices(matrix, rowIndices, columnIndices);\n        super(matrix, indices.row.length, indices.column.length);\n        this.rowIndices = indices.row;\n        this.columnIndices = indices.column;\n    }\n\n    set(rowIndex, columnIndex, value) {\n        this.matrix.set(this.rowIndices[rowIndex], this.columnIndices[columnIndex], value);\n        return this;\n    }\n\n    get(rowIndex, columnIndex) {\n        return this.matrix.get(this.rowIndices[rowIndex], this.columnIndices[columnIndex]);\n    }\n}\n\nmodule.exports = MatrixSelectionView;\n","'use strict';\n\nvar BaseView = require('./base');\n\nclass MatrixColumnView extends BaseView {\n    constructor(matrix, column) {\n        super(matrix, matrix.rows, 1);\n        this.column = column;\n    }\n\n    set(rowIndex, columnIndex, value) {\n        this.matrix.set(rowIndex, this.column, value);\n        return this;\n    }\n\n    get(rowIndex) {\n        return this.matrix.get(rowIndex, this.column);\n    }\n}\n\nmodule.exports = MatrixColumnView;\n","'use strict';\n\nvar BaseView = require('./base');\n\nclass MatrixFlipRowView extends BaseView {\n    constructor(matrix) {\n        super(matrix, matrix.rows, matrix.columns);\n    }\n\n    set(rowIndex, columnIndex, value) {\n        this.matrix.set(this.rows - rowIndex - 1, columnIndex, value);\n        return this;\n    }\n\n    get(rowIndex, columnIndex) {\n        return this.matrix.get(this.rows - rowIndex - 1, columnIndex);\n    }\n}\n\nmodule.exports = MatrixFlipRowView;\n","'use strict';\n\nvar BaseView = require('./base');\n\nclass MatrixFlipColumnView extends BaseView {\n    constructor(matrix) {\n        super(matrix, matrix.rows, matrix.columns);\n    }\n\n    set(rowIndex, columnIndex, value) {\n        this.matrix.set(rowIndex, this.columns - columnIndex - 1, value);\n        return this;\n    }\n\n    get(rowIndex, columnIndex) {\n        return this.matrix.get(rowIndex, this.columns - columnIndex - 1);\n    }\n}\n\nmodule.exports = MatrixFlipColumnView;\n","'use strict';\n\nvar Matrix = require('./matrix').Matrix;\n\nvar SingularValueDecomposition = require('./dc/svd');\nvar EigenvalueDecomposition = require('./dc/evd');\nvar LuDecomposition = require('./dc/lu');\nvar QrDecomposition = require('./dc/qr');\nvar CholeskyDecomposition = require('./dc/cholesky');\n\nfunction inverse(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    return solve(matrix, Matrix.eye(matrix.rows));\n}\n\n/**\n * Returns the inverse\n * @memberOf Matrix\n * @static\n * @param {Matrix} matrix\n * @return {Matrix} matrix\n * @alias inv\n */\nMatrix.inverse = Matrix.inv = inverse;\n\n/**\n * Returns the inverse\n * @memberOf Matrix\n * @static\n * @param {Matrix} matrix\n * @return {Matrix} matrix\n * @alias inv\n */\nMatrix.prototype.inverse = Matrix.prototype.inv = function () {\n    return inverse(this);\n};\n\nfunction solve(leftHandSide, rightHandSide) {\n    leftHandSide = Matrix.checkMatrix(leftHandSide);\n    rightHandSide = Matrix.checkMatrix(rightHandSide);\n    return leftHandSide.isSquare() ? new LuDecomposition(leftHandSide).solve(rightHandSide) : new QrDecomposition(leftHandSide).solve(rightHandSide);\n}\n\nMatrix.solve = solve;\nMatrix.prototype.solve = function (other) {\n    return solve(this, other);\n};\n\nmodule.exports = {\n    SingularValueDecomposition: SingularValueDecomposition,\n    SVD: SingularValueDecomposition,\n    EigenvalueDecomposition: EigenvalueDecomposition,\n    EVD: EigenvalueDecomposition,\n    LuDecomposition: LuDecomposition,\n    LU: LuDecomposition,\n    QrDecomposition: QrDecomposition,\n    QR: QrDecomposition,\n    CholeskyDecomposition: CholeskyDecomposition,\n    CHO: CholeskyDecomposition,\n    inverse: inverse,\n    solve: solve\n};\n","'use strict';\n\nconst Matrix = require('../matrix').Matrix;\nconst util = require('./util');\nconst hypotenuse = util.hypotenuse;\nconst getFilled2DArray = util.getFilled2DArray;\n\nconst defaultOptions = {\n    assumeSymmetric: false\n};\n\n// https://github.com/lutzroeder/Mapack/blob/master/Source/EigenvalueDecomposition.cs\nfunction EigenvalueDecomposition(matrix, options) {\n    options = Object.assign({}, defaultOptions, options);\n    if (!(this instanceof EigenvalueDecomposition)) {\n        return new EigenvalueDecomposition(matrix, options);\n    }\n    matrix = Matrix.checkMatrix(matrix);\n    if (!matrix.isSquare()) {\n        throw new Error('Matrix is not a square matrix');\n    }\n\n    var n = matrix.columns,\n        V = getFilled2DArray(n, n, 0),\n        d = new Array(n),\n        e = new Array(n),\n        value = matrix,\n        i, j;\n\n    var isSymmetric = false;\n    if (options.assumeSymmetric) {\n        isSymmetric = true;\n    } else {\n        isSymmetric = matrix.isSymmetric();\n    }\n\n    if (isSymmetric) {\n        for (i = 0; i < n; i++) {\n            for (j = 0; j < n; j++) {\n                V[i][j] = value.get(i, j);\n            }\n        }\n        tred2(n, e, d, V);\n        tql2(n, e, d, V);\n    } else {\n        var H = getFilled2DArray(n, n, 0),\n            ort = new Array(n);\n        for (j = 0; j < n; j++) {\n            for (i = 0; i < n; i++) {\n                H[i][j] = value.get(i, j);\n            }\n        }\n        orthes(n, H, ort, V);\n        hqr2(n, e, d, V, H);\n    }\n\n    this.n = n;\n    this.e = e;\n    this.d = d;\n    this.V = V;\n}\n\nEigenvalueDecomposition.prototype = {\n    get realEigenvalues() {\n        return this.d;\n    },\n    get imaginaryEigenvalues() {\n        return this.e;\n    },\n    get eigenvectorMatrix() {\n        if (!Matrix.isMatrix(this.V)) {\n            this.V = new Matrix(this.V);\n        }\n        return this.V;\n    },\n    get diagonalMatrix() {\n        var n = this.n,\n            e = this.e,\n            d = this.d,\n            X = new Matrix(n, n),\n            i, j;\n        for (i = 0; i < n; i++) {\n            for (j = 0; j < n; j++) {\n                X[i][j] = 0;\n            }\n            X[i][i] = d[i];\n            if (e[i] > 0) {\n                X[i][i + 1] = e[i];\n            } else if (e[i] < 0) {\n                X[i][i - 1] = e[i];\n            }\n        }\n        return X;\n    }\n};\n\nfunction tred2(n, e, d, V) {\n\n    var f, g, h, i, j, k,\n        hh, scale;\n\n    for (j = 0; j < n; j++) {\n        d[j] = V[n - 1][j];\n    }\n\n    for (i = n - 1; i > 0; i--) {\n        scale = 0;\n        h = 0;\n        for (k = 0; k < i; k++) {\n            scale = scale + Math.abs(d[k]);\n        }\n\n        if (scale === 0) {\n            e[i] = d[i - 1];\n            for (j = 0; j < i; j++) {\n                d[j] = V[i - 1][j];\n                V[i][j] = 0;\n                V[j][i] = 0;\n            }\n        } else {\n            for (k = 0; k < i; k++) {\n                d[k] /= scale;\n                h += d[k] * d[k];\n            }\n\n            f = d[i - 1];\n            g = Math.sqrt(h);\n            if (f > 0) {\n                g = -g;\n            }\n\n            e[i] = scale * g;\n            h = h - f * g;\n            d[i - 1] = f - g;\n            for (j = 0; j < i; j++) {\n                e[j] = 0;\n            }\n\n            for (j = 0; j < i; j++) {\n                f = d[j];\n                V[j][i] = f;\n                g = e[j] + V[j][j] * f;\n                for (k = j + 1; k <= i - 1; k++) {\n                    g += V[k][j] * d[k];\n                    e[k] += V[k][j] * f;\n                }\n                e[j] = g;\n            }\n\n            f = 0;\n            for (j = 0; j < i; j++) {\n                e[j] /= h;\n                f += e[j] * d[j];\n            }\n\n            hh = f / (h + h);\n            for (j = 0; j < i; j++) {\n                e[j] -= hh * d[j];\n            }\n\n            for (j = 0; j < i; j++) {\n                f = d[j];\n                g = e[j];\n                for (k = j; k <= i - 1; k++) {\n                    V[k][j] -= (f * e[k] + g * d[k]);\n                }\n                d[j] = V[i - 1][j];\n                V[i][j] = 0;\n            }\n        }\n        d[i] = h;\n    }\n\n    for (i = 0; i < n - 1; i++) {\n        V[n - 1][i] = V[i][i];\n        V[i][i] = 1;\n        h = d[i + 1];\n        if (h !== 0) {\n            for (k = 0; k <= i; k++) {\n                d[k] = V[k][i + 1] / h;\n            }\n\n            for (j = 0; j <= i; j++) {\n                g = 0;\n                for (k = 0; k <= i; k++) {\n                    g += V[k][i + 1] * V[k][j];\n                }\n                for (k = 0; k <= i; k++) {\n                    V[k][j] -= g * d[k];\n                }\n            }\n        }\n\n        for (k = 0; k <= i; k++) {\n            V[k][i + 1] = 0;\n        }\n    }\n\n    for (j = 0; j < n; j++) {\n        d[j] = V[n - 1][j];\n        V[n - 1][j] = 0;\n    }\n\n    V[n - 1][n - 1] = 1;\n    e[0] = 0;\n}\n\nfunction tql2(n, e, d, V) {\n\n    var g, h, i, j, k, l, m, p, r,\n        dl1, c, c2, c3, el1, s, s2,\n        iter;\n\n    for (i = 1; i < n; i++) {\n        e[i - 1] = e[i];\n    }\n\n    e[n - 1] = 0;\n\n    var f = 0,\n        tst1 = 0,\n        eps = Math.pow(2, -52);\n\n    for (l = 0; l < n; l++) {\n        tst1 = Math.max(tst1, Math.abs(d[l]) + Math.abs(e[l]));\n        m = l;\n        while (m < n) {\n            if (Math.abs(e[m]) <= eps * tst1) {\n                break;\n            }\n            m++;\n        }\n\n        if (m > l) {\n            iter = 0;\n            do {\n                iter = iter + 1;\n\n                g = d[l];\n                p = (d[l + 1] - g) / (2 * e[l]);\n                r = hypotenuse(p, 1);\n                if (p < 0) {\n                    r = -r;\n                }\n\n                d[l] = e[l] / (p + r);\n                d[l + 1] = e[l] * (p + r);\n                dl1 = d[l + 1];\n                h = g - d[l];\n                for (i = l + 2; i < n; i++) {\n                    d[i] -= h;\n                }\n\n                f = f + h;\n\n                p = d[m];\n                c = 1;\n                c2 = c;\n                c3 = c;\n                el1 = e[l + 1];\n                s = 0;\n                s2 = 0;\n                for (i = m - 1; i >= l; i--) {\n                    c3 = c2;\n                    c2 = c;\n                    s2 = s;\n                    g = c * e[i];\n                    h = c * p;\n                    r = hypotenuse(p, e[i]);\n                    e[i + 1] = s * r;\n                    s = e[i] / r;\n                    c = p / r;\n                    p = c * d[i] - s * g;\n                    d[i + 1] = h + s * (c * g + s * d[i]);\n\n                    for (k = 0; k < n; k++) {\n                        h = V[k][i + 1];\n                        V[k][i + 1] = s * V[k][i] + c * h;\n                        V[k][i] = c * V[k][i] - s * h;\n                    }\n                }\n\n                p = -s * s2 * c3 * el1 * e[l] / dl1;\n                e[l] = s * p;\n                d[l] = c * p;\n\n            }\n            while (Math.abs(e[l]) > eps * tst1);\n        }\n        d[l] = d[l] + f;\n        e[l] = 0;\n    }\n\n    for (i = 0; i < n - 1; i++) {\n        k = i;\n        p = d[i];\n        for (j = i + 1; j < n; j++) {\n            if (d[j] < p) {\n                k = j;\n                p = d[j];\n            }\n        }\n\n        if (k !== i) {\n            d[k] = d[i];\n            d[i] = p;\n            for (j = 0; j < n; j++) {\n                p = V[j][i];\n                V[j][i] = V[j][k];\n                V[j][k] = p;\n            }\n        }\n    }\n}\n\nfunction orthes(n, H, ort, V) {\n\n    var low = 0,\n        high = n - 1,\n        f, g, h, i, j, m,\n        scale;\n\n    for (m = low + 1; m <= high - 1; m++) {\n        scale = 0;\n        for (i = m; i <= high; i++) {\n            scale = scale + Math.abs(H[i][m - 1]);\n        }\n\n        if (scale !== 0) {\n            h = 0;\n            for (i = high; i >= m; i--) {\n                ort[i] = H[i][m - 1] / scale;\n                h += ort[i] * ort[i];\n            }\n\n            g = Math.sqrt(h);\n            if (ort[m] > 0) {\n                g = -g;\n            }\n\n            h = h - ort[m] * g;\n            ort[m] = ort[m] - g;\n\n            for (j = m; j < n; j++) {\n                f = 0;\n                for (i = high; i >= m; i--) {\n                    f += ort[i] * H[i][j];\n                }\n\n                f = f / h;\n                for (i = m; i <= high; i++) {\n                    H[i][j] -= f * ort[i];\n                }\n            }\n\n            for (i = 0; i <= high; i++) {\n                f = 0;\n                for (j = high; j >= m; j--) {\n                    f += ort[j] * H[i][j];\n                }\n\n                f = f / h;\n                for (j = m; j <= high; j++) {\n                    H[i][j] -= f * ort[j];\n                }\n            }\n\n            ort[m] = scale * ort[m];\n            H[m][m - 1] = scale * g;\n        }\n    }\n\n    for (i = 0; i < n; i++) {\n        for (j = 0; j < n; j++) {\n            V[i][j] = (i === j ? 1 : 0);\n        }\n    }\n\n    for (m = high - 1; m >= low + 1; m--) {\n        if (H[m][m - 1] !== 0) {\n            for (i = m + 1; i <= high; i++) {\n                ort[i] = H[i][m - 1];\n            }\n\n            for (j = m; j <= high; j++) {\n                g = 0;\n                for (i = m; i <= high; i++) {\n                    g += ort[i] * V[i][j];\n                }\n\n                g = (g / ort[m]) / H[m][m - 1];\n                for (i = m; i <= high; i++) {\n                    V[i][j] += g * ort[i];\n                }\n            }\n        }\n    }\n}\n\nfunction hqr2(nn, e, d, V, H) {\n    var n = nn - 1,\n        low = 0,\n        high = nn - 1,\n        eps = Math.pow(2, -52),\n        exshift = 0,\n        norm = 0,\n        p = 0,\n        q = 0,\n        r = 0,\n        s = 0,\n        z = 0,\n        iter = 0,\n        i, j, k, l, m, t, w, x, y,\n        ra, sa, vr, vi,\n        notlast, cdivres;\n\n    for (i = 0; i < nn; i++) {\n        if (i < low || i > high) {\n            d[i] = H[i][i];\n            e[i] = 0;\n        }\n\n        for (j = Math.max(i - 1, 0); j < nn; j++) {\n            norm = norm + Math.abs(H[i][j]);\n        }\n    }\n\n    while (n >= low) {\n        l = n;\n        while (l > low) {\n            s = Math.abs(H[l - 1][l - 1]) + Math.abs(H[l][l]);\n            if (s === 0) {\n                s = norm;\n            }\n            if (Math.abs(H[l][l - 1]) < eps * s) {\n                break;\n            }\n            l--;\n        }\n\n        if (l === n) {\n            H[n][n] = H[n][n] + exshift;\n            d[n] = H[n][n];\n            e[n] = 0;\n            n--;\n            iter = 0;\n        } else if (l === n - 1) {\n            w = H[n][n - 1] * H[n - 1][n];\n            p = (H[n - 1][n - 1] - H[n][n]) / 2;\n            q = p * p + w;\n            z = Math.sqrt(Math.abs(q));\n            H[n][n] = H[n][n] + exshift;\n            H[n - 1][n - 1] = H[n - 1][n - 1] + exshift;\n            x = H[n][n];\n\n            if (q >= 0) {\n                z = (p >= 0) ? (p + z) : (p - z);\n                d[n - 1] = x + z;\n                d[n] = d[n - 1];\n                if (z !== 0) {\n                    d[n] = x - w / z;\n                }\n                e[n - 1] = 0;\n                e[n] = 0;\n                x = H[n][n - 1];\n                s = Math.abs(x) + Math.abs(z);\n                p = x / s;\n                q = z / s;\n                r = Math.sqrt(p * p + q * q);\n                p = p / r;\n                q = q / r;\n\n                for (j = n - 1; j < nn; j++) {\n                    z = H[n - 1][j];\n                    H[n - 1][j] = q * z + p * H[n][j];\n                    H[n][j] = q * H[n][j] - p * z;\n                }\n\n                for (i = 0; i <= n; i++) {\n                    z = H[i][n - 1];\n                    H[i][n - 1] = q * z + p * H[i][n];\n                    H[i][n] = q * H[i][n] - p * z;\n                }\n\n                for (i = low; i <= high; i++) {\n                    z = V[i][n - 1];\n                    V[i][n - 1] = q * z + p * V[i][n];\n                    V[i][n] = q * V[i][n] - p * z;\n                }\n            } else {\n                d[n - 1] = x + p;\n                d[n] = x + p;\n                e[n - 1] = z;\n                e[n] = -z;\n            }\n\n            n = n - 2;\n            iter = 0;\n        } else {\n            x = H[n][n];\n            y = 0;\n            w = 0;\n            if (l < n) {\n                y = H[n - 1][n - 1];\n                w = H[n][n - 1] * H[n - 1][n];\n            }\n\n            if (iter === 10) {\n                exshift += x;\n                for (i = low; i <= n; i++) {\n                    H[i][i] -= x;\n                }\n                s = Math.abs(H[n][n - 1]) + Math.abs(H[n - 1][n - 2]);\n                x = y = 0.75 * s;\n                w = -0.4375 * s * s;\n            }\n\n            if (iter === 30) {\n                s = (y - x) / 2;\n                s = s * s + w;\n                if (s > 0) {\n                    s = Math.sqrt(s);\n                    if (y < x) {\n                        s = -s;\n                    }\n                    s = x - w / ((y - x) / 2 + s);\n                    for (i = low; i <= n; i++) {\n                        H[i][i] -= s;\n                    }\n                    exshift += s;\n                    x = y = w = 0.964;\n                }\n            }\n\n            iter = iter + 1;\n\n            m = n - 2;\n            while (m >= l) {\n                z = H[m][m];\n                r = x - z;\n                s = y - z;\n                p = (r * s - w) / H[m + 1][m] + H[m][m + 1];\n                q = H[m + 1][m + 1] - z - r - s;\n                r = H[m + 2][m + 1];\n                s = Math.abs(p) + Math.abs(q) + Math.abs(r);\n                p = p / s;\n                q = q / s;\n                r = r / s;\n                if (m === l) {\n                    break;\n                }\n                if (Math.abs(H[m][m - 1]) * (Math.abs(q) + Math.abs(r)) < eps * (Math.abs(p) * (Math.abs(H[m - 1][m - 1]) + Math.abs(z) + Math.abs(H[m + 1][m + 1])))) {\n                    break;\n                }\n                m--;\n            }\n\n            for (i = m + 2; i <= n; i++) {\n                H[i][i - 2] = 0;\n                if (i > m + 2) {\n                    H[i][i - 3] = 0;\n                }\n            }\n\n            for (k = m; k <= n - 1; k++) {\n                notlast = (k !== n - 1);\n                if (k !== m) {\n                    p = H[k][k - 1];\n                    q = H[k + 1][k - 1];\n                    r = (notlast ? H[k + 2][k - 1] : 0);\n                    x = Math.abs(p) + Math.abs(q) + Math.abs(r);\n                    if (x !== 0) {\n                        p = p / x;\n                        q = q / x;\n                        r = r / x;\n                    }\n                }\n\n                if (x === 0) {\n                    break;\n                }\n\n                s = Math.sqrt(p * p + q * q + r * r);\n                if (p < 0) {\n                    s = -s;\n                }\n\n                if (s !== 0) {\n                    if (k !== m) {\n                        H[k][k - 1] = -s * x;\n                    } else if (l !== m) {\n                        H[k][k - 1] = -H[k][k - 1];\n                    }\n\n                    p = p + s;\n                    x = p / s;\n                    y = q / s;\n                    z = r / s;\n                    q = q / p;\n                    r = r / p;\n\n                    for (j = k; j < nn; j++) {\n                        p = H[k][j] + q * H[k + 1][j];\n                        if (notlast) {\n                            p = p + r * H[k + 2][j];\n                            H[k + 2][j] = H[k + 2][j] - p * z;\n                        }\n\n                        H[k][j] = H[k][j] - p * x;\n                        H[k + 1][j] = H[k + 1][j] - p * y;\n                    }\n\n                    for (i = 0; i <= Math.min(n, k + 3); i++) {\n                        p = x * H[i][k] + y * H[i][k + 1];\n                        if (notlast) {\n                            p = p + z * H[i][k + 2];\n                            H[i][k + 2] = H[i][k + 2] - p * r;\n                        }\n\n                        H[i][k] = H[i][k] - p;\n                        H[i][k + 1] = H[i][k + 1] - p * q;\n                    }\n\n                    for (i = low; i <= high; i++) {\n                        p = x * V[i][k] + y * V[i][k + 1];\n                        if (notlast) {\n                            p = p + z * V[i][k + 2];\n                            V[i][k + 2] = V[i][k + 2] - p * r;\n                        }\n\n                        V[i][k] = V[i][k] - p;\n                        V[i][k + 1] = V[i][k + 1] - p * q;\n                    }\n                }\n            }\n        }\n    }\n\n    if (norm === 0) {\n        return;\n    }\n\n    for (n = nn - 1; n >= 0; n--) {\n        p = d[n];\n        q = e[n];\n\n        if (q === 0) {\n            l = n;\n            H[n][n] = 1;\n            for (i = n - 1; i >= 0; i--) {\n                w = H[i][i] - p;\n                r = 0;\n                for (j = l; j <= n; j++) {\n                    r = r + H[i][j] * H[j][n];\n                }\n\n                if (e[i] < 0) {\n                    z = w;\n                    s = r;\n                } else {\n                    l = i;\n                    if (e[i] === 0) {\n                        H[i][n] = (w !== 0) ? (-r / w) : (-r / (eps * norm));\n                    } else {\n                        x = H[i][i + 1];\n                        y = H[i + 1][i];\n                        q = (d[i] - p) * (d[i] - p) + e[i] * e[i];\n                        t = (x * s - z * r) / q;\n                        H[i][n] = t;\n                        H[i + 1][n] = (Math.abs(x) > Math.abs(z)) ? ((-r - w * t) / x) : ((-s - y * t) / z);\n                    }\n\n                    t = Math.abs(H[i][n]);\n                    if ((eps * t) * t > 1) {\n                        for (j = i; j <= n; j++) {\n                            H[j][n] = H[j][n] / t;\n                        }\n                    }\n                }\n            }\n        } else if (q < 0) {\n            l = n - 1;\n\n            if (Math.abs(H[n][n - 1]) > Math.abs(H[n - 1][n])) {\n                H[n - 1][n - 1] = q / H[n][n - 1];\n                H[n - 1][n] = -(H[n][n] - p) / H[n][n - 1];\n            } else {\n                cdivres = cdiv(0, -H[n - 1][n], H[n - 1][n - 1] - p, q);\n                H[n - 1][n - 1] = cdivres[0];\n                H[n - 1][n] = cdivres[1];\n            }\n\n            H[n][n - 1] = 0;\n            H[n][n] = 1;\n            for (i = n - 2; i >= 0; i--) {\n                ra = 0;\n                sa = 0;\n                for (j = l; j <= n; j++) {\n                    ra = ra + H[i][j] * H[j][n - 1];\n                    sa = sa + H[i][j] * H[j][n];\n                }\n\n                w = H[i][i] - p;\n\n                if (e[i] < 0) {\n                    z = w;\n                    r = ra;\n                    s = sa;\n                } else {\n                    l = i;\n                    if (e[i] === 0) {\n                        cdivres = cdiv(-ra, -sa, w, q);\n                        H[i][n - 1] = cdivres[0];\n                        H[i][n] = cdivres[1];\n                    } else {\n                        x = H[i][i + 1];\n                        y = H[i + 1][i];\n                        vr = (d[i] - p) * (d[i] - p) + e[i] * e[i] - q * q;\n                        vi = (d[i] - p) * 2 * q;\n                        if (vr === 0 && vi === 0) {\n                            vr = eps * norm * (Math.abs(w) + Math.abs(q) + Math.abs(x) + Math.abs(y) + Math.abs(z));\n                        }\n                        cdivres = cdiv(x * r - z * ra + q * sa, x * s - z * sa - q * ra, vr, vi);\n                        H[i][n - 1] = cdivres[0];\n                        H[i][n] = cdivres[1];\n                        if (Math.abs(x) > (Math.abs(z) + Math.abs(q))) {\n                            H[i + 1][n - 1] = (-ra - w * H[i][n - 1] + q * H[i][n]) / x;\n                            H[i + 1][n] = (-sa - w * H[i][n] - q * H[i][n - 1]) / x;\n                        } else {\n                            cdivres = cdiv(-r - y * H[i][n - 1], -s - y * H[i][n], z, q);\n                            H[i + 1][n - 1] = cdivres[0];\n                            H[i + 1][n] = cdivres[1];\n                        }\n                    }\n\n                    t = Math.max(Math.abs(H[i][n - 1]), Math.abs(H[i][n]));\n                    if ((eps * t) * t > 1) {\n                        for (j = i; j <= n; j++) {\n                            H[j][n - 1] = H[j][n - 1] / t;\n                            H[j][n] = H[j][n] / t;\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    for (i = 0; i < nn; i++) {\n        if (i < low || i > high) {\n            for (j = i; j < nn; j++) {\n                V[i][j] = H[i][j];\n            }\n        }\n    }\n\n    for (j = nn - 1; j >= low; j--) {\n        for (i = low; i <= high; i++) {\n            z = 0;\n            for (k = low; k <= Math.min(j, high); k++) {\n                z = z + V[i][k] * H[k][j];\n            }\n            V[i][j] = z;\n        }\n    }\n}\n\nfunction cdiv(xr, xi, yr, yi) {\n    var r, d;\n    if (Math.abs(yr) > Math.abs(yi)) {\n        r = yi / yr;\n        d = yr + r * yi;\n        return [(xr + r * xi) / d, (xi - r * xr) / d];\n    } else {\n        r = yr / yi;\n        d = yi + r * yr;\n        return [(r * xr + xi) / d, (r * xi - xr) / d];\n    }\n}\n\nmodule.exports = EigenvalueDecomposition;\n","'use strict';\n\nvar Matrix = require('../matrix').Matrix;\nvar hypotenuse = require('./util').hypotenuse;\n\n//https://github.com/lutzroeder/Mapack/blob/master/Source/QrDecomposition.cs\nfunction QrDecomposition(value) {\n    if (!(this instanceof QrDecomposition)) {\n        return new QrDecomposition(value);\n    }\n    value = Matrix.checkMatrix(value);\n\n    var qr = value.clone(),\n        m = value.rows,\n        n = value.columns,\n        rdiag = new Array(n),\n        i, j, k, s;\n\n    for (k = 0; k < n; k++) {\n        var nrm = 0;\n        for (i = k; i < m; i++) {\n            nrm = hypotenuse(nrm, qr[i][k]);\n        }\n        if (nrm !== 0) {\n            if (qr[k][k] < 0) {\n                nrm = -nrm;\n            }\n            for (i = k; i < m; i++) {\n                qr[i][k] /= nrm;\n            }\n            qr[k][k] += 1;\n            for (j = k + 1; j < n; j++) {\n                s = 0;\n                for (i = k; i < m; i++) {\n                    s += qr[i][k] * qr[i][j];\n                }\n                s = -s / qr[k][k];\n                for (i = k; i < m; i++) {\n                    qr[i][j] += s * qr[i][k];\n                }\n            }\n        }\n        rdiag[k] = -nrm;\n    }\n\n    this.QR = qr;\n    this.Rdiag = rdiag;\n}\n\nQrDecomposition.prototype = {\n    solve: function (value) {\n        value = Matrix.checkMatrix(value);\n\n        var qr = this.QR,\n            m = qr.rows;\n\n        if (value.rows !== m) {\n            throw new Error('Matrix row dimensions must agree');\n        }\n        if (!this.isFullRank()) {\n            throw new Error('Matrix is rank deficient');\n        }\n\n        var count = value.columns;\n        var X = value.clone();\n        var n = qr.columns;\n        var i, j, k, s;\n\n        for (k = 0; k < n; k++) {\n            for (j = 0; j < count; j++) {\n                s = 0;\n                for (i = k; i < m; i++) {\n                    s += qr[i][k] * X[i][j];\n                }\n                s = -s / qr[k][k];\n                for (i = k; i < m; i++) {\n                    X[i][j] += s * qr[i][k];\n                }\n            }\n        }\n        for (k = n - 1; k >= 0; k--) {\n            for (j = 0; j < count; j++) {\n                X[k][j] /= this.Rdiag[k];\n            }\n            for (i = 0; i < k; i++) {\n                for (j = 0; j < count; j++) {\n                    X[i][j] -= X[k][j] * qr[i][k];\n                }\n            }\n        }\n\n        return X.subMatrix(0, n - 1, 0, count - 1);\n    },\n    isFullRank: function () {\n        var columns = this.QR.columns;\n        for (var i = 0; i < columns; i++) {\n            if (this.Rdiag[i] === 0) {\n                return false;\n            }\n        }\n        return true;\n    },\n    get upperTriangularMatrix() {\n        var qr = this.QR,\n            n = qr.columns,\n            X = new Matrix(n, n),\n            i, j;\n        for (i = 0; i < n; i++) {\n            for (j = 0; j < n; j++) {\n                if (i < j) {\n                    X[i][j] = qr[i][j];\n                } else if (i === j) {\n                    X[i][j] = this.Rdiag[i];\n                } else {\n                    X[i][j] = 0;\n                }\n            }\n        }\n        return X;\n    },\n    get orthogonalMatrix() {\n        var qr = this.QR,\n            rows = qr.rows,\n            columns = qr.columns,\n            X = new Matrix(rows, columns),\n            i, j, k, s;\n\n        for (k = columns - 1; k >= 0; k--) {\n            for (i = 0; i < rows; i++) {\n                X[i][k] = 0;\n            }\n            X[k][k] = 1;\n            for (j = k; j < columns; j++) {\n                if (qr[k][k] !== 0) {\n                    s = 0;\n                    for (i = k; i < rows; i++) {\n                        s += qr[i][k] * X[i][j];\n                    }\n\n                    s = -s / qr[k][k];\n\n                    for (i = k; i < rows; i++) {\n                        X[i][j] += s * qr[i][k];\n                    }\n                }\n            }\n        }\n        return X;\n    }\n};\n\nmodule.exports = QrDecomposition;\n","'use strict';\n\nvar Matrix = require('../matrix').Matrix;\n\n// https://github.com/lutzroeder/Mapack/blob/master/Source/CholeskyDecomposition.cs\nfunction CholeskyDecomposition(value) {\n    if (!(this instanceof CholeskyDecomposition)) {\n        return new CholeskyDecomposition(value);\n    }\n    value = Matrix.checkMatrix(value);\n    if (!value.isSymmetric()) {\n        throw new Error('Matrix is not symmetric');\n    }\n\n    var a = value,\n        dimension = a.rows,\n        l = new Matrix(dimension, dimension),\n        positiveDefinite = true,\n        i, j, k;\n\n    for (j = 0; j < dimension; j++) {\n        var Lrowj = l[j];\n        var d = 0;\n        for (k = 0; k < j; k++) {\n            var Lrowk = l[k];\n            var s = 0;\n            for (i = 0; i < k; i++) {\n                s += Lrowk[i] * Lrowj[i];\n            }\n            Lrowj[k] = s = (a[j][k] - s) / l[k][k];\n            d = d + s * s;\n        }\n\n        d = a[j][j] - d;\n\n        positiveDefinite &= (d > 0);\n        l[j][j] = Math.sqrt(Math.max(d, 0));\n        for (k = j + 1; k < dimension; k++) {\n            l[j][k] = 0;\n        }\n    }\n\n    if (!positiveDefinite) {\n        throw new Error('Matrix is not positive definite');\n    }\n\n    this.L = l;\n}\n\nCholeskyDecomposition.prototype = {\n    get lowerTriangularMatrix() {\n        return this.L;\n    },\n    solve: function (value) {\n        value = Matrix.checkMatrix(value);\n\n        var l = this.L,\n            dimension = l.rows;\n\n        if (value.rows !== dimension) {\n            throw new Error('Matrix dimensions do not match');\n        }\n\n        var count = value.columns,\n            B = value.clone(),\n            i, j, k;\n\n        for (k = 0; k < dimension; k++) {\n            for (j = 0; j < count; j++) {\n                for (i = 0; i < k; i++) {\n                    B[k][j] -= B[i][j] * l[k][i];\n                }\n                B[k][j] /= l[k][k];\n            }\n        }\n\n        for (k = dimension - 1; k >= 0; k--) {\n            for (j = 0; j < count; j++) {\n                for (i = k + 1; i < dimension; i++) {\n                    B[k][j] -= B[i][j] * l[i][k];\n                }\n                B[k][j] /= l[k][k];\n            }\n        }\n\n        return B;\n    }\n};\n\nmodule.exports = CholeskyDecomposition;\n","'use strict';\n\nvar Opt = require('ml-optimize-lorentzian');\n\n/**\n * This function try to join the peaks that seems to belong to a broad signal in a single broad peak.\n * @param peakList\n * @param options\n */\nmodule.exports = function joinBroadPeaks(peakList, options = {}) {\n  var width = options.width;\n  var broadLines = [];\n  // Optimize the possible broad lines\n  var max = 0;\n\n  var maxI = 0;\n\n  var count = 1;\n  for (let i = peakList.length - 1; i >= 0; i--) {\n    if (peakList[i].soft) {\n      broadLines.push(peakList.splice(i, 1)[0]);\n    }\n  }\n  // Push a feak peak\n  broadLines.push({ x: Number.MAX_VALUE });\n\n  var candidates = [[broadLines[0].x, broadLines[0].y]];\n  var indexes = [0];\n\n  for (let i = 1; i < broadLines.length; i++) {\n    // console.log(broadLines[i-1].x+\" \"+broadLines[i].x);\n    if (Math.abs(broadLines[i - 1].x - broadLines[i].x) < width) {\n      candidates.push([broadLines[i].x, broadLines[i].y]);\n      if (broadLines[i].y > max) {\n        max = broadLines[i].y;\n        maxI = i;\n      }\n      indexes.push(i);\n      count++;\n    } else {\n      if (count > 2) {\n        var fitted = Opt.optimizeSingleLorentzian(candidates, {\n          x: broadLines[maxI].x,\n          y: max,\n          width: Math.abs(\n            candidates[0][0] - candidates[candidates.length - 1][0]\n          )\n        });\n        peakList.push({\n          x: fitted[0][0],\n          y: fitted[1][0],\n          width: fitted[2][0],\n          soft: false\n        });\n      } else {\n        // Put back the candidates to the signals list\n        indexes.forEach((index) => {\n          peakList.push(broadLines[index]);\n        });\n      }\n      candidates = [[broadLines[i].x, broadLines[i].y]];\n      indexes = [i];\n      max = broadLines[i].y;\n      maxI = i;\n      count = 1;\n    }\n  }\n\n  peakList.sort(function (a, b) {\n    return a.x - b.x;\n  });\n\n  return peakList;\n};\n","'use strict';\n\n/**\n * This method will allow to enlarge peaks and prevent overlap between peaks\n * Because peaks may not be symmetric after we add 2 properties, from and to.\n * @param {Array} peakList\n * @param {object} [options={}]\n * @param {number} [factor=2]\n * @param {boolean} [overlap=false] by default we don't allow overlap\n * @return {Array} peakList\n */\nmodule.exports = function broadenPeaks(peakList, options = {}) {\n  const { factor = 2, overlap = false } = options;\n\n  for (let peak of peakList) {\n    peak.from = peak.x - (peak.width / 2) * factor;\n    peak.to = peak.x + (peak.width / 2) * factor;\n  }\n\n  if (!overlap) {\n    for (let i = 0; i < peakList.length - 1; i++) {\n      let peak = peakList[i];\n      let nextPeak = peakList[i + 1];\n      if (peak.to > nextPeak.from) {\n        peak.to = nextPeak.from = (peak.to + nextPeak.from) / 2;\n      }\n    }\n  }\n\n  for (let peak of peakList) {\n    peak.width = peak.to - peak.from;\n  }\n\n  return peakList;\n};\n","'use strict';\n\nmodule.exports = exports = require('./ArrayUtils');\n\nexports.getEquallySpacedData = require('./getEquallySpaced').getEquallySpacedData;\nexports.SNV = require('./snv').SNV;\n","'use strict';\n\nconst Stat = require('ml-stat').array;\n/**\n * Function that returns an array of points given 1D array as follows:\n *\n * [x1, y1, .. , x2, y2, ..]\n *\n * And receive the number of dimensions of each point.\n * @param array\n * @param dimensions\n * @returns {Array} - Array of points.\n */\nfunction coordArrayToPoints(array, dimensions) {\n    if (array.length % dimensions !== 0) {\n        throw new RangeError('Dimensions number must be accordance with the size of the array.');\n    }\n\n    var length = array.length / dimensions;\n    var pointsArr = new Array(length);\n\n    var k = 0;\n    for (var i = 0; i < array.length; i += dimensions) {\n        var point = new Array(dimensions);\n        for (var j = 0; j < dimensions; ++j) {\n            point[j] = array[i + j];\n        }\n\n        pointsArr[k] = point;\n        k++;\n    }\n\n    return pointsArr;\n}\n\n\n/**\n * Function that given an array as follows:\n * [x1, y1, .. , x2, y2, ..]\n *\n * Returns an array as follows:\n * [[x1, x2, ..], [y1, y2, ..], [ .. ]]\n *\n * And receives the number of dimensions of each coordinate.\n * @param array\n * @param dimensions\n * @returns {Array} - Matrix of coordinates\n */\nfunction coordArrayToCoordMatrix(array, dimensions) {\n    if (array.length % dimensions !== 0) {\n        throw new RangeError('Dimensions number must be accordance with the size of the array.');\n    }\n\n    var coordinatesArray = new Array(dimensions);\n    var points = array.length / dimensions;\n    for (var i = 0; i < coordinatesArray.length; i++) {\n        coordinatesArray[i] = new Array(points);\n    }\n\n    for (i = 0; i < array.length; i += dimensions) {\n        for (var j = 0; j < dimensions; ++j) {\n            var currentPoint = Math.floor(i / dimensions);\n            coordinatesArray[j][currentPoint] = array[i + j];\n        }\n    }\n\n    return coordinatesArray;\n}\n\n/**\n * Function that receives a coordinate matrix as follows:\n * [[x1, x2, ..], [y1, y2, ..], [ .. ]]\n *\n * Returns an array of coordinates as follows:\n * [x1, y1, .. , x2, y2, ..]\n *\n * @param coordMatrix\n * @returns {Array}\n */\nfunction coordMatrixToCoordArray(coordMatrix) {\n    var coodinatesArray = new Array(coordMatrix.length * coordMatrix[0].length);\n    var k = 0;\n    for (var i = 0; i < coordMatrix[0].length; ++i) {\n        for (var j = 0; j < coordMatrix.length; ++j) {\n            coodinatesArray[k] = coordMatrix[j][i];\n            ++k;\n        }\n    }\n\n    return coodinatesArray;\n}\n\n/**\n * Tranpose a matrix, this method is for coordMatrixToPoints and\n * pointsToCoordMatrix, that because only transposing the matrix\n * you can change your representation.\n *\n * @param matrix\n * @returns {Array}\n */\nfunction transpose(matrix) {\n    var resultMatrix = new Array(matrix[0].length);\n    for (var i = 0; i < resultMatrix.length; ++i) {\n        resultMatrix[i] = new Array(matrix.length);\n    }\n\n    for (i = 0; i < matrix.length; ++i) {\n        for (var j = 0; j < matrix[0].length; ++j) {\n            resultMatrix[j][i] = matrix[i][j];\n        }\n    }\n\n    return resultMatrix;\n}\n\n/**\n * Function that transform an array of points into a coordinates array\n * as follows:\n * [x1, y1, .. , x2, y2, ..]\n *\n * @param points\n * @returns {Array}\n */\nfunction pointsToCoordArray(points) {\n    var coodinatesArray = new Array(points.length * points[0].length);\n    var k = 0;\n    for (var i = 0; i < points.length; ++i) {\n        for (var j = 0; j < points[0].length; ++j) {\n            coodinatesArray[k] = points[i][j];\n            ++k;\n        }\n    }\n\n    return coodinatesArray;\n}\n\n/**\n * Apply the dot product between the smaller vector and a subsets of the\n * largest one.\n *\n * @param firstVector\n * @param secondVector\n * @returns {Array} each dot product of size of the difference between the\n *                  larger and the smallest one.\n */\nfunction applyDotProduct(firstVector, secondVector) {\n    var largestVector, smallestVector;\n    if (firstVector.length <= secondVector.length) {\n        smallestVector = firstVector;\n        largestVector = secondVector;\n    } else {\n        smallestVector = secondVector;\n        largestVector = firstVector;\n    }\n\n    var difference = largestVector.length - smallestVector.length + 1;\n    var dotProductApplied = new Array(difference);\n\n    for (var i = 0; i < difference; ++i) {\n        var sum = 0;\n        for (var j = 0; j < smallestVector.length; ++j) {\n            sum += smallestVector[j] * largestVector[i + j];\n        }\n        dotProductApplied[i] = sum;\n    }\n\n    return dotProductApplied;\n}\n/**\n * To scale the input array between the specified min and max values. The operation is performed inplace\n * if the options.inplace is specified. If only one of the min or max parameters is specified, then the scaling\n * will multiply the input array by min/min(input) or max/max(input)\n * @param input\n * @param options\n * @returns {*}\n */\nfunction scale(input, options = {}) {\n    const {\n        min,\n        max\n    } = options;\n\n    var y = options.inPlace ? input : (new Array(input.length));\n    var minMax = Stat.minMax(input);\n\n    if (typeof max === 'number') {\n        if (typeof min === 'number') {\n            let factor = (max - min) / (minMax.max - minMax.min);\n            for (let i = 0; i < y.length; i++) {\n                y[i] = (input[i] - minMax.min) * factor + min;\n            }\n        } else if (minMax.max !== 0) {\n            let factor = max / minMax.max;\n            for (let i = 0; i < y.length; i++) {\n                y[i] = input[i] * factor;\n            }\n        } else {\n            options.min = minMax.min;\n            y = scale(input, options);\n        }\n    } else if (typeof min === 'number') {\n        if (minMax.min !== 0) {\n            let factor = min / minMax.min;\n            for (let i = 0; i < y.length; i++) {\n                y[i] = input[i] * factor;\n            }\n\n        } else {\n            options.max = minMax.max;\n            y = scale(input, options);\n        }\n    }\n    return y;\n}\n\nmodule.exports = {\n    coordArrayToPoints: coordArrayToPoints,\n    coordArrayToCoordMatrix: coordArrayToCoordMatrix,\n    coordMatrixToCoordArray: coordMatrixToCoordArray,\n    coordMatrixToPoints: transpose,\n    pointsToCoordArray: pointsToCoordArray,\n    pointsToCoordMatrix: transpose,\n    applyDotProduct: applyDotProduct,\n    scale: scale\n};\n\n","'use strict';\n\n/**\n *\n * Function that returns a Number array of equally spaced numberOfPoints\n * containing a representation of intensities of the spectra arguments x\n * and y.\n *\n * The options parameter contains an object in the following form:\n * from: starting point\n * to: last point\n * numberOfPoints: number of points between from and to\n * variant: \"slot\" or \"smooth\" - smooth is the default option\n *\n * The slot variant consist that each point in the new array is calculated\n * averaging the existing points between the slot that belongs to the current\n * value. The smooth variant is the same but takes the integral of the range\n * of the slot and divide by the step size between two points in the new array.\n *\n * @param x - sorted increasing x values\n * @param y\n * @param options\n * @returns {Array} new array with the equally spaced data.\n *\n */\nfunction getEquallySpacedData(x, y, options = {}) {\n    var xLength = x.length;\n    if (x.length > 1 && x[0] > x[1]) {\n        x = x.slice().reverse();\n        y = y.slice().reverse();\n    }\n\n    var {\n        from = x[0],\n        to = x[xLength - 1],\n        variant = 'smooth',\n        numberOfPoints = 100\n    } = options;\n\n    if (xLength !== y.length) {\n        throw new RangeError(\"the x and y vector doesn't have the same size.\");\n    }\n\n    if (typeof from !== 'number' || isNaN(from)) {\n        throw new RangeError(\"'from' option must be a number\");\n    }\n\n    if (typeof to !== 'number' || isNaN(to)) {\n        throw new RangeError(\"'to' option must be a number\");\n    }\n\n    var reverse = from > to;\n    if (reverse) {\n        [from, to] = [to, from];\n    }\n\n    if (typeof numberOfPoints !== 'number' || isNaN(numberOfPoints)) {\n        throw new RangeError(\"'numberOfPoints' option must be a number\");\n    }\n    if (numberOfPoints < 1) {\n        throw new RangeError('the number of points must be at least 1');\n    }\n\n    var output = variant === 'slot' ? getEquallySpacedSlot(x, y, from, to, numberOfPoints) : getEquallySpacedSmooth(x, y, from, to, numberOfPoints);\n\n    return reverse ? output.reverse() : output;\n}\n\n/**\n * function that retrieves the getEquallySpacedData with the variant \"smooth\"\n *\n * @param x\n * @param y\n * @param from - Initial point\n * @param to - Final point\n * @param numberOfPoints\n * @returns {Array} - Array of y's equally spaced with the variant \"smooth\"\n */\nfunction getEquallySpacedSmooth(x, y, from, to, numberOfPoints) {\n    var xLength = x.length;\n\n    var step = (to - from) / (numberOfPoints - 1);\n    var halfStep = step / 2;\n\n    var output = new Array(numberOfPoints);\n\n    var initialOriginalStep = x[1] - x[0];\n    var lastOriginalStep = x[xLength - 1] - x[xLength - 2];\n\n    // Init main variables\n    var min = from - halfStep;\n    var max = from + halfStep;\n\n    var previousX = Number.MIN_VALUE;\n    var previousY = 0;\n    var nextX = x[0] - initialOriginalStep;\n    var nextY = 0;\n\n    var currentValue = 0;\n    var slope = 0;\n    var intercept = 0;\n    var sumAtMin = 0;\n    var sumAtMax = 0;\n\n    var i = 0; // index of input\n    var j = 0; // index of output\n\n    function getSlope(x0, y0, x1, y1) {\n        return (y1 - y0) / (x1 - x0);\n    }\n\n    main: while (true) {\n\n        if (previousX <= min && min <= nextX) {\n            add = integral(0, min - previousX, slope, previousY);\n            sumAtMin = currentValue + add;\n        }\n\n        while (nextX - max >= 0) {\n            // no overlap with original point, just consume current value\n            var add = integral(0, max - previousX, slope, previousY);\n            sumAtMax = currentValue + add;\n\n            output[j++] = (sumAtMax - sumAtMin) / step;\n\n            if (j === numberOfPoints) {\n                break main;\n            }\n\n            min = max;\n            max += step;\n            sumAtMin = sumAtMax;\n        }\n\n        currentValue += integral(previousX, nextX, slope, intercept);\n\n        previousX = nextX;\n        previousY = nextY;\n\n        if (i < xLength) {\n            nextX = x[i];\n            nextY = y[i];\n            i++;\n        } else if (i === xLength) {\n            nextX += lastOriginalStep;\n            nextY = 0;\n        }\n\n        slope = getSlope(previousX, previousY, nextX, nextY);\n        intercept = -slope * previousX + previousY;\n    }\n\n    return output;\n}\n\n/**\n * function that retrieves the getEquallySpacedData with the variant \"slot\"\n *\n * @param x\n * @param y\n * @param from - Initial point\n * @param to - Final point\n * @param numberOfPoints\n * @returns {Array} - Array of y's equally spaced with the variant \"slot\"\n */\nfunction getEquallySpacedSlot(x, y, from, to, numberOfPoints) {\n    var xLength = x.length;\n\n    var step = (to - from) / (numberOfPoints - 1);\n    var halfStep = step / 2;\n    var lastStep = x[x.length - 1] - x[x.length - 2];\n\n    var start = from - halfStep;\n    var output = new Array(numberOfPoints);\n\n    // Init main variables\n    var min = start;\n    var max = start + step;\n\n    var previousX = -Number.MAX_VALUE;\n    var previousY = 0;\n    var nextX = x[0];\n    var nextY = y[0];\n    var frontOutsideSpectra = 0;\n    var backOutsideSpectra = true;\n\n    var currentValue = 0;\n\n    // for slot algorithm\n    var currentPoints = 0;\n\n    var i = 1; // index of input\n    var j = 0; // index of output\n\n    main: while (true) {\n        if (previousX >= nextX) throw (new Error('x must be an increasing serie'));\n        while (previousX - max > 0) {\n            // no overlap with original point, just consume current value\n            if (backOutsideSpectra) {\n                currentPoints++;\n                backOutsideSpectra = false;\n            }\n\n            output[j] = currentPoints <= 0 ? 0 : currentValue / currentPoints;\n            j++;\n\n            if (j === numberOfPoints) {\n                break main;\n            }\n\n            min = max;\n            max += step;\n            currentValue = 0;\n            currentPoints = 0;\n        }\n\n        if (previousX > min) {\n            currentValue += previousY;\n            currentPoints++;\n        }\n\n        if (previousX === -Number.MAX_VALUE || frontOutsideSpectra > 1) {\n            currentPoints--;\n        }\n\n        previousX = nextX;\n        previousY = nextY;\n\n        if (i < xLength) {\n            nextX = x[i];\n            nextY = y[i];\n            i++;\n        } else {\n            nextX += lastStep;\n            nextY = 0;\n            frontOutsideSpectra++;\n        }\n    }\n\n    return output;\n}\n/**\n * Function that calculates the integral of the line between two\n * x-coordinates, given the slope and intercept of the line.\n * @param x0\n * @param x1\n * @param slope\n * @param intercept\n * @returns {number} integral value.\n */\nfunction integral(x0, x1, slope, intercept) {\n    return (0.5 * slope * x1 * x1 + intercept * x1) - (0.5 * slope * x0 * x0 + intercept * x0);\n}\n\nexports.getEquallySpacedData = getEquallySpacedData;\nexports.integral = integral;\n","'use strict';\n\nexports.SNV = SNV;\nvar Stat = require('ml-stat').array;\n\n/**\n * Function that applies the standard normal variate (SNV) to an array of values.\n *\n * @param data - Array of values.\n * @returns {Array} - applied the SNV.\n */\nfunction SNV(data) {\n    var mean = Stat.mean(data);\n    var std = Stat.standardDeviation(data);\n    var result = data.slice();\n    for (var i = 0; i < data.length; i++) {\n        result[i] = (result[i] - mean) / std;\n    }\n    return result;\n}\n","// external dependencies\nimport { curry } from 'curriable'; // utils\n\nimport { getIntegerHashValue, stringify } from './utils';\n/**\n * @function hash\n *\n * @description\n * hash the value passed to a unique, consistent hash value\n *\n * @param {any} value the value to hash\n * @returns {number} the object hash\n */\n\nexport var hash = function hash(value) {\n  return getIntegerHashValue(stringify(value));\n};\n/**\n * @function hash.is\n *\n * @description\n * create a comparator for the first object passed to determine if the second is equal\n *\n * @param {any} object the object to test against\n * @returns {function(any): boolean} the method to test against the object\n */\n\nhash.is = curry(function (object, otherObject) {\n  return hash(object) === hash(otherObject);\n});\n/**\n * @function hash.is.all\n *\n * @description\n * determine if all of the objects passed are equal in value to the first\n *\n * @param {...Array<any>} objects the objects to test for equality\n * @returns {boolean} are the objects equal\n */\n\nhash.is.all = curry(function () {\n  for (var _len = arguments.length, objects = new Array(_len), _key = 0; _key < _len; _key++) {\n    objects[_key] = arguments[_key];\n  }\n\n  var isEqual = hash.is(objects.shift());\n\n  for (var index = 0; index < objects.length; index++) {\n    if (!isEqual(objects[index])) {\n      return false;\n    }\n  }\n\n  return true;\n}, 2);\n/**\n * @function hash.is.any\n *\n * @description\n * determine if any of the objects passed are equal in value to the first\n *\n * @param {...Array<any>} objects the objects to test for equality\n * @returns {boolean} are the objects equal\n */\n\nhash.is.any = curry(function () {\n  for (var _len2 = arguments.length, objects = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    objects[_key2] = arguments[_key2];\n  }\n\n  var isEqual = hash.is(objects.shift());\n\n  for (var index = 0; index < objects.length; index++) {\n    if (isEqual(objects[index])) {\n      return true;\n    }\n  }\n\n  return false;\n}, 2);\n/**\n * @function hash.is.not\n *\n * @description\n * create a comparator for the first object passed to determine if the second is not equal\n *\n * @param {any} object the object to test against\n * @returns {function(any): boolean} the method to test against the object\n */\n\nhash.is.not = curry(function (object, otherObject) {\n  return hash(object) !== hash(otherObject);\n});\nexport default hash;","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  for (var i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","'use strict';\n\nfunction getConverter() {\n  // the following RegExp can only be used for XYdata, some peakTables have values with a \"E-5\" ...\n  const ntuplesSeparator = /[, \\t]+/;\n  const GC_MS_FIELDS = ['TIC', '.RIC', 'SCANNUMBER'];\n\n  function convertToFloatArray(stringArray) {\n    var floatArray = [];\n    for (let i = 0; i < stringArray.length; i++) {\n      floatArray.push(parseFloat(stringArray[i]));\n    }\n    return floatArray;\n  }\n\n  class Spectrum {}\n\n  const defaultOptions = {\n    keepRecordsRegExp: /^$/,\n    xy: false,\n    withoutXY: false,\n    chromatogram: false,\n    keepSpectra: false,\n    noContour: false,\n    nbContourLevels: 7,\n    noiseMultiplier: 5,\n    profiling: false\n  };\n\n  function convert(jcamp, options) {\n    options = Object.assign({}, defaultOptions, options);\n\n    var wantXY = !options.withoutXY;\n\n    var start = Date.now();\n\n    var ntuples = {};\n    var ldr, dataLabel, dataValue, ldrs;\n    var position, endLine, infos;\n\n    var result = {};\n    result.profiling = options.profiling ? [] : false;\n    result.logs = [];\n    var spectra = [];\n    result.spectra = spectra;\n    result.info = {};\n    var spectrum = new Spectrum();\n\n    if (!(typeof jcamp === 'string')) {\n      throw new TypeError('the JCAMP should be a string');\n    }\n\n    if (result.profiling) {\n      result.profiling.push({\n        action: 'Before split to LDRS',\n        time: Date.now() - start\n      });\n    }\n\n    ldrs = jcamp.split(/[\\r\\n]+##/);\n\n    if (result.profiling) {\n      result.profiling.push({\n        action: 'Split to LDRS',\n        time: Date.now() - start\n      });\n    }\n\n    if (ldrs[0]) ldrs[0] = ldrs[0].replace(/^[\\r\\n ]*##/, '');\n\n    for (let i = 0; i < ldrs.length; i++) {\n      ldr = ldrs[i];\n      // This is a new LDR\n      position = ldr.indexOf('=');\n      if (position > 0) {\n        dataLabel = ldr.substring(0, position);\n        dataValue = ldr.substring(position + 1).trim();\n      } else {\n        dataLabel = ldr;\n        dataValue = '';\n      }\n      dataLabel = dataLabel.replace(/[_ -]/g, '').toUpperCase();\n\n      if (dataLabel === 'DATATABLE') {\n        endLine = dataValue.indexOf('\\n');\n        if (endLine === -1) endLine = dataValue.indexOf('\\r');\n        if (endLine > 0) {\n          var xIndex = -1;\n          var yIndex = -1;\n          // ##DATA TABLE= (X++(I..I)), XYDATA\n          // We need to find the variables\n\n          infos = dataValue.substring(0, endLine).split(/[ ,;\\t]+/);\n          if (infos[0].indexOf('++') > 0) {\n            var firstVariable = infos[0].replace(\n              /.*\\(([a-zA-Z0-9]+)\\+\\+.*/,\n              '$1'\n            );\n            var secondVariable = infos[0].replace(\n              /.*\\.\\.([a-zA-Z0-9]+).*/,\n              '$1'\n            );\n            xIndex = ntuples.symbol.indexOf(firstVariable);\n            yIndex = ntuples.symbol.indexOf(secondVariable);\n          }\n\n          if (xIndex === -1) xIndex = 0;\n          if (yIndex === -1) yIndex = 0;\n\n          if (ntuples.first) {\n            if (ntuples.first.length > xIndex) {\n              spectrum.firstX = ntuples.first[xIndex];\n            }\n            if (ntuples.first.length > yIndex) {\n              spectrum.firstY = ntuples.first[yIndex];\n            }\n          }\n          if (ntuples.last) {\n            if (ntuples.last.length > xIndex) {\n              spectrum.lastX = ntuples.last[xIndex];\n            }\n            if (ntuples.last.length > yIndex) {\n              spectrum.lastY = ntuples.last[yIndex];\n            }\n          }\n          if (ntuples.vardim && ntuples.vardim.length > xIndex) {\n            spectrum.nbPoints = ntuples.vardim[xIndex];\n          }\n          if (ntuples.factor) {\n            if (ntuples.factor.length > xIndex) {\n              spectrum.xFactor = ntuples.factor[xIndex];\n            }\n            if (ntuples.factor.length > yIndex) {\n              spectrum.yFactor = ntuples.factor[yIndex];\n            }\n          }\n          if (ntuples.units) {\n            if (ntuples.units.length > xIndex) {\n              spectrum.xUnit = ntuples.units[xIndex];\n            }\n            if (ntuples.units.length > yIndex) {\n              spectrum.yUnit = ntuples.units[yIndex];\n            }\n          }\n          spectrum.datatable = infos[0];\n          if (infos[1] && infos[1].indexOf('PEAKS') > -1) {\n            dataLabel = 'PEAKTABLE';\n          } else if (\n            infos[1] &&\n            (infos[1].indexOf('XYDATA') || infos[0].indexOf('++') > 0)\n          ) {\n            dataLabel = 'XYDATA';\n            spectrum.deltaX =\n              (spectrum.lastX - spectrum.firstX) / (spectrum.nbPoints - 1);\n          }\n        }\n      }\n\n      if (dataLabel === 'XYDATA') {\n        if (wantXY) {\n          prepareSpectrum(result, spectrum);\n          // well apparently we should still consider it is a PEAK TABLE if there are no '++' after\n          if (dataValue.match(/.*\\+\\+.*/)) {\n            // ex: (X++(Y..Y))\n            if (!spectrum.deltaX) {\n              spectrum.deltaX =\n                (spectrum.lastX - spectrum.firstX) / (spectrum.nbPoints - 1);\n            }\n            fastParseXYData(spectrum, dataValue, result);\n          } else {\n            parsePeakTable(spectrum, dataValue, result);\n          }\n          spectra.push(spectrum);\n          spectrum = new Spectrum();\n        }\n        continue;\n      } else if (dataLabel === 'PEAKTABLE') {\n        if (wantXY) {\n          prepareSpectrum(result, spectrum);\n          parsePeakTable(spectrum, dataValue, result);\n          spectra.push(spectrum);\n          spectrum = new Spectrum();\n        }\n        continue;\n      }\n      if (dataLabel === 'PEAKASSIGNMENTS') {\n        if (wantXY) {\n          if (dataValue.match(/.*(XYA).*/)) {\n            // ex: (XYA)\n            parseXYA(spectrum, dataValue);\n          }\n          spectra.push(spectrum);\n          spectrum = new Spectrum();\n        }\n        continue;\n      }\n\n      if (dataLabel === 'TITLE') {\n        spectrum.title = dataValue;\n      } else if (dataLabel === 'DATATYPE') {\n        spectrum.dataType = dataValue;\n        if (dataValue.indexOf('nD') > -1) {\n          result.twoD = true;\n        }\n      } else if (dataLabel === 'NTUPLES') {\n        if (dataValue.indexOf('nD') > -1) {\n          result.twoD = true;\n        }\n      } else if (dataLabel === 'XUNITS') {\n        spectrum.xUnit = dataValue;\n      } else if (dataLabel === 'YUNITS') {\n        spectrum.yUnit = dataValue;\n      } else if (dataLabel === 'FIRSTX') {\n        spectrum.firstX = parseFloat(dataValue);\n      } else if (dataLabel === 'LASTX') {\n        spectrum.lastX = parseFloat(dataValue);\n      } else if (dataLabel === 'FIRSTY') {\n        spectrum.firstY = parseFloat(dataValue);\n      } else if (dataLabel === 'LASTY') {\n        spectrum.lastY = parseFloat(dataValue);\n      } else if (dataLabel === 'NPOINTS') {\n        spectrum.nbPoints = parseFloat(dataValue);\n      } else if (dataLabel === 'XFACTOR') {\n        spectrum.xFactor = parseFloat(dataValue);\n      } else if (dataLabel === 'YFACTOR') {\n        spectrum.yFactor = parseFloat(dataValue);\n      } else if (dataLabel === 'MAXX') {\n        spectrum.maxX = parseFloat(dataValue);\n      } else if (dataLabel === 'MINX') {\n        spectrum.minX = parseFloat(dataValue);\n      } else if (dataLabel === 'MAXY') {\n        spectrum.maxY = parseFloat(dataValue);\n      } else if (dataLabel === 'MINY') {\n        spectrum.minY = parseFloat(dataValue);\n      } else if (dataLabel === 'DELTAX') {\n        spectrum.deltaX = parseFloat(dataValue);\n      } else if (dataLabel === '.OBSERVEFREQUENCY' || dataLabel === '$SFO1') {\n        if (!spectrum.observeFrequency) {\n          spectrum.observeFrequency = parseFloat(dataValue);\n        }\n      } else if (dataLabel === '.OBSERVENUCLEUS') {\n        if (!spectrum.xType) {\n          result.xType = dataValue.replace(/[^a-zA-Z0-9]/g, '');\n        }\n      } else if (dataLabel === '$SFO2') {\n        if (!result.indirectFrequency) {\n          result.indirectFrequency = parseFloat(dataValue);\n        }\n      } else if (dataLabel === '$OFFSET') {\n        // OFFSET for Bruker spectra\n        result.shiftOffsetNum = 0;\n        if (!spectrum.shiftOffsetVal) {\n          spectrum.shiftOffsetVal = parseFloat(dataValue);\n        }\n      } else if (dataLabel === '$REFERENCEPOINT') {\n        // OFFSET for Varian spectra\n        // if we activate this part it does not work for ACD specmanager\n        //         } else if (dataLabel=='.SHIFTREFERENCE') {   // OFFSET FOR Bruker Spectra\n        //                 var parts = dataValue.split(/ *, */);\n        //                 result.shiftOffsetNum = parseInt(parts[2].trim());\n        //                 spectrum.shiftOffsetVal = parseFloat(parts[3].trim());\n      } else if (dataLabel === 'VARNAME') {\n        ntuples.varname = dataValue.split(ntuplesSeparator);\n      } else if (dataLabel === 'SYMBOL') {\n        ntuples.symbol = dataValue.split(ntuplesSeparator);\n      } else if (dataLabel === 'VARTYPE') {\n        ntuples.vartype = dataValue.split(ntuplesSeparator);\n      } else if (dataLabel === 'VARFORM') {\n        ntuples.varform = dataValue.split(ntuplesSeparator);\n      } else if (dataLabel === 'VARDIM') {\n        ntuples.vardim = convertToFloatArray(dataValue.split(ntuplesSeparator));\n      } else if (dataLabel === 'UNITS') {\n        ntuples.units = dataValue.split(ntuplesSeparator);\n      } else if (dataLabel === 'FACTOR') {\n        ntuples.factor = convertToFloatArray(dataValue.split(ntuplesSeparator));\n      } else if (dataLabel === 'FIRST') {\n        ntuples.first = convertToFloatArray(dataValue.split(ntuplesSeparator));\n      } else if (dataLabel === 'LAST') {\n        ntuples.last = convertToFloatArray(dataValue.split(ntuplesSeparator));\n      } else if (dataLabel === 'MIN') {\n        ntuples.min = convertToFloatArray(dataValue.split(ntuplesSeparator));\n      } else if (dataLabel === 'MAX') {\n        ntuples.max = convertToFloatArray(dataValue.split(ntuplesSeparator));\n      } else if (dataLabel === '.NUCLEUS') {\n        if (result.twoD) {\n          result.yType = dataValue.split(ntuplesSeparator)[0];\n        }\n      } else if (dataLabel === 'PAGE') {\n        spectrum.page = dataValue.trim();\n        spectrum.pageValue = parseFloat(dataValue.replace(/^.*=/, ''));\n        spectrum.pageSymbol = spectrum.page.replace(/[=].*/, '');\n        var pageSymbolIndex = ntuples.symbol.indexOf(spectrum.pageSymbol);\n        var unit = '';\n        if (ntuples.units && ntuples.units[pageSymbolIndex]) {\n          unit = ntuples.units[pageSymbolIndex];\n        }\n        if (result.indirectFrequency && unit !== 'PPM') {\n          spectrum.pageValue /= result.indirectFrequency;\n        }\n      } else if (dataLabel === 'RETENTIONTIME') {\n        spectrum.pageValue = parseFloat(dataValue);\n      } else if (isMSField(dataLabel)) {\n        spectrum[convertMSFieldToLabel(dataLabel)] = dataValue;\n      } else if (dataLabel === 'SAMPLEDESCRIPTION') {\n        spectrum.sampleDescription = dataValue;\n      }\n      if (dataLabel.match(options.keepRecordsRegExp)) {\n        if (result.info[dataLabel]) {\n          if (!Array.isArray(result.info[dataLabel])) {\n            result.info[dataLabel] = [result.info[dataLabel]];\n          }\n          result.info[dataLabel].push(dataValue.trim());\n        } else {\n          result.info[dataLabel] = dataValue.trim();\n        }\n      }\n    }\n\n    if (result.profiling) {\n      result.profiling.push({\n        action: 'Finished parsing',\n        time: Date.now() - start\n      });\n    }\n\n    if (Object.keys(ntuples).length > 0) {\n      var newNtuples = [];\n      var keys = Object.keys(ntuples);\n      for (let i = 0; i < keys.length; i++) {\n        var key = keys[i];\n        var values = ntuples[key];\n        for (let j = 0; j < values.length; j++) {\n          if (!newNtuples[j]) newNtuples[j] = {};\n          newNtuples[j][key] = values[j];\n        }\n      }\n      result.ntuples = newNtuples;\n    }\n\n    if (result.twoD && wantXY) {\n      add2D(result, options);\n      if (result.profiling) {\n        result.profiling.push({\n          action: 'Finished countour plot calculation',\n          time: Date.now() - start\n        });\n      }\n      if (!options.keepSpectra) {\n        delete result.spectra;\n      }\n    }\n\n    if (options.chromatogram) {\n      options.xy = true;\n    }\n\n    if (options.xy && wantXY) {\n      // the spectraData should not be a oneD array but an object with x and y\n      if (spectra.length > 0) {\n        for (let i = 0; i < spectra.length; i++) {\n          spectrum = spectra[i];\n          if (spectrum.data.length > 0) {\n            for (let j = 0; j < spectrum.data.length; j++) {\n              var data = spectrum.data[j];\n              var newData = {\n                x: new Array(data.length / 2),\n                y: new Array(data.length / 2)\n              };\n              for (var k = 0; k < data.length; k = k + 2) {\n                newData.x[k / 2] = data[k];\n                newData.y[k / 2] = data[k + 1];\n              }\n              spectrum.data[j] = newData;\n            }\n          }\n        }\n      }\n    }\n\n    // maybe it is a GC (HPLC) / MS. In this case we add a new format\n    if (options.chromatogram) {\n      if (result.spectra.length > 1) {\n        complexChromatogram(result);\n      } else {\n        simpleChromatogram(result);\n      }\n      if (result.profiling) {\n        result.profiling.push({\n          action: 'Finished chromatogram calculation',\n          time: Date.now() - start\n        });\n      }\n    }\n\n    if (result.profiling) {\n      result.profiling.push({\n        action: 'Total time',\n        time: Date.now() - start\n      });\n    }\n\n    return result;\n  }\n\n  function convertMSFieldToLabel(value) {\n    return value.toLowerCase().replace(/[^a-z0-9]/g, '');\n  }\n\n  function isMSField(dataLabel) {\n    return GC_MS_FIELDS.indexOf(dataLabel) !== -1;\n  }\n\n  function complexChromatogram(result) {\n    var spectra = result.spectra;\n    var length = spectra.length;\n    var chromatogram = {\n      times: new Array(length),\n      series: {\n        ms: {\n          dimension: 2,\n          data: new Array(length)\n        }\n      }\n    };\n\n    var existingGCMSFields = [];\n    for (let i = 0; i < GC_MS_FIELDS.length; i++) {\n      var label = convertMSFieldToLabel(GC_MS_FIELDS[i]);\n      if (spectra[0][label]) {\n        existingGCMSFields.push(label);\n        chromatogram.series[label] = {\n          dimension: 1,\n          data: new Array(length)\n        };\n      }\n    }\n\n    for (let i = 0; i < length; i++) {\n      var spectrum = spectra[i];\n      chromatogram.times[i] = spectrum.pageValue;\n      for (let j = 0; j < existingGCMSFields.length; j++) {\n        chromatogram.series[existingGCMSFields[j]].data[i] = parseFloat(\n          spectrum[existingGCMSFields[j]]\n        );\n      }\n      if (spectrum.data) {\n        chromatogram.series.ms.data[i] = [\n          spectrum.data[0].x,\n          spectrum.data[0].y\n        ];\n      }\n    }\n    result.chromatogram = chromatogram;\n  }\n\n  function simpleChromatogram(result) {\n    var data = result.spectra[0].data[0];\n    result.chromatogram = {\n      times: data.x.slice(),\n      series: {\n        intensity: {\n          dimension: 1,\n          data: data.y.slice()\n        }\n      }\n    };\n  }\n\n  function prepareSpectrum(result, spectrum) {\n    if (!spectrum.xFactor) spectrum.xFactor = 1;\n    if (!spectrum.yFactor) spectrum.yFactor = 1;\n    if (spectrum.observeFrequency) {\n      if (spectrum.xUnit && spectrum.xUnit.toUpperCase() === 'HZ') {\n        spectrum.xUnit = 'PPM';\n        spectrum.xFactor = spectrum.xFactor / spectrum.observeFrequency;\n        spectrum.firstX = spectrum.firstX / spectrum.observeFrequency;\n        spectrum.lastX = spectrum.lastX / spectrum.observeFrequency;\n        spectrum.deltaX = spectrum.deltaX / spectrum.observeFrequency;\n      }\n    }\n    if (spectrum.shiftOffsetVal) {\n      var shift = spectrum.firstX - spectrum.shiftOffsetVal;\n      spectrum.firstX = spectrum.firstX - shift;\n      spectrum.lastX = spectrum.lastX - shift;\n    }\n  }\n\n  function getMedian(data) {\n    data = data.sort(compareNumbers);\n    var l = data.length;\n    return data[Math.floor(l / 2)];\n  }\n\n  function compareNumbers(a, b) {\n    return a - b;\n  }\n\n  function convertTo3DZ(spectra) {\n    var minZ = spectra[0].data[0][0];\n    var maxZ = minZ;\n    var ySize = spectra.length;\n    var xSize = spectra[0].data[0].length / 2;\n    var z = new Array(ySize);\n    for (let i = 0; i < ySize; i++) {\n      z[i] = new Array(xSize);\n      var xVector = spectra[i].data[0];\n      for (let j = 0; j < xSize; j++) {\n        var value = xVector[j * 2 + 1];\n        z[i][j] = value;\n        if (value < minZ) minZ = value;\n        if (value > maxZ) maxZ = value;\n      }\n    }\n    return {\n      z: z,\n      minX: spectra[0].data[0][0],\n      maxX: spectra[0].data[0][spectra[0].data[0].length - 2], // has to be -2 because it is a 1D array [x,y,x,y,...]\n      minY: spectra[0].pageValue,\n      maxY: spectra[ySize - 1].pageValue,\n      minZ: minZ,\n      maxZ: maxZ,\n      noise: getMedian(z[0].map(Math.abs))\n    };\n  }\n\n  function add2D(result, options) {\n    var zData = convertTo3DZ(result.spectra);\n    if (!options.noContour) {\n      result.contourLines = generateContourLines(zData, options);\n      delete zData.z;\n    }\n    result.minMax = zData;\n  }\n\n  function generateContourLines(zData, options) {\n    var noise = zData.noise;\n    var z = zData.z;\n    var povarHeight0, povarHeight1, povarHeight2, povarHeight3;\n    var isOver0, isOver1, isOver2, isOver3;\n    var nbSubSpectra = z.length;\n    var nbPovars = z[0].length;\n    var pAx, pAy, pBx, pBy;\n\n    var x0 = zData.minX;\n    var xN = zData.maxX;\n    var dx = (xN - x0) / (nbPovars - 1);\n    var y0 = zData.minY;\n    var yN = zData.maxY;\n    var dy = (yN - y0) / (nbSubSpectra - 1);\n    var minZ = zData.minZ;\n    var maxZ = zData.maxZ;\n\n    // System.out.prvarln('y0 '+y0+' yN '+yN);\n    // -------------------------\n    // Povars attribution\n    //\n    // 0----1\n    // |  / |\n    // | /  |\n    // 2----3\n    //\n    // ---------------------d------\n\n    var iter = options.nbContourLevels * 2;\n    var contourLevels = new Array(iter);\n    var lineZValue;\n    for (var level = 0; level < iter; level++) {\n      // multiply by 2 for positif and negatif\n      var contourLevel = {};\n      contourLevels[level] = contourLevel;\n      var side = level % 2;\n      var factor =\n        (maxZ - options.noiseMultiplier * noise) *\n        Math.exp((level >> 1) - options.nbContourLevels);\n      if (side === 0) {\n        lineZValue = factor + options.noiseMultiplier * noise;\n      } else {\n        lineZValue = 0 - factor - options.noiseMultiplier * noise;\n      }\n      var lines = [];\n      contourLevel.zValue = lineZValue;\n      contourLevel.lines = lines;\n\n      if (lineZValue <= minZ || lineZValue >= maxZ) continue;\n\n      for (var iSubSpectra = 0; iSubSpectra < nbSubSpectra - 1; iSubSpectra++) {\n        var subSpectra = z[iSubSpectra];\n        var subSpectraAfter = z[iSubSpectra + 1];\n        for (var povar = 0; povar < nbPovars - 1; povar++) {\n          povarHeight0 = subSpectra[povar];\n          povarHeight1 = subSpectra[povar + 1];\n          povarHeight2 = subSpectraAfter[povar];\n          povarHeight3 = subSpectraAfter[povar + 1];\n\n          isOver0 = povarHeight0 > lineZValue;\n          isOver1 = povarHeight1 > lineZValue;\n          isOver2 = povarHeight2 > lineZValue;\n          isOver3 = povarHeight3 > lineZValue;\n\n          // Example povar0 is over the plane and povar1 and\n          // povar2 are below, we find the varersections and add\n          // the segment\n          if (isOver0 !== isOver1 && isOver0 !== isOver2) {\n            pAx =\n              povar +\n              (lineZValue - povarHeight0) / (povarHeight1 - povarHeight0);\n            pAy = iSubSpectra;\n            pBx = povar;\n            pBy =\n              iSubSpectra +\n              (lineZValue - povarHeight0) / (povarHeight2 - povarHeight0);\n            lines.push(pAx * dx + x0);\n            lines.push(pAy * dy + y0);\n            lines.push(pBx * dx + x0);\n            lines.push(pBy * dy + y0);\n          }\n          // remove push does not help !!!!\n          if (isOver3 !== isOver1 && isOver3 !== isOver2) {\n            pAx = povar + 1;\n            pAy =\n              iSubSpectra +\n              1 -\n              (lineZValue - povarHeight3) / (povarHeight1 - povarHeight3);\n            pBx =\n              povar +\n              1 -\n              (lineZValue - povarHeight3) / (povarHeight2 - povarHeight3);\n            pBy = iSubSpectra + 1;\n            lines.push(pAx * dx + x0);\n            lines.push(pAy * dy + y0);\n            lines.push(pBx * dx + x0);\n            lines.push(pBy * dy + y0);\n          }\n          // test around the diagonal\n          if (isOver1 !== isOver2) {\n            pAx =\n              (povar +\n                1 -\n                (lineZValue - povarHeight1) / (povarHeight2 - povarHeight1)) *\n                dx +\n              x0;\n            pAy =\n              (iSubSpectra +\n                (lineZValue - povarHeight1) / (povarHeight2 - povarHeight1)) *\n                dy +\n              y0;\n            if (isOver1 !== isOver0) {\n              pBx =\n                povar +\n                1 -\n                (lineZValue - povarHeight1) / (povarHeight0 - povarHeight1);\n              pBy = iSubSpectra;\n              lines.push(pAx);\n              lines.push(pAy);\n              lines.push(pBx * dx + x0);\n              lines.push(pBy * dy + y0);\n            }\n            if (isOver2 !== isOver0) {\n              pBx = povar;\n              pBy =\n                iSubSpectra +\n                1 -\n                (lineZValue - povarHeight2) / (povarHeight0 - povarHeight2);\n              lines.push(pAx);\n              lines.push(pAy);\n              lines.push(pBx * dx + x0);\n              lines.push(pBy * dy + y0);\n            }\n            if (isOver1 !== isOver3) {\n              pBx = povar + 1;\n              pBy =\n                iSubSpectra +\n                (lineZValue - povarHeight1) / (povarHeight3 - povarHeight1);\n              lines.push(pAx);\n              lines.push(pAy);\n              lines.push(pBx * dx + x0);\n              lines.push(pBy * dy + y0);\n            }\n            if (isOver2 !== isOver3) {\n              pBx =\n                povar +\n                (lineZValue - povarHeight2) / (povarHeight3 - povarHeight2);\n              pBy = iSubSpectra + 1;\n              lines.push(pAx);\n              lines.push(pAy);\n              lines.push(pBx * dx + x0);\n              lines.push(pBy * dy + y0);\n            }\n          }\n        }\n      }\n    }\n\n    return {\n      minX: zData.minX,\n      maxX: zData.maxX,\n      minY: zData.minY,\n      maxY: zData.maxY,\n      segments: contourLevels\n    };\n  }\n\n  function fastParseXYData(spectrum, value) {\n    // TODO need to deal with result\n    //  console.log(value);\n    // we check if deltaX is defined otherwise we calculate it\n\n    var yFactor = spectrum.yFactor;\n    var deltaX = spectrum.deltaX;\n\n    spectrum.isXYdata = true;\n    // TODO to be improved using 2 array {x:[], y:[]}\n    var currentData = [];\n    spectrum.data = [currentData];\n\n    var currentX = spectrum.firstX;\n    var currentY = spectrum.firstY;\n\n    // we skip the first line\n    //\n    var endLine = false;\n    var ascii;\n    let i = 0;\n    for (; i < value.length; i++) {\n      ascii = value.charCodeAt(i);\n      if (ascii === 13 || ascii === 10) {\n        endLine = true;\n      } else {\n        if (endLine) break;\n      }\n    }\n\n    // we proceed taking the i after the first line\n    var newLine = true;\n    var isDifference = false;\n    var isLastDifference = false;\n    var lastDifference = 0;\n    var isDuplicate = false;\n    var inComment = false;\n    var currentValue = 0; // can be a difference or a duplicate\n    var lastValue = 0; // must be the real last value\n    var isNegative = false;\n    var inValue = false;\n    var skipFirstValue = false;\n    var decimalPosition = 0;\n    for (; i <= value.length; i++) {\n      if (i === value.length) ascii = 13;\n      else ascii = value.charCodeAt(i);\n      if (inComment) {\n        // we should ignore the text if we are after $$\n        if (ascii === 13 || ascii === 10) {\n          newLine = true;\n          inComment = false;\n        }\n      } else {\n        // when is it a new value ?\n        // when it is not a digit, . or comma\n        // it is a number that is either new or we continue\n        if (ascii <= 57 && ascii >= 48) {\n          // a number\n          inValue = true;\n          if (decimalPosition > 0) {\n            currentValue += (ascii - 48) / Math.pow(10, decimalPosition++);\n          } else {\n            currentValue *= 10;\n            currentValue += ascii - 48;\n          }\n        } else if (ascii === 44 || ascii === 46) {\n          // a \",\" or \".\"\n          inValue = true;\n          decimalPosition++;\n        } else {\n          if (inValue) {\n            // need to process the previous value\n            if (newLine) {\n              newLine = false; // we don't check the X value\n              // console.log(\"NEW LINE\",isDifference, lastDifference);\n              // if new line and lastDifference, the first value is just a check !\n              // that we don't check ...\n              if (isLastDifference) skipFirstValue = true;\n            } else {\n              // need to deal with duplicate and differences\n              if (skipFirstValue) {\n                skipFirstValue = false;\n              } else {\n                if (isDifference) {\n                  lastDifference = isNegative ? 0 - currentValue : currentValue;\n                  isLastDifference = true;\n                  isDifference = false;\n                } else if (!isDuplicate) {\n                  lastValue = isNegative ? 0 - currentValue : currentValue;\n                }\n                var duplicate = isDuplicate ? currentValue - 1 : 1;\n                for (var j = 0; j < duplicate; j++) {\n                  if (isLastDifference) {\n                    currentY += lastDifference;\n                  } else {\n                    currentY = lastValue;\n                  }\n                  currentData.push(currentX);\n                  currentData.push(currentY * yFactor);\n                  currentX += deltaX;\n                }\n              }\n            }\n            isNegative = false;\n            currentValue = 0;\n            decimalPosition = 0;\n            inValue = false;\n            isDuplicate = false;\n          }\n\n          // positive SQZ digits @ A B C D E F G H I (ascii 64-73)\n          if (ascii < 74 && ascii > 63) {\n            inValue = true;\n            isLastDifference = false;\n            currentValue = ascii - 64;\n          } else if (ascii > 96 && ascii < 106) {\n            // negative SQZ digits a b c d e f g h i (ascii 97-105)\n            inValue = true;\n            isLastDifference = false;\n            currentValue = ascii - 96;\n            isNegative = true;\n          } else if (ascii === 115) {\n            // DUP digits S T U V W X Y Z s (ascii 83-90, 115)\n            inValue = true;\n            isDuplicate = true;\n            currentValue = 9;\n          } else if (ascii > 82 && ascii < 91) {\n            inValue = true;\n            isDuplicate = true;\n            currentValue = ascii - 82;\n          } else if (ascii > 73 && ascii < 83) {\n            // positive DIF digits % J K L M N O P Q R (ascii 37, 74-82)\n            inValue = true;\n            isDifference = true;\n            currentValue = ascii - 73;\n          } else if (ascii > 105 && ascii < 115) {\n            // negative DIF digits j k l m n o p q r (ascii 106-114)\n            inValue = true;\n            isDifference = true;\n            currentValue = ascii - 105;\n            isNegative = true;\n          } else if (ascii === 36 && value.charCodeAt(i + 1) === 36) {\n            // $ sign, we need to check the next one\n            inValue = true;\n            inComment = true;\n          } else if (ascii === 37) {\n            // positive DIF digits % J K L M N O P Q R (ascii 37, 74-82)\n            inValue = true;\n            isDifference = true;\n            currentValue = 0;\n            isNegative = false;\n          } else if (ascii === 45) {\n            // a \"-\"\n            // check if after there is a number, decimal or comma\n            var ascii2 = value.charCodeAt(i + 1);\n            if (\n              (ascii2 >= 48 && ascii2 <= 57) ||\n              ascii2 === 44 ||\n              ascii2 === 46\n            ) {\n              inValue = true;\n              if (!newLine) isLastDifference = false;\n              isNegative = true;\n            }\n          } else if (ascii === 13 || ascii === 10) {\n            newLine = true;\n            inComment = false;\n          }\n          // and now analyse the details ... space or tabulation\n          // if \"+\" we just don't care\n        }\n      }\n    }\n  }\n\n  function parseXYA(spectrum, value) {\n    var removeSymbolRegExp = /(\\(+|\\)+|<+|>+|\\s+)/g;\n\n    spectrum.isXYAdata = true;\n    var values;\n    var currentData = [];\n    spectrum.data = [currentData];\n\n    var lines = value.split(/,? *,?[;\\r\\n]+ */);\n\n    for (let i = 1; i < lines.length; i++) {\n      values = lines[i]\n        .trim()\n        .replace(removeSymbolRegExp, '')\n        .split(',');\n      currentData.push(parseFloat(values[0]));\n      currentData.push(parseFloat(values[1]));\n    }\n  }\n\n  function parsePeakTable(spectrum, value, result) {\n    var removeCommentRegExp = /\\$\\$.*/;\n    var peakTableSplitRegExp = /[,\\t ]+/;\n\n    spectrum.isPeaktable = true;\n    var values;\n    var currentData = [];\n    spectrum.data = [currentData];\n\n    // counts for around 20% of the time\n    var lines = value.split(/,? *,?[;\\r\\n]+ */);\n\n    for (let i = 1; i < lines.length; i++) {\n      values = lines[i]\n        .trim()\n        .replace(removeCommentRegExp, '')\n        .split(peakTableSplitRegExp);\n      if (values.length % 2 === 0) {\n        for (let j = 0; j < values.length; j = j + 2) {\n          // takes around 40% of the time to add and parse the 2 values nearly exclusively because of parseFloat\n          currentData.push(parseFloat(values[j]) * spectrum.xFactor);\n          currentData.push(parseFloat(values[j + 1]) * spectrum.yFactor);\n        }\n      } else {\n        result.logs.push(`Format error: ${values}`);\n      }\n    }\n  }\n\n  return convert;\n}\n\nvar convert = getConverter();\n\nfunction JcampConverter(input, options, useWorker) {\n  if (typeof options === 'boolean') {\n    useWorker = options;\n    options = {};\n  }\n  if (useWorker) {\n    return postToWorker(input, options);\n  } else {\n    return convert(input, options);\n  }\n}\n\nvar stamps = {};\nvar worker;\n\nfunction postToWorker(input, options) {\n  if (!worker) {\n    createWorker();\n  }\n  return new Promise(function (resolve) {\n    var stamp = `${Date.now()}${Math.random()}`;\n    stamps[stamp] = resolve;\n    worker.postMessage(\n      JSON.stringify({\n        stamp: stamp,\n        input: input,\n        options: options\n      })\n    );\n  });\n}\n\nfunction createWorker() {\n  var workerURL = URL.createObjectURL(\n    new Blob(\n      [`var getConverter =${getConverter.toString()};var convert = getConverter(); onmessage = function (event) { var data = JSON.parse(event.data); postMessage(JSON.stringify({stamp: data.stamp, output: convert(data.input, data.options)})); };`],\n      { type: 'application/javascript' }\n    )\n  );\n  worker = new Worker(workerURL);\n  URL.revokeObjectURL(workerURL);\n  worker.addEventListener('message', function (event) {\n    var data = JSON.parse(event.data);\n    var stamp = data.stamp;\n    if (stamps[stamp]) {\n      stamps[stamp](data.output);\n    }\n  });\n}\n\nfunction createTree(jcamp, options = {}) {\n  const { flatten = false } = options;\n  if (typeof jcamp !== 'string') {\n    throw new TypeError('the JCAMP should be a string');\n  }\n\n  let lines = jcamp.split(/[\\r\\n]+/);\n  let flat = [];\n  let stack = [];\n  let result = [];\n  let current;\n  let ntupleLevel = 0;\n\n  let spaces = jcamp.includes('## ');\n\n  for (var i = 0; i < lines.length; i++) {\n    let line = lines[i];\n    let labelLine = spaces ? line.replace(/ /g, '') : line;\n\n    if (labelLine.substring(0, 9) === '##NTUPLES') {\n      ntupleLevel++;\n    }\n\n    if (labelLine.substring(0, 7) === '##TITLE') {\n      let title = [labelLine.substring(8).trim()];\n      for (let j = i + 1; j < lines.length; j++) {\n        if (lines[j].startsWith('##')) {\n          break;\n        } else {\n          title.push(lines[j].trim());\n        }\n      }\n      stack.push({\n        title: title.join('\\n'),\n        jcamp: `${line}\\n`,\n        children: []\n      });\n      current = stack[stack.length - 1];\n      flat.push(current);\n    } else if (labelLine.substring(0, 5) === '##END' && ntupleLevel === 0) {\n      current.jcamp += `${line}\\n`;\n      var finished = stack.pop();\n      if (stack.length !== 0) {\n        current = stack[stack.length - 1];\n        current.children.push(finished);\n      } else {\n        current = undefined;\n        result.push(finished);\n      }\n    } else if (current && current.jcamp) {\n      current.jcamp += `${line}\\n`;\n      var match = labelLine.match(/^##(.*?)=(.+)/);\n      if (match) {\n        var dataLabel = match[1].replace(/[ _-]/g, '').toUpperCase();\n        if (dataLabel === 'DATATYPE') {\n          current.dataType = match[2].trim();\n        }\n      }\n    }\n\n    if (labelLine.substring(0, 5) === '##END' && ntupleLevel > 0) {\n      ntupleLevel--;\n    }\n  }\n  if (flatten) {\n    flat.forEach((entry) => {\n      entry.children = undefined;\n    });\n    return flat;\n  } else {\n    return result;\n  }\n}\n\nmodule.exports = {\n  convert: JcampConverter,\n  createTree: createTree\n};\n","import uniqueXFunction from 'ml-arrayxy-uniquex';\n\n/**\n * Parse a text-file and convert it to an array of XY points\n * @param {string} text - csv or tsv strings\n * @param {object} [options]\n * @param {string} [options.arrayType = 'xyxy'] - xxyy or xyxy\n * * 'xxyy' `[[x1,x2,x3,...],[y1,y2,y2,...]]`\n * * 'xyxy' `[[x1,y1],[x2,y2],[x3,y3], ...]]`\n * @param {boolean} [options.normalize = false] - will set the maximum value to 1\n * @param {boolean} [options.uniqueX = false] - Make the X values unique (works only with 'xxyy' format). If the X value is repeated the sum of Y is done.\n * @param {number} [options.xColumn = 0] - A number that specifies the x column\n * @param {number} [options.yColumn = 1] - A number that specifies the y column\n * @param {number} [options.maxNumberColumns = (Math.max(xColumn, yColumn)+1)] - A number that specifies the maximum number of y columns\n * @param {number} [options.minNumberColumns = (Math.max(xColumn, yColumn)+1)] - A number that specifies the minimum number of y columns\n * @param {boolean} [options.keepInfo = false] - shoud we keep the non numeric lines. In this case the system will return an object {data, info}\n * @return {Array<Array<number>>} - check the 'arrayType' option\n */\nexport function parseXY(text, options = {}) {\n  const {\n    normalize = false,\n    uniqueX = false,\n    arrayType = 'xyxy',\n    xColumn = 0,\n    yColumn = 1,\n    keepInfo = false,\n    maxNumberColumns = Math.max(xColumn, yColumn) + 1,\n    minNumberColumns = Math.max(xColumn, yColumn) + 1\n  } = options;\n\n  var lines = text.split(/[\\r\\n]+/);\n\n  if (arrayType !== 'xxyy' && arrayType !== 'xyxy') {\n    throw new Error(`unsupported arrayType (${arrayType})`);\n  }\n\n  var maxY = Number.MIN_VALUE;\n  var result = [[], []];\n  var info = [];\n  for (var l = 0; l < lines.length; l++) {\n    var line = lines[l].trim();\n    // we will consider only lines that contains only numbers\n    if (line.match(/[0-9]+/) && line.match(/^[0-9eE,;. \\t+-]+$/)) {\n      var fields = line.split(/,[; \\t]+|[; \\t]+/);\n      if (fields.length === 1) {\n        fields = line.split(/[,; \\t]+/);\n      }\n      if (\n        fields &&\n                fields.length >= minNumberColumns &&\n                fields.length <= maxNumberColumns\n      ) {\n        let x = parseFloat(fields[xColumn].replace(',', '.'));\n        let y = parseFloat(fields[yColumn].replace(',', '.'));\n\n        if (y > maxY) maxY = y;\n        result[0].push(x);\n        result[1].push(y);\n      }\n    } else if (line) {\n      info.push({ position: result[0].length, value: line });\n    }\n  }\n\n  if (normalize) {\n    for (var i = 0; i < result[0].length; i++) {\n      result[1][i] /= maxY;\n    }\n  }\n\n  if (uniqueX) {\n    uniqueXFunction(result[0], result[1]);\n  }\n\n  if (arrayType === 'xyxy') {\n    var newResult = [];\n    for (let i = 0; i < result[0].length; i++) {\n      newResult.push([result[0][i], result[1][i]]);\n    }\n    result = newResult;\n  }\n\n  if (!keepInfo) return result;\n\n  return {\n    info,\n    data: result\n  };\n}\n","import isArray from 'is-any-array';\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\n/**\n * Fill an array with sequential numbers\n * @param {Array<number>} [input] - optional destination array (if not provided a new array will be created)\n * @param {object} [options={}]\n * @param {number} [options.from=0] - first value in the array\n * @param {number} [options.to=10] - last value in the array\n * @param {number} [options.size=input.length] - size of the array (if not provided calculated from step)\n * @param {number} [options.step] - if not provided calculated from size\n * @return {Array<number>}\n */\n\nfunction sequentialFill() {\n  var input = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (_typeof(input) === 'object' && !isArray(input)) {\n    options = input;\n    input = [];\n  }\n\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  var _options = options,\n      _options$from = _options.from,\n      from = _options$from === void 0 ? 0 : _options$from,\n      _options$to = _options.to,\n      to = _options$to === void 0 ? 10 : _options$to,\n      _options$size = _options.size,\n      size = _options$size === void 0 ? input.length : _options$size,\n      step = _options.step;\n\n  if (size && step) {\n    throw new Error('step is defined by the array size');\n  }\n\n  if (!size) {\n    if (step) {\n      size = Math.floor((to - from) / step) + 1;\n    } else {\n      size = to - from + 1;\n    }\n  }\n\n  if (!step && size) {\n    step = (to - from) / (size - 1);\n  }\n\n  if (Array.isArray(input)) {\n    input.length = 0; // only works with normal array\n\n    for (var i = 0; i < size; i++) {\n      input.push(from);\n      from += step;\n    }\n  } else {\n    if (input.length !== size) {\n      throw new Error('sequentialFill typed array must have the correct length');\n    }\n\n    for (var _i = 0; _i < size; _i++) {\n      input[_i] = from;\n      from += step;\n    }\n  }\n\n  return input;\n}\n\nexport default sequentialFill;\n","/**\n * Function that calculates the integral of the line between two\n * x-coordinates, given the slope and intercept of the line.\n * @param {number} x0\n * @param {number} x1\n * @param {number} slope\n * @param {number} intercept\n * @return {number} integral value.\n */\nexport default function integral(x0, x1, slope, intercept) {\n  return (\n    0.5 * slope * x1 * x1 +\n    intercept * x1 -\n    (0.5 * slope * x0 * x0 + intercept * x0)\n  );\n}\n","import integral from './integral';\n\n/**\n * function that retrieves the getEquallySpacedData with the variant \"smooth\"\n *\n * @param {Array<number>} x\n * @param {Array<number>} y\n * @param {number} from - Initial point\n * @param {number} to - Final point\n * @param {number} numberOfPoints\n * @return {Array} - Array of y's equally spaced with the variant \"smooth\"\n */\nexport default function equallySpacedSmooth(x, y, from, to, numberOfPoints) {\n  var xLength = x.length;\n\n  var step = (to - from) / (numberOfPoints - 1);\n  var halfStep = step / 2;\n\n  var output = new Array(numberOfPoints);\n\n  var initialOriginalStep = x[1] - x[0];\n  var lastOriginalStep = x[xLength - 1] - x[xLength - 2];\n\n  // Init main variables\n  var min = from - halfStep;\n  var max = from + halfStep;\n\n  var previousX = Number.MIN_VALUE;\n  var previousY = 0;\n  var nextX = x[0] - initialOriginalStep;\n  var nextY = 0;\n\n  var currentValue = 0;\n  var slope = 0;\n  var intercept = 0;\n  var sumAtMin = 0;\n  var sumAtMax = 0;\n\n  var i = 0; // index of input\n  var j = 0; // index of output\n\n  function getSlope(x0, y0, x1, y1) {\n    return (y1 - y0) / (x1 - x0);\n  }\n\n  main: while (true) {\n    if (previousX <= min && min <= nextX) {\n      add = integral(0, min - previousX, slope, previousY);\n      sumAtMin = currentValue + add;\n    }\n\n    while (nextX - max >= 0) {\n      // no overlap with original point, just consume current value\n      var add = integral(0, max - previousX, slope, previousY);\n      sumAtMax = currentValue + add;\n\n      output[j++] = (sumAtMax - sumAtMin) / step;\n\n      if (j === numberOfPoints) {\n        break main;\n      }\n\n      min = max;\n      max += step;\n      sumAtMin = sumAtMax;\n    }\n\n    currentValue += integral(previousX, nextX, slope, intercept);\n\n    previousX = nextX;\n    previousY = nextY;\n\n    if (i < xLength) {\n      nextX = x[i];\n      nextY = y[i];\n      i++;\n    } else if (i === xLength) {\n      nextX += lastOriginalStep;\n      nextY = 0;\n    }\n\n    slope = getSlope(previousX, previousY, nextX, nextY);\n    intercept = -slope * previousX + previousY;\n  }\n\n  return output;\n}\n","/**\n * function that retrieves the getEquallySpacedData with the variant \"slot\"\n *\n * @param {Array<number>} x\n * @param {Array<number>} y\n * @param {number} from - Initial point\n * @param {number} to - Final point\n * @param {number} numberOfPoints\n * @return {Array} - Array of y's equally spaced with the variant \"slot\"\n */\nexport default function equallySpacedSlot(x, y, from, to, numberOfPoints) {\n  var xLength = x.length;\n\n  var step = (to - from) / (numberOfPoints - 1);\n  var halfStep = step / 2;\n  var lastStep = x[x.length - 1] - x[x.length - 2];\n\n  var start = from - halfStep;\n  var output = new Array(numberOfPoints);\n\n  // Init main variables\n  var min = start;\n  var max = start + step;\n\n  var previousX = -Number.MAX_VALUE;\n  var previousY = 0;\n  var nextX = x[0];\n  var nextY = y[0];\n  var frontOutsideSpectra = 0;\n  var backOutsideSpectra = true;\n\n  var currentValue = 0;\n\n  // for slot algorithm\n  var currentPoints = 0;\n\n  var i = 1; // index of input\n  var j = 0; // index of output\n\n  main: while (true) {\n    if (previousX >= nextX) throw new Error('x must be an increasing serie');\n    while (previousX - max > 0) {\n      // no overlap with original point, just consume current value\n      if (backOutsideSpectra) {\n        currentPoints++;\n        backOutsideSpectra = false;\n      }\n\n      output[j] = currentPoints <= 0 ? 0 : currentValue / currentPoints;\n      j++;\n\n      if (j === numberOfPoints) {\n        break main;\n      }\n\n      min = max;\n      max += step;\n      currentValue = 0;\n      currentPoints = 0;\n    }\n\n    if (previousX > min) {\n      currentValue += previousY;\n      currentPoints++;\n    }\n\n    if (previousX === -Number.MAX_VALUE || frontOutsideSpectra > 1) {\n      currentPoints--;\n    }\n\n    previousX = nextX;\n    previousY = nextY;\n\n    if (i < xLength) {\n      nextX = x[i];\n      nextY = y[i];\n      i++;\n    } else {\n      nextX += lastStep;\n      nextY = 0;\n      frontOutsideSpectra++;\n    }\n  }\n\n  return output;\n}\n","export default function getZones(from, to, numberOfPoints, exclusions = []) {\n  if (from > to) {\n    [from, to] = [to, from];\n  }\n\n  // in exclusions from and to have to be defined\n  exclusions = exclusions.filter(\n    (exclusion) => exclusion.from !== undefined && exclusion.to !== undefined\n  );\n\n  exclusions = JSON.parse(JSON.stringify(exclusions));\n  // we ensure that from before to\n  exclusions.forEach((exclusion) => {\n    if (exclusion.from > exclusion.to) {\n      [exclusion.to, exclusion.from] = [exclusion.from, exclusion.to];\n    }\n  });\n\n  exclusions.sort((a, b) => a.from - b.from);\n\n  // we will rework the exclusions in order to remove overlap and outside range (from / to)\n  exclusions.forEach((exclusion) => {\n    if (exclusion.from < from) exclusion.from = from;\n    if (exclusion.to > to) exclusion.to = to;\n  });\n  for (let i = 0; i < exclusions.length - 1; i++) {\n    if (exclusions[i].to > exclusions[i + 1].from) {\n      exclusions[i].to = exclusions[i + 1].from;\n    }\n  }\n  exclusions = exclusions.filter((exclusion) => exclusion.from < exclusion.to);\n\n  if (!exclusions || exclusions.length === 0) {\n    return [{ from, to, numberOfPoints }];\n  }\n\n  // need to deal with overlapping exclusions and out of bound exclusions\n\n  let toRemove = exclusions.reduce(\n    (previous, exclusion) => (previous += exclusion.to - exclusion.from),\n    0\n  );\n  let total = to - from;\n  let unitsPerPoint = (total - toRemove) / numberOfPoints;\n  let zones = [];\n  let currentFrom = from;\n  let totalPoints = 0;\n  for (let exclusion of exclusions) {\n    let currentNbPoints = Math.round(\n      (exclusion.from - currentFrom) / unitsPerPoint\n    );\n    totalPoints += currentNbPoints;\n    if (currentNbPoints > 0) {\n      zones.push({\n        from: currentFrom,\n        to: exclusion.from,\n        numberOfPoints: currentNbPoints\n      });\n    }\n\n    currentFrom = exclusion.to;\n  }\n  if (numberOfPoints - totalPoints > 0) {\n    zones.push({\n      from: currentFrom,\n      to: to,\n      numberOfPoints: numberOfPoints - totalPoints\n    });\n  }\n\n  return zones;\n}\n","import sequentialFill from 'ml-array-sequential-fill';\n\nimport equallySpacedSmooth from './equallySpacedSmooth';\nimport equallySpacedSlot from './equallySpacedSlot';\nimport getZones from './getZones';\n\n/**\n * Function that returns a Number array of equally spaced numberOfPoints\n * containing a representation of intensities of the spectra arguments x\n * and y.\n *\n * The options parameter contains an object in the following form:\n * from: starting point\n * to: last point\n * numberOfPoints: number of points between from and to\n * variant: \"slot\" or \"smooth\" - smooth is the default option\n *\n * The slot variant consist that each point in the new array is calculated\n * averaging the existing points between the slot that belongs to the current\n * value. The smooth variant is the same but takes the integral of the range\n * of the slot and divide by the step size between two points in the new array.\n *\n * @param {object} [arrayXY={}] - object containing 2 properties x and y (both an array)\n * @param {object} [options={}]\n * @param {number} [options.from=x[0]]\n * @param {number} [options.to=x[x.length-1]]\n * @param {string} [options.variant='smooth']\n * @param {number} [options.numberOfPoints=100]\n * @param {Array} [options.exclusions=[]] array of from / to that should be skipped for the generation of the points\n * @return {object<x: Array, y:Array>} new object with x / y array with the equally spaced data.\n */\n\nexport default function equallySpaced(arrayXY = {}, options = {}) {\n  let { x, y } = arrayXY;\n  let xLength = x.length;\n  let reverse = false;\n  if (x.length > 1 && x[0] > x[1]) {\n    x = x.slice().reverse();\n    y = y.slice().reverse();\n    reverse = true;\n  }\n\n  let {\n    from = x[0],\n    to = x[xLength - 1],\n    variant = 'smooth',\n    numberOfPoints = 100,\n    exclusions = []\n  } = options;\n\n  if (xLength !== y.length) {\n    throw new RangeError(\"the x and y vector doesn't have the same size.\");\n  }\n\n  if (typeof from !== 'number' || isNaN(from)) {\n    throw new RangeError(\"'from' option must be a number\");\n  }\n\n  if (typeof to !== 'number' || isNaN(to)) {\n    throw new RangeError(\"'to' option must be a number\");\n  }\n\n  if (typeof numberOfPoints !== 'number' || isNaN(numberOfPoints)) {\n    throw new RangeError(\"'numberOfPoints' option must be a number\");\n  }\n\n  let zones = getZones(from, to, numberOfPoints, exclusions);\n\n  let xResult = [];\n  let yResult = [];\n  for (let zone of zones) {\n    let zoneResult = processZone(\n      x,\n      y,\n      zone.from,\n      zone.to,\n      zone.numberOfPoints,\n      variant,\n      reverse\n    );\n    xResult.push(...zoneResult.x);\n    yResult.push(...zoneResult.y);\n  }\n\n  if (reverse) {\n    if (from < to) {\n      return { x: xResult.reverse(), y: yResult.reverse() };\n    } else {\n      return { x: xResult, y: yResult };\n    }\n  } else {\n    if (from < to) {\n      return { x: xResult, y: yResult };\n    } else {\n      return { x: xResult.reverse(), y: yResult.reverse() };\n    }\n  }\n}\n\nfunction processZone(x, y, from, to, numberOfPoints, variant) {\n  if (numberOfPoints < 1) {\n    throw new RangeError('the number of points must be at least 1');\n  }\n\n  var output =\n    variant === 'slot'\n      ? equallySpacedSlot(x, y, from, to, numberOfPoints)\n      : equallySpacedSmooth(x, y, from, to, numberOfPoints);\n\n  return {\n    x: sequentialFill({\n      from,\n      to,\n      size: numberOfPoints\n    }),\n    y: output\n  };\n}\n","export default function getZones(from, to, exclusions = []) {\n  if (from > to) {\n    [from, to] = [to, from];\n  }\n\n  // in exclusions from and to have to be defined\n  exclusions = exclusions.filter(\n    (exclusion) => exclusion.from !== undefined && exclusion.to !== undefined\n  );\n\n  exclusions = JSON.parse(JSON.stringify(exclusions));\n  // we ensure that from before to\n  exclusions.forEach((exclusion) => {\n    if (exclusion.from > exclusion.to) {\n      [exclusion.to, exclusion.from] = [exclusion.from, exclusion.to];\n    }\n  });\n\n  exclusions.sort((a, b) => a.from - b.from);\n\n  // we will rework the exclusions in order to remove overlap and outside range (from / to)\n  exclusions.forEach((exclusion) => {\n    if (exclusion.from < from) exclusion.from = from;\n    if (exclusion.to > to) exclusion.to = to;\n  });\n  for (let i = 0; i < exclusions.length - 1; i++) {\n    if (exclusions[i].to > exclusions[i + 1].from) {\n      exclusions[i].to = exclusions[i + 1].from;\n    }\n  }\n  exclusions = exclusions.filter((exclusion) => exclusion.from < exclusion.to);\n\n  if (!exclusions || exclusions.length === 0) {\n    return [{ from, to }];\n  }\n\n  let zones = [];\n  let currentFrom = from;\n  for (let exclusion of exclusions) {\n    if (currentFrom < exclusion.from) {\n      zones.push({\n        from: currentFrom,\n        to: exclusion.from\n      });\n    }\n\n    currentFrom = exclusion.to;\n  }\n  if (currentFrom < to) {\n    zones.push({\n      from: currentFrom,\n      to: to\n    });\n  }\n\n  return zones;\n}\n","import getZones from './getZones';\n\n/**\n * Filter an array x/y based on various criteria\n * x points are expected to be sorted\n *\n * @param {object} points\n * @param {object} [options={}]\n * @param {array} [options.from]\n * @param {array} [options.to]\n * @param {array} [options.exclusions=[]]\n * @return {{x: Array<number>, y: Array<number>}}\n */\n\nexport default function filterX(points, options = {}) {\n  const { x, y } = points;\n  const { from = x[0], to = x[x.length - 1], exclusions = [] } = options;\n\n  let zones = getZones(from, to, exclusions);\n\n\n  let currentZoneIndex = 0;\n  let newX = [];\n  let newY = [];\n  let position = 0;\n  while (position < x.length) {\n    if (\n      x[position] <= zones[currentZoneIndex].to &&\n      x[position] >= zones[currentZoneIndex].from\n    ) {\n      newX.push(x[position]);\n      newY.push(y[position]);\n    } else {\n      if (x[position] > zones[currentZoneIndex].to) {\n        currentZoneIndex++;\n        if (!zones[currentZoneIndex]) break;\n      }\n    }\n    position++;\n  }\n\n  return {\n    x: newX,\n    y: newY\n  };\n}\n"],"sourceRoot":""}